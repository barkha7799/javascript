<!DOCTYPE html>
<!-- saved from url=(0069)https://www.sitepoint.com/premium/books/javascript-best-practice/read -->
<html id="spðŸš§" lang="en" class=" no-ie8compat svg svgclippaths inlinesvg csspositionsticky"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="https://www.sitepoint.com/manifest.json" rel="manifest">

<meta content="SitePoint: Learn web development and design from the masters." name="description">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="735803" name="sp:user">
<meta content="735803" name="sp:user:id">
<meta name="sp:user:member">
<title>SitePoint Premium</title>
<link href="https://www.sitepoint.com/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
<link href="https://www.sitepoint.com/apple-touch-icon-57x57-precomposed.png" rel="apple-touch-icon-precomposed">
<link href="https://www.sitepoint.com/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72">
<link href="https://www.sitepoint.com/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114">
<link href="https://www.sitepoint.com/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144">
<link crossorigin="anonymous" href="./SitePoint Premium_files/all.css" integrity="sha384-TXfwrfuHVznxCssTxWoPZjhcss/hp38gEOH8UPZG/JcXonvBQ6SlsIF49wUzsGno" rel="stylesheet">
<link as="font" crossorigin="anonymous" href="https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2" integrity="sha384-ou7S2dMEbMoBldKLX/7t653mpVth/LBxyjvdNsYIvdQRMs7CM2bNL2jrsPSLw2G1" rel="preload">
<link rel="stylesheet" media="screen" href="./SitePoint Premium_files/styles-dce00634a7e7e28e363924a0268fa701305ca41f85b2e3af0b6c2817a82f00d0.css">
<link rel="stylesheet" media="screen" href="./SitePoint Premium_files/dynamic-ffcfb30888b56d1460ec0b95ed80c61a858c1bbc9cee95dce4d1b7f2701646bc.css">

<meta name="csrf-param" content="authenticity_token">
<meta name="csrf-token" content="DLjEmOvMoQFEwWtHkKkMJ1gCtxJTIcakw0clfSh7A1bMDm57jWyIGITsm3/bhTebXmIwWK7Kcasik8Gyw1sxYw==">
<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
<!--[if lt IE 9]>
<script src="https://d39ayi7b6b3haj.cloudfront.net/premium/assets/html5shiv-50b4798dc290f9ad0e16a62ea7500606f569133edc284090ca1e068f66e5d506.js"></script>
<![endif]-->
<!-- / We should strive to load only the bare essential Javascript in head, please use javascript_body -->
<!-- / The code below are not loaded in checkout page -->
<script src="./SitePoint Premium_files/1531838877064999" async=""></script><script async="" src="./SitePoint Premium_files/fbevents.js.download"></script><script async="" src="./SitePoint Premium_files/saved_resource" data-sumo-site-id="64b8e500e3524000ecfa2000d01e2100033e83009398f000ab804c005e0e4300"></script><script type="text/javascript" async="" src="./SitePoint Premium_files/hotjar-1088957.js.download"></script><script type="text/javascript" async="" src="./SitePoint Premium_files/f.txt"></script><script type="text/javascript" async="" src="./SitePoint Premium_files/analytics.js.download"></script><script async="" src="./SitePoint Premium_files/gtm.js.download"></script><script async="" src="./SitePoint Premium_files/fs.js.download"></script><script>
  window['_fs_debug'] = false;
  window['_fs_host'] = 'fullstory.com';
  window['_fs_org'] = '79Z3E';
  window['_fs_namespace'] = 'FS';
  (function(m,n,e,t,l,o,g,y){
      if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
      g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
      o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
      y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
      g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};
      g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
      g.clearUserCookie=function(c,d,i){if(!c || document.cookie.match('fs_uid=[`;`]*`[`;`]*`[`;`]*`')){
      d=n.domain;while(1){n.cookie='fs_uid=;domain='+d+
      ';path=/;expires='+new Date(0).toUTCString();i=d.indexOf('.');if(i<0)break;d=d.slice(i+1)}}};
  })(window,document,window['_fs_namespace'],'script','user');
</script>
<script>
  FS.identify('735803', {
    username: 'patelbarkha18398',
    email: 'patelbarkha18398@gmail.com',
  });
</script>

<script async="" src="./SitePoint Premium_files/OneSignalSDK.js.download" type="text/javascript"></script>
<script src="./SitePoint Premium_files/ei.js.download" type="text/javascript"></script>
<script>
  !function(t,n,o){var a="chmln",e="adminPreview",c="setup identify alias track clear set show on off custom help _data".split(" ");if(n[a]||(n[a]={}),n[a][e]&&(n[a][e]=!1),!n[a].root){n[a].accountToken=o,n[a].location=n.location.href.toString(),n[a].now=new Date;for(var s=0;s<c.length;s++)!function(){var t=n[a][c[s]+"_a"]=[];n[a][c[s]]=function(){t.push(arguments)}}();var i=t.createElement("script");i.src="https://fast.trychameleon.com/messo/"+o+"/messo.min.js",i.async=!0,t.head.appendChild(i)}}(document,window,"SSG4t4ewvmoj89O5Go2bbYQklATniCFH1NrtiT27VqVByq-1FKhUY-AMdCpK5FGF5sAuod");
</script><script src="./SitePoint Premium_files/messo.min.js.download" async=""></script>
<script>
  window.x = window.x || {};
  var OneSignal = window.OneSignal || [];
    OneSignal.push(["init", {
      appId: "65189cfb-a985-4bd7-a41b-c2666081e811",
      safari_web_id: 'web.onesignal.auto.49d2239d-a04e-422a-89e0-14dbda97fb4d',
      autoRegister: false,
      persistNotification: true,
    }]);
</script>
<script>
  const currentUser = "735803";
  const currentUserMemberStatus = "";
  const currentUserMembershipType = "Free";
  const currentUserMembership = "none";
</script>
<script src="./SitePoint Premium_files/loader-e029e91c9de1b68193ab23944aba3a36a3842b97bdf127f0735f1702966a2faa.js.download"></script>


<script>
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KL8PMMW');


</script>
<script async="" src="./SitePoint Premium_files/analytics.js.download"></script>
<noscript>
<iframe height='0' src='https://www.googletagmanager.com/ns.html?id=GTM-KL8PMMW' style='display:none;visibility:hidden' width='0'></iframe>
</noscript>

<link href="https://www.sitepoint.com/premium/books/javascript-best-practice/read" rel="canonical">
<style type="text/css"></style><script src="./SitePoint Premium_files/f(1).txt"></script><script async="" src="./SitePoint Premium_files/modules-7a540391ba1fb992682e401dac39619b.js.download"></script><style type="text/css">iframe#_hjRemoteVarsFrame {display: none !important; width: 1px !important; height: 1px !important; opacity: 0 !important; pointer-events: none !important;}</style><script async="true" type="text/javascript" src="./SitePoint Premium_files/roundtrip.js.download"></script><script type="text/javascript" src="./SitePoint Premium_files/O2SYZ7SVNZGRNBIZ3ZOVWC"></script><script async="true" type="text/javascript" src="./SitePoint Premium_files/roundtrip.js.download"></script><script async="true" type="text/javascript" src="./SitePoint Premium_files/LTH5SH3N6NGW3P2SG7ERWU"></script><div style="width: 1px; height: 1px; display: inline; position: absolute;"><img height="1" width="1" style="border-style:none;" alt="" src="./SitePoint Premium_files/out"><img height="1" width="1" style="border-style:none;" alt="" src="./SitePoint Premium_files/out(1)"><img height="1" width="1" style="border-style:none;" alt="" src="./SitePoint Premium_files/out(2)"><img height="1" width="1" style="border-style:none;" alt="" src="./SitePoint Premium_files/out(3)"><img height="1" width="1" style="border-style:none;" alt="" src="./SitePoint Premium_files/out(4)"><img height="1" width="1" style="border-style:none;" alt="" src="./SitePoint Premium_files/out(5)"><img height="1" width="1" style="border-style:none;" alt="" src="./SitePoint Premium_files/out(6)"></div><div style="width: 1px; height: 1px; display: inline; position: absolute;"><img height="1" width="1" style="border-style:none;" alt="" src="./SitePoint Premium_files/out(7)">
<img height="1" width="1" style="border-style:none;" alt="" src="./SitePoint Premium_files/out(8)">
<img height="1" width="1" style="border-style:none;" alt="" src="./SitePoint Premium_files/out(9)">
<img height="1" width="1" style="border-style:none;" alt="" src="./SitePoint Premium_files/out(10)">
<img height="1" width="1" style="border-style:none;" alt="" src="./SitePoint Premium_files/out(11)">
<img height="1" width="1" style="border-style:none;" alt="" src="./SitePoint Premium_files/out(12)">
</div><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="156085c5-0017-4150-b225-a731ad248f38/service" src="./SitePoint Premium_files/service.js.download"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="services/services" src="./SitePoint Premium_files/services.js.download"></script><style>@-webkit-keyframes insQ_100 {  from {  outline: 1px solid transparent  } to {  outline: 0px solid transparent }  }
#menufication-top { animation-duration: 0.001s; animation-name: insQ_100; -webkit-animation-duration: 0.001s; -webkit-animation-name: insQ_100;  } </style><link type="text/css" rel="stylesheet" href="./SitePoint Premium_files/listbuilder-popup.css"></head>
<body style="">

<div class="row flash-messages">
</div>

<script>
  window.SP = {
      application: "reeedr",
      slug: "javascript-best-practice",
      book_title: "JavaScript: Best Practice",
      reader_description: "Write powerful, clean and maintainable JavaScript with clear, practical lessons in application architecture, package management, tools, shorthands, callbacks, classes, flow control and much more.",
      image: "https://learnable-images.s3.amazonaws.com/books/4c7f6303-60e8-45dc-a95b-aae08a4f32a3.png", 
  }
</script>
<reeedr book_slug="javascript-best-practice" book_title="JavaScript: Best Practice" book_url="https://s3.amazonaws.com/learnable-static/premium/reeedr/books/javascript-best-practice/javascript-best-practice.html" downloadable="false" image_url="https://learnable-images.s3.amazonaws.com/books/4c7f6303-60e8-45dc-a95b-aae08a4f32a3.png" reader_description="Write powerful, clean and maintainable JavaScript with clear, practical lessons in application architecture, package management, tools, shorthands, callbacks, classes, flow control and much more."><div data-reactroot="" id="reeedr"><div class="brandstrip l-p-fix l-w-100 shrink"><div class="l-d-f l-w-100 l-w-3col--3col l-w-4col--4col l-jc-sb l-mh-auto"><div class="book-title f-c-white l-mh2 l-mh0--3col">JavaScript: Best Practice</div><div class="l-d-n l-d-b--2col l-mh2 l-mh0--3col"><a href="https://www.sitepoint.com/premium/books/javascript-best-practice/read#" class="f-medium l-mr4 f-bold" id="font-adjuster-button"><!-- react-text: 7 -->A<!-- /react-text --><div class="font-adjuster-icon l-d-if l-fd-col l-va-m f-center l-ml1"><span class="f-small">+</span><span class="f-small">-</span></div></a><a href="https://www.sitepoint.com/premium/topics/all" class="f-small l-mr4"><i class="l-mr2 fas fa-books"></i><!-- react-text: 13 --> Library<!-- /react-text --></a><a href="https://www.sitepoint.com/premium/dashboard" class="f-small"><i class="l-mr2 fas fa-sliders-h"></i><!-- react-text: 16 --> Dashboard<!-- /react-text --></a></div><div class="l-d-n--2col l-mh2"><a href="https://www.sitepoint.com/premium/books/javascript-best-practice/read#" class="f-medium"><i class="fas fa-bars"></i></a></div></div><div id="font-adjuster-wrapper" class="l-d-f l-w-100 l-w-3col--3col l-w-4col--4col l-jc-fe l-mh-auto l-p-rel"><div id="font-adjuster-container" class="l-d-n l-pv3 l-ph4 f-minor f-c-white l-mb0"><!-- react-text: 22 -->Text-size:<!-- /react-text --><a class="f-c-white f-large f-bold l-ml4 l-pv1 l-ph3" id="decfontsize" src="#">A-</a><a class="f-c-white f-large f-bold l-ml2 l-pv1 l-ph3" id="incfontsize" src="#">A+</a></div><div id="mobile-nav-container" class="l-d-n l-w-100"><ul class="l-ma0"><li class="l-pv2 l-ph4"><a href="https://www.sitepoint.com/premium/topics/all" class="f-medium"><i class="l-mr2 fas fa-books"></i><!-- react-text: 30 --> Library<!-- /react-text --></a></li><li class="l-pv2 l-ph4"><a href="https://www.sitepoint.com/premium/dashboard" class="f-medium"><i class="l-mr2 fas fa-sliders-h"></i><!-- react-text: 34 --> Dashboard<!-- /react-text --></a></li><li class="l-pv2 l-ph4"><a href="https://www.sitepoint.com/premium/books/javascript-best-practice/read#" class="f-medium l-mr2 f-bold"><!-- react-text: 37 -->A<!-- /react-text --><div class="font-adjuster-icon l-d-if l-fd-col l-va-m f-center l-ml1"><span class="f-small">+</span><span class="f-small">-</span></div></a><span>Text-size:</span><a class="f-c-white f-large f-bold l-ml4 l-pv1 l-ph3" id="decfontsize" src="#">A-</a><a class="f-c-white f-large f-bold l-ml3 l-pv1 l-ph3" id="incfontsize" src="#">A+</a></li></ul></div></div></div><div class="bookpanel"><div class="set-front-matter l-d-f"><div class="l-mr5"><div class="thumbnail-book"><img src="./SitePoint Premium_files/cover-front.png"></div></div><div class="col"><h1 class="f-lh-title">JavaScript: Best Practice</h1><div>Write powerful, clean and maintainable JavaScript with clear, practical lessons in application architecture, package management, tools, shorthands, callbacks, classes, flow control and much more.</div></div></div></div><nav id="toolstrip" class="fixed"><div class="toolbar l-ph2 l-ph0--3col"><div class="toolItem l-ph2 l-ph3--3col no-borders"><a class="toolbarLink f-small" id="viewchapters" src="#"><!-- react-text: 56 -->Chapters<!-- /react-text --><i class="fas fa-chevron-down " id="chapters-button-icon"></i></a></div><div class="toolItem l-ph2 l-ph3--3col"><a class="toolbarLink f-small" id="my-bookmarks" src="#"><!-- react-text: 60 -->My Bookmarks<!-- /react-text --><i class="fas fa-chevron-down " id="my-bookmarks-button-icon"></i></a></div><div class="toolItem l-ph2 l-ph3--3col no-borders"><a class="toolbarLink f-small l-d-f l-ai-cen l-jc-cen" id="addBookmark"><span class="bookmark-icon-stack-wrapper l-d-f l-jc-cen l-ai-cen"><i class="bookmark-icon fas fa-bookmark"></i></span><!-- react-text: 66 -->Add Bookmark<!-- /react-text --></a></div></div><div class="toolholder accordion"><div id="toc-accordion-content" class="accordion-content l-pt4 hide-panel fixed"><div class="heading l-mb3"><h4 id="table-of-contents" class="l-mv0">Table of Contents</h4><a disabled=""><i class="fas fa-times-circle close-button" id="close-button"></i></a></div><ol class="toc" start="0"><li class="chapters-wrapper"><li class="toc-chapter accordion-item l-ph4 l-pv0 l-d-f l-ai-cen preface  "><a id="preface" title="Preface"><span class="l-w-100">Preface</span></a></li><li class="toc-chapter accordion-item l-ph4 l-pv0 l-d-f l-ai-cen chapter  current-chapter"><a id="chapter-1" title="The Anatomy of a Modern JavaScript Application"><span class="l-w-100">The Anatomy of a Modern JavaScript Application</span><a class="bookmark-icon-stack-wrapper l-jc-cen l-ai-cen t-bg-white l-w-100 undefined"><i class="bookmark-icon far
          far
           fa-bookmark"></i></a></a></li><li class="toc-chapter accordion-item l-ph4 l-pv0 l-d-f l-ai-cen chapter  "><a id="chapter-2" title="Clean Code with ES6 Default Parameters &amp; Property Shorthands"><span class="l-w-100">Clean Code with ES6 Default Parameters &amp; Property Shorthands</span><a class="bookmark-icon-stack-wrapper l-jc-cen l-ai-cen t-bg-white l-w-100 undefined"><i class="bookmark-icon far
          far
           fa-bookmark"></i></a></a></li><li class="toc-chapter accordion-item l-ph4 l-pv0 l-d-f l-ai-cen chapter  "><a id="chapter-3" title="JavaScript Performance Optimization Tips: An Overview"><span class="l-w-100">JavaScript Performance Optimization Tips: An Overview</span><a class="bookmark-icon-stack-wrapper l-jc-cen l-ai-cen t-bg-white l-w-100 undefined"><i class="bookmark-icon far
          far
           fa-bookmark"></i></a></a></li><li class="toc-chapter accordion-item l-ph4 l-pv0 l-d-f l-ai-cen chapter  "><a id="chapter-4" title="JavaScript Design Patterns: The Singleton"><span class="l-w-100">JavaScript Design Patterns: The Singleton</span><a class="bookmark-icon-stack-wrapper l-jc-cen l-ai-cen t-bg-white l-w-100 undefined"><i class="bookmark-icon far
          far
           fa-bookmark"></i></a></a></li><li class="toc-chapter accordion-item l-ph4 l-pv0 l-d-f l-ai-cen chapter  "><a id="chapter-5" title="JavaScript Object Creation: Patterns and Best Practices"><span class="l-w-100">JavaScript Object Creation: Patterns and Best Practices</span><a class="bookmark-icon-stack-wrapper l-jc-cen l-ai-cen t-bg-white l-w-100 undefined"><i class="bookmark-icon far
          far
           fa-bookmark"></i></a></a></li><li class="toc-chapter accordion-item l-ph4 l-pv0 l-d-f l-ai-cen chapter  "><a id="chapter-6" title="Best Practices for Using Modern JavaScript Syntax"><span class="l-w-100">Best Practices for Using Modern JavaScript Syntax</span><a class="bookmark-icon-stack-wrapper l-jc-cen l-ai-cen t-bg-white l-w-100 undefined"><i class="bookmark-icon far
          far
           fa-bookmark"></i></a></a></li><li class="toc-chapter accordion-item l-ph4 l-pv0 l-d-f l-ai-cen chapter  "><a id="chapter-7" title="Flow Control in Modern JS: Callbacks to Promises to Async/Await"><span class="l-w-100">Flow Control in Modern JS: Callbacks to Promises to Async/Await</span><a class="bookmark-icon-stack-wrapper l-jc-cen l-ai-cen t-bg-white l-w-100 undefined"><i class="bookmark-icon far
          far
           fa-bookmark"></i></a></a></li><li class="toc-chapter accordion-item l-ph4 l-pv0 l-d-f l-ai-cen chapter  "><a id="chapter-8" title="JavaScriptâ€™s New Private Class Fields, and How to Use Them"><span class="l-w-100">JavaScriptâ€™s New Private Class Fields, and How to Use Them</span><a class="bookmark-icon-stack-wrapper l-jc-cen l-ai-cen t-bg-white l-w-100 undefined"><i class="bookmark-icon far
          far
           fa-bookmark"></i></a></a></li></li><li class="subchapters-wrapper "></li></ol></div><div id="bookmarks-accordion-content" class="accordion-content l-pt4 hide-panel animate--up"><div class="heading"><h4>My Bookmarks</h4><a disabled=""><i class="fas fa-times-circle close-button" id="close-button" title=""></i></a></div><ol class="bookmarks l-w-100" start="0"></ol></div></div><div class="tooltip-holder l-d-f l-jc-fe l-mh-auto l-pr5--4col l-pr3--3col l-pr2"></div></nav><div id="reeedr-body"><div class="frontmatters hide"> 
  <div class="page-frontmatter front set-front-matter">
    <div class="title-name">
      <h2 id="maintitle">JavaScript: Best Practice </h2>
    </div>
    <p>Copyright Â© 2018 SitePoint Pty. Ltd.</p>
    <ul>
      <li>
        <strong>Product Manager:</strong> Simon Mackie</li>
      <li>
        <strong>English Editor:</strong> Ralph Mason</li>
      <li>
        <strong>Project Editor:</strong> James Hibbard </li>
      <li>
        <strong>Cover Designer:</strong> Alex Walker</li>
    </ul>
    <h2 id="notice-of-rights">Notice of Rights</h2>
    <p>All rights reserved. No part of this book may be reproduced, stored in a retrieval system or transmitted in any form
      or by any means, without the prior written permission of the publisher, except in the case of brief quotations embodied
      in critical articles or reviews.</p>
    <h2 id="notice-of-liability">Notice of Liability</h2>
    <p>The author and publisher have made every effort to ensure the accuracy of the information herein. However, the information
      contained in this book is sold without warranty, either express or implied. Neither the authors and SitePoint Pty.
      Ltd., nor its dealers or distributors will be held liable for any damages to be caused either directly or indirectly
      by the instructions contained in this book, or by the software or hardware products described herein.</p>
    <h2 id="trademark-notice">Trademark Notice</h2>
    <p>Rather than indicating every occurrence of a trademarked name as such, this book uses the names only in an editorial
      fashion and to the benefit of the trademark owner with no intention of infringement of the trademark.</p>
  </div>
  <div class="page-about front set-front-matter">
    <div class="small-centered">
      <p>
        <img src="./SitePoint Premium_files/sitepoint-gray.svg" alt="SitePoint logo" width="160">
        <br> Published by SitePoint Pty. Ltd.</p>
      <p>48 Cambridge Street Collingwood
        <br> VIC Australia 3066
        <br> Web: www.sitepoint.com
        <br> Email: books@sitepoint.com</p>
      <br> Printed and bound in the United States of America</div>
    <h2 id="about-sitepoint">About SitePoint</h2>
    <p>SitePoint specializes in publishing fun, practical, and easy-to-understand content for web professionals. Visit
      <a class="uri" href="http://www.sitepoint.com/">http://www.sitepoint.com/</a> to access our blogs, books, newsletters, articles, and community forums. Youâ€™ll find
      a stack of information on JavaScript, PHP, Ruby, mobile development, design, and more.</p>
  </div>
  <div class="preface set-front-matter">
    <h1 id="preface">Preface</h1>
    <p>Thereâ€™s no doubt that the JavaScript ecosystem changes fast. Not only are new tools and frameworks introduced and developed at a rapid rate, the language itself has undergone big changes with the introduction of ES2015 (aka ES6). Understandably, many articles have been written complaining about how difficult it is to learn modern JavaScript development these days. We're aiming to minimize that confusion with this set of books on modern JavaScript.</p>
    <p>This book presents modern JavaScript best practice, utilizing the features now available in the language, enabling you to write more powerful code that is clean, performant, maintainable, and resusable.</p>
    <h2 id="who-should-read-this-book-">Who Should Read This Book?</h2>
    <p>This book is for all front-end developers who wish to improve their JavaScript skills. Youâ€™ll need to be familiar
      with HTML and CSS and have a reasonable level of understanding of JavaScript in order to follow the discussion. </p>
    <h2 id="conventions-used">Conventions Used</h2>
    <p>Youâ€™ll notice that weâ€™ve used certain typographic and layout styles throughout this book to signify different types of
      information. Look out for the following items.</p>
    <h3 id="code-samples">Code Samples</h3>
    <p>Code in this book is displayed using a fixed-width font, like so: </p>
    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>A Perfect Summer's Day<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>It was a lovely day for a walk in the park.
The birds were singing and the kids were all back at school.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>Where existing code is required for context, rather than repeat all of it, â‹® will be displayed:</p>
    <pre class=" language-js"><code class=" language-js"><span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  â‹®
new_variable <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>Some lines of code should be entered on one line, but weâ€™ve had to wrap them because of page constraints. An âž¥ indicates
      a line break that exists for formatting purposes only, and should be ignored:</p>
    <pre class=" language-js"><code class=" language-js"><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>"http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>sitepoint<span class="token punctuation">.</span>com<span class="token operator">/</span>responsive<span class="token operator">-</span>web<span class="token operator">-</span>
âž¥design<span class="token operator">-</span>real<span class="token operator">-</span>user<span class="token operator">-</span>testing<span class="token operator">/</span><span class="token operator">?</span>responsive1"<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h3 class="breakbefore" id="preface-tips">Tips, Notes, and Warnings</h3>
    <div class="box tip">
      <h4>Hey, You!</h4>
      <div class="body">
        <p>Tips provide helpful little pointers.</p>
      </div>
    </div>
    <div class="box note">
      <h4>Ahem, Excuse Me ...</h4>
      <div class="body">
        <p>Notes are useful asides that are relatedâ€”but not criticalâ€”to the topic at hand. Think of them as extra tidbits of
          information.</p>
      </div>
    </div>
    <div class="box attention">
      <h4>Make Sure You Always ...</h4>
      <div class="body">
        <p>... pay attention to these important points.</p>
      </div>
    </div>
    <div class="box warning">
      <h4>Watch Out!</h4>
      <div class="body">
        <p>Warnings highlight any gotchas that are likely to trip you up along the way.</p>
      </div>
    </div>
    <div class="box codepen">
      <h4>Live Code</h4>
      <div class="body">
        <p>This example has a Live Codepen.io Demo you can play with.</p>
      </div>
    </div>
    <div class="box github">
      <h4>Github </h4>
      <div class="body">
        <p>This example has a code repository available at Github.com.</p>
      </div>
    </div>

      <div class="next-chapter-wrapper"><a class="next-chapter-button" data-next-chapter="1" data-href="#letconst"><span>NEXT :</span>The Anatomy
          of a Modern JavaScript Application<i class="fas fa-chevron-right"></i></a>
      </div>
  </div>
</div>
  <!--:markdown-it# Markdown-->

<!--new chapter-->
<div class="chapter" data-chapter-number="1">
    <div class="chapter-start">
      <div class="ch-head">Chapter <span class="chapter-number"> 1</span></div>
      <h1 class="chaptertitle" id="letconst">The Anatomy of a Modern JavaScript Application</h1>
      <h3 class="author">James Kolce</h3>
    </div>

<p class=""><strong>Thereâ€™s no doubt that the JavaScript ecosystem changes fast. Not only are new tools and frameworks introduced and developed at a rapid rate, the language itself has undergone big changes with the introduction of ES2015 (aka ES6). Understandably, many articles have been written complaining about how difficult it is to learn modern JavaScript development these days.</strong></p>

<p class="">In this article, Iâ€™ll introduce you to modern JavaScript. Weâ€™ll take a look at recent developments in the language and get an overview of the tools and techniques currently used to write front-end web applications. If youâ€™re just starting out with learning the language, or youâ€™ve not touched it for a few years and are wondering what happened to the JavaScript you used to know, this article is for you.</p>


<h2 id="anoteaboutnodejs" class="">A Note About Node.js</h2>

<p class="">Node.js is a runtime that allows server-side programs to be written in JavaScript. Itâ€™s possible to have full-stack JavaScript applications, where both the front and back end of the app is written in the same language. Although this article is focused on client-side development, Node.js still plays an important role.</p>

<p class="">The arrival of Node.js had a significant impact on the JavaScript ecosystem, introducing the npm package manager and popularizing the CommonJS module format. Developers started to build more innovative tools and develop new approaches to blur the line between the browser, the server, and native applications.</p>

<h2 id="javascriptes2015" class="">JavaScript ES2015+</h2>

<p class="">In 2015, the sixth version of <a href="https://en.wikipedia.org/wiki/ECMAScript" target="_blank">ECMAScript</a> â€” the specification that defines the JavaScript language â€” was released under the name of <a href="http://www.ecma-international.org/ecma-262/6.0/" target="_blank">ES2015</a> (still often referred to as ES6). This new version included substantial additions to the language, making it easier and more feasible to build ambitious web applications. But improvements donâ€™t stop with ES2015; each year, a new version is released.</p>

<h3 id="declaringvariables" class="bookmark-highlight">Declaring variables</h3>

<p class="">JavaScript now has two additional ways to declare variables: <a href="https://www.sitepoint.com/how-to-declare-variables-javascript/" target="_blank">let and const</a>.</p>

<p class=""><code>let</code> is the successor to <code>var</code>. Although <code>var</code> is still available, <code>let</code> limits the scope of variables to the block (rather than the function) theyâ€™re declared within, which reduces the room for error:</p>

<pre class="language-javascript"><code class="javascript  language-javascript"><span class="token comment">// ES5</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// &lt;-- logs the numbers 1 to 4</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &lt;-- 5 (variable i still exists outside the loop)</span>

<span class="token comment">// ES2015</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &lt;-- 'Uncaught ReferenceError: j is not defined'</span>
</code></pre>

<p class="">Using <code>const</code> allows you to define variables that cannot be rebound to new values. For primitive values such as strings and numbers, this results in something similar to a constant, as you cannot change the value once it has been declared:</p>

<pre class="language-javascript"><code class="javascript  language-javascript"><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'Bill'</span><span class="token punctuation">;</span>
name <span class="token operator">=</span> <span class="token string">'Steve'</span><span class="token punctuation">;</span>
<span class="token comment">// &lt;-- 'Uncaught TypeError: Assignment to constant variable.'</span>

<span class="token comment">// Gotcha</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Bill'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Steve'</span><span class="token punctuation">;</span>
<span class="token comment">// person.name is now Steve.</span>
<span class="token comment">// As we're not changing the object that person is bound to, JavaScript doesn't </span>
<span class="token comment">// complain.</span>
</code></pre>

<h3 id="arrowfunctions" class="">Arrow functions</h3>

<p><a href="https://www.sitepoint.com/es6-arrow-functions-new-fat-concise-syntax-javascript/" target="_blank">Arrow functions</a> provide a cleaner syntax for declaring anonymous functions (lambdas), dropping the <code>function</code> keyword and the <code>return</code> keyword when the body function only has one expression. This can allow you to write functional style code in a nicer way:</p>

<pre class="language-javascript"><code class="javascript  language-javascript"><span class="token comment">// ES5</span>
<span class="token keyword">var</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ES2015</span>
<span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
</code></pre>

<p>The other important feature of arrow functions is that they inherit the value of <code>this</code> from the context in which they are defined:</p>

<pre class="language-javascript"><code class="javascript  language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token comment">// ES5</span>
  <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// |this| refers to the global object</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ES2015</span>
  <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// |this| properly refers to the person object</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<h3 id="improvedclasssyntax">Improved Class syntax</h3>

<p>If youâ€™re a fan of object-oriented programming, you might like the <a href="https://www.sitepoint.com/object-oriented-javascript-deep-dive-es6-classes/" target="_blank">addition of classes to the language</a> on top of the existent mechanism based on prototypes. While itâ€™s mostly just syntactic sugar, it provides a cleaner syntax for developers trying to emulate classical object-orientation with prototypes.</p>

<pre class="language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Hello, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>

<h3 id="promisesasyncfunctions">Promises / Async functions</h3>

<p>The asynchronous nature of JavaScript has long represented a challenge; any non-trivial application ran the risk of falling into a callback hell when dealing with things like Ajax requests.</p>

<p>Fortunately, ES2015 added native support for <a href="https://www.sitepoint.com/overview-javascript-promises/" target="_blank">promises</a>. Promises represent values that donâ€™t exist at the moment of the computation but that may be available later, making the management of asynchronous function calls more manageable without getting into deeply nested callbacks.</p>

<p>ES2017 introduced <a href="https://www.sitepoint.com/simplifying-asynchronous-coding-async-functions/" target="_blank">async functions</a> (sometimes referred to as async/await) that make improvements in this area, allowing you to treat asynchronous code as if it were synchronous:</p>

<pre class="language-javascript"><code class="javascript  language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">doAsyncOp</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> val <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">asynchronousOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> val<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>

<h3 id="modules">Modules</h3>

<p>Another prominent feature added in ES2015 is a native module format, making the definition and usage of modules a part of the language. Loading modules was previously only available in the form of third-party libraries. Weâ€™ll look at modules in more depth in the next section.</p>

<p>There are other features we wonâ€™t talk about here, but weâ€™ve covered at some of the major differences youâ€™re likely to notice when looking at modern JavaScript. You can check a complete list with examples on the <a href="https://babeljs.io/learn-es2015/" target="_blank">Learn ES2015</a> page on the <a href="https://babeljs.io/" target="_blank">Babel site</a>, which you might find useful to get up to date with the language. Some of those features include template strings, block-scoped variables and constants, iterators, generators, new data structures such as Map and Set, and more.</p>



<h3 id="codelinting">Code linting</h3>

<p>Linters are tools that parse your code and compare it against a set of rules, checking for syntax errors, formatting, and good practices. Although the use of a linter is recommended to everyone, itâ€™s especially useful if youâ€™re getting started. When configured correctly for your code editor/IDE, you can get instant feedback to ensure you donâ€™t get stuck with syntax errors as youâ€™re learning new language features.</p>

<p>You can <a href="https://www.sitepoint.com/up-and-running-with-eslint-the-pluggable-javascript-linter/" target="_blank">check out ESLint</a>, which is one of the most popular and supports ES2015+.</p>

<h2 id="modularcode">Modular Code</h2>

<p>Modern web applications can have thousands (even hundred of thousands) of lines of code. Working at that size becomes almost impossible without a mechanism to organize everything in smaller components, writing specialized and isolated pieces of code that can be reused as necessary in a controlled way.  This is the job of modules.</p>

<h3 id="commonjsmodules">CommonJS modules</h3>

<p>A handful of module formats have emerged over the years, the most popular of which is <a href="https://en.wikipedia.org/wiki/CommonJS" target="_blank">CommonJS</a>. Itâ€™s the default module format in Node.js, and can be used in client-side code with the help of module bundlers, which weâ€™ll talk about shortly.</p>

<p>It makes use of a <code>module</code> object to export functionality from a JavaScript file and a <code>require()</code> function to import that functionality where you need it.</p>

<pre class="language-javascript"><code class="javascript  language-javascript"><span class="token comment">// lib/math.js</span>
<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> pi <span class="token operator">=</span> <span class="token number">3.141593</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  sum<span class="token punctuation">:</span> sum<span class="token punctuation">,</span>
  pi<span class="token punctuation">:</span> pi
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">// app.js</span>
<span class="token keyword">const</span> math <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"lib/math"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"2Ï€ = "</span> <span class="token operator">+</span> math<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>pi<span class="token punctuation">,</span> math<span class="token punctuation">.</span>pi<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<h3 id="es2015modules">ES2015 modules</h3>

<p>ES2015 introduces a way to define and consume components right into the language, which was previously possible only with third-party libraries. You can have separate files with the functionality you want, and export just certain parts to make them available to your application.</p>

<div class="box note">
    <h4>Native Browser Support</h4>
    <div class="body">
      <p>At the time of writing, native browser support for ES2015 modules is still under development, so you currently need some additional tools to be able to use them.</p>
    </div>
  </div>



<p>Hereâ€™s an example:</p>

<pre class="language-javascript"><code class="javascript  language-javascript"><span class="token comment">// lib/math.js</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> pi <span class="token operator">=</span> <span class="token number">3.141593</span><span class="token punctuation">;</span>
</code></pre>

<p>Here we have a module that <em>exports</em> a function and a variable. We can include that file in another one and use those exported functions:</p>

<pre class="language-javascript"><code class="javascript  language-javascript"><span class="token comment">// app.js</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> math <span class="token keyword">from</span> <span class="token string">"lib/math"</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"2Ï€ = "</span> <span class="token operator">+</span> math<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>pi<span class="token punctuation">,</span> math<span class="token punctuation">.</span>pi<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>Or we can also be specific and import only what we need:</p>

<pre class="language-javascript"><code class="javascript  language-javascript"><span class="token comment">// otherApp.js</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span>sum<span class="token punctuation">,</span> pi<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"lib/math"</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"2Ï€ = "</span> <span class="token operator">+</span> <span class="token function">sum</span><span class="token punctuation">(</span>pi<span class="token punctuation">,</span> pi<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>These examples have been extracted from the <a href="https://babeljs.io/learn-es2015" target="_blank">Babel website</a>. For an in-depth look, check out <a href="https://www.sitepoint.com/understanding-es6-modules/" target="_blank">Understanding ES6 Modules</a>.</p>

<h2 id="packagemanagement">Package Management</h2>

<p>Other languages have long had their own package repositories and managers to make it easier to find and install third-party libraries and components. Node.js comes with its own package manager and repository, <a href="https://www.sitepoint.com/beginners-guide-node-package-manager/" target="_blank">npm</a>. Although there are other package managers available, npm has become the de facto JavaScript package manager and is said to be the largest package registry in the world.</p>

<p>In the <a href="https://www.npmjs.com/" target="_blank">npm repository</a> you can find third-party modules that you can easily download and use in your projects with a single <code>npm install &lt;package&gt;</code> command. The packages are downloaded into a local <code>node_modules</code> directory, which contains all the packages and their dependencies.</p>

<p>The packages that you download can be registered as dependencies of your project in a <a href="https://docs.npmjs.com/files/package.json" target="_blank">package.json</a> file, along with information about your project or module (which can itself be published as a package on npm).</p>

<p>You can define separate dependencies for both development and production. While the production dependencies are needed for the package to work, the development dependencies are only necessary for the developers of the package.</p>

<p><strong>Example package.json file</strong></p>

<pre class="language-javascript"><code class="javascript  language-javascript"><span class="token punctuation">{</span>
  <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"demo"</span><span class="token punctuation">,</span>
  <span class="token string">"version"</span><span class="token punctuation">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token string">"description"</span><span class="token punctuation">:</span> <span class="token string">"Demo package.json"</span><span class="token punctuation">,</span>
  <span class="token string">"main"</span><span class="token punctuation">:</span> <span class="token string">"main.js"</span><span class="token punctuation">,</span>
  <span class="token string">"dependencies"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"mkdirp"</span><span class="token punctuation">:</span> <span class="token string">"^0.5.1"</span><span class="token punctuation">,</span>
    <span class="token string">"underscore"</span><span class="token punctuation">:</span> <span class="token string">"^1.8.3"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"devDependencies"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"scripts"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"test"</span><span class="token punctuation">:</span> <span class="token string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"author"</span><span class="token punctuation">:</span> <span class="token string">"Sitepoint"</span><span class="token punctuation">,</span>
  <span class="token string">"license"</span><span class="token punctuation">:</span> <span class="token string">"ISC"</span>
<span class="token punctuation">}</span>
</code></pre>

<h2 id="buildtools">Build Tools</h2>

<p>The code that we write when developing modern JavaScript web applications almost never is the same code that will go to production. We write code in a modern version of JavaScript that may not be supported by the browser, we make heavy use of third-party packages that are in a <code>node_modules</code> folder along with their own dependencies, we can have processes like static analysis tools or minifiers, etc. Build tooling exists to help transform all this into something that can be deployed efficiently and thatâ€™s understood by most web browsers.</p>

<h3 id="modulebundling">Module bundling</h3>

<p>When writing clean, reusable code with ES2015/CommonJS modules, we need some way to load these modules (at least until browsers support ES2015 module loading natively). Including a bunch of script tags in your HTML isnâ€™t really a viable option, as it would quickly become unwieldy for any serious application, and all those separate HTTP requests would hurt performance.</p>

<p>We can include all the modules where we need them using the <code>import</code> statement from ES2015 (or <code>require</code>, for CommonJS) and use a module bundler to combine everything together into one or more files (bundles). Itâ€™s this bundled file that weâ€™re going to upload to our server and include in our HTML. It will include all your imported modules and their necessary dependencies.</p>

<p>There are currently a couple of popular options for this, the most popular ones being <a href="http://webpack.js.org/" target="_blank">Webpack</a>, <a href="http://browserify.org/" target="_blank">Browserify</a> and <a href="http://rollupjs.org/" target="_blank">Rollup.js</a>. You can choose one or another depending on your needs.</p>


<div class="box note">
    <h4>Further Reading on Module Bundling</h4>
    <div class="body">
      <p>If you want to learn more about module bundling and how it fits into the bigger picture of app development, I recommend reading <a href="https://www.sitepoint.com/javascript-modules-bundling-transpiling/" target="_blank">Understanding JavaScript Modules: Bundling &amp; Transpiling</a>.</p>
    </div>
  </div>



<h3 id="transpilation">Transpilation</h3>

<p>While <a href="http://kangax.github.io/compat-table/es6/" target="_blank">support for modern JavaScript is pretty good among newer browsers</a>, your target audience may include legacy browsers and devices with partial or no support.</p>

<p>In order to make our modern JavaScript work, we need to translate the code we write to its equivalent in an earlier version (usually ES5). The standard tool for this task is <a href="https://babeljs.io/" target="_blank">Babel</a> â€” a compiler that translates your code into compatible code for most browsers. In this way, you donâ€™t have to wait for vendors to implement everything; you can just use all the modern JS features.</p>

<p>There are a couple of features that need more than a syntax translation. Babel includes a <a href="http://babeljs.io/docs/usage/polyfill/" target="_blank">Polyfill</a> that emulates some of the machinery required for some complex features such as promises.</p>

<h3 id="buildsystemstaskrunners">Build systems &amp; task runners</h3>

<p>Module bundling and transpilation are just two of the build processes that we may need in our projects. Others include code minification (to reduce file sizes), tools for analysis, and perhaps tasks that donâ€™t have anything to do with JavaScript, like image optimization or CSS/HTML pre-processing.</p>

<p>The management of tasks can become a laborious thing to do, and we need a way to handle it in an automated way, being able to execute everything with simpler commands. The two most popular tools for this are <a href="http://gruntjs.com/" target="_blank">Grunt.js</a> and <a href="http://gulpjs.com/" target="_blank">Gulp.js</a>, which provide a way to organize your tasks into groups in an ordered way.</p>

<p>For example, you can have a command like <code>gulp build</code> which may run a code linter, the transpilation process with Babel, and module bundling with Browserify. Instead of having to remember three commands and their associated arguments in order, we just execute one that will handle the whole process automatically.</p>

<p>Wherever you find yourself manually organizing processing steps for your project, think if it can be automatized with a task runner.</p>



<div class="box note">
    <h4>Further Reading on Gulp.js</h4>
    <div class="body">
      <p>Further reading: <a href="https://www.sitepoint.com/introduction-gulp-js/" target="_blank">An Introduction to Gulp.js</a>.</p>
    </div>
  </div>



<h2 id="applicationarchitecture">Application Architecture</h2>

<p>Web applications have different requirements from websites. For example, while page reloads may be acceptable for a blog, thatâ€™s certainly not the case for an application like Google Docs. Your application should behave as closely as possible to a desktop one. Otherwise, the usability will be compromised.</p>

<p>Old-style web applications were usually done by sending multiple pages from a web server, and when a lot of dynamism was needed, content was loaded via Ajax by replacing chunks of HTML according to user actions. Although it was a big step forward to a more dynamic web, it certainly had its complications. Sending HTML fragments or even whole pages on each user action represented a waste of resources â€” especially of time, from the userâ€™s perspective. The usability still didnâ€™t match the responsiveness of desktop applications.</p>

<p>Looking to improve things, we created two new methods to build web applications â€” from the way we present them to the user, to the way we communicate between the client and the server. Although the amount of JavaScript required for an application also increased drastically, the result is now applications that behave very closely to native ones, without page reloading or extensive waiting periods each time we click a button.</p>

<h3 id="singlepageapplicationsspas">Single Page Applications (SPAs)</h3>

<p>The most common, high-level architecture for web applications is called <a href="https://en.wikipedia.org/wiki/Single-page_application" target="_blank">SPA</a>, which stands for <em>Single Page Application</em>. SPAs are big blobs of JavaScript that contain everything the application needs to work properly. The UI is rendered entirely client-side, so no reloading is required. The only thing that changes is the data inside the application, which is usually handled with a remote API via <a href="https://en.wikipedia.org/wiki/Ajax_(programming)" target="_blank">Ajax</a> or another asynchronous method of communication.</p>

<p>One downside to this approach is that the application takes longer to load for the first time. Once it has been loaded, however, transitions between views (pages) are generally a lot quicker, since itâ€™s only pure data being sent between client and server.</p>

<h3 id="universalisomorphicapplications">Universal / Isomorphic Applications</h3>

<p>Although SPAs provide a great user experience, depending on your needs, they might not be the optimal solution â€” especially if you need quicker initial response times or optimal indexing by search engines.</p>

<p>Thereâ€™s a fairly recent approach to solving these problems, called <a href="http://isomorphic.net/javascript" target="_blank">Isomorphic</a> (or Universal) JavaScript applications. In this type of architecture, most of the code can be executed both on the server and the client. You can choose what you want to render on the server for a faster initial page load, and after that, the client takes over the rendering while the user is interacting with the app. Because pages are initially rendered on the server, search engines can index them properly.</p>

<h2 id="deployment">Deployment</h2>

<p>With modern JavaScript applications, the code you write is not the same as the code that you deploy for production: you only deploy the result of your build process. The workflow to accomplish this can vary depending on the size of your project, the number of developers working on it, and sometimes the tools/libraries  youâ€™re using.</p>

<p>For example, if youâ€™re working alone on a simple project, each time youâ€™re ready for deployment you can just run the build process and upload the resulting files to a web server. Keep in mind that you only need to upload the resulting files from the build process (transpilation, module bundling, minification, etc.), which can be just one <code>.js</code> file containing your entire application and dependencies.</p>

<p>You can have a directory structure like this:</p>

<pre class="language-bash"><code class="bash  language-bash">â”œâ”€â”€ dist
â”‚   â”œâ”€â”€ app.js
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ node_modules
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ lib
â”‚   â”‚   â”œâ”€â”€ login.js
â”‚   â”‚   â””â”€â”€ user.js
â”‚   â”œâ”€â”€ app.js
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ gulpfile.js
â”œâ”€â”€ package.json
â””â”€â”€ README
</code></pre>

<p>You thus have all of your application files in a <code>src</code> directory, written in ES2015+, importing packages installed with npm and your own modules from a <code>lib</code> directory.</p>

<p>Then you can run Gulp, which will execute the instructions from a <code>gulpfile.js</code> to build your project â€” bundling all modules into one file (including the ones installed with npm), transpiling ES2015+ to ES5, minifying the resulted file, etc. Then you can configure it to output the result in a convenient <code>dist</code> directory.</p>

<div class="box note">
    <h4>Files That Don't Need Processing</h4>
    <div class="body">
      <p>If you have files that donâ€™t need any processing, you can just copy them from <code>src</code> to the <code>dist</code> directory. You can configure a task for that in your build system.</p>
    </div>
  </div>



<p>Now you can just upload the files from the <code>dist</code> directory to a web server, without having to worry about the rest of the files, which are only useful for development.</p>

<h3 id="teamdevelopment">Team development</h3>

<p>If youâ€™re working with other developers, itâ€™s likely youâ€™re also using a shared code repository, like GitHub, to store the project. In this case, you can run the build process right before making commits and store the result with the other files in the Git repository, to later be downloaded onto a production server.</p>

<p>However, storing built files in the repository is prone to errors if several developers are working together, and you might want to keep everything clean from build artifacts. Fortunately, thereâ€™s a better way to deal with that problem: you can put a service like <a href="http://jenkins.io/" target="_blank">Jenkins</a>, <a href="http://travis-ci.org/" target="_blank">Travis CI</a>, <a href="http://circleci.com/" target="_blank">CircleCI</a>, etc. in the middle of the process, so it can automatically build your project after each commit is pushed to the repository. Developers only have to worry about pushing code changes without building the project first each time. The repository is also kept clean of automatically generated files, and at the end, you still have the built files available for deployment.</p>

<h2 id="conclusion-1">Conclusion</h2>

<p>The transition from simple web pages to modern JavaScript applications can seem daunting if youâ€™ve been away from web development in recent years, but I hope this article was useful as a starting point. Iâ€™ve linked to more in-depth articles on each topic where possible so you can explore further.</p>

<p>And remember that if at some point, after looking all the options available, everything seems overwhelming and messy, just keep in mind the <a href="https://en.wikipedia.org/wiki/KISS_principle" target="_blank">KISS principle</a>, and use only what you think you need and not everything you have available. At the end of the day, solving problems is what matters, not using the latest of everything.</p>

<div class="next-chapter-wrapper"><a class="next-chapter-button" data-next-chapter="2" target="_blank" data-href="#cleancode"><span>NEXT :</span>Clean Code
    with ES6 Default Parameters &amp; Property Shorthands<i class="fas fa-chevron-right"></i></a>
</div>
<div class="chapter-end"></div>
</div>


<!--new chapter -->
<div class="chapter hide" data-chapter-number="2">
  <div class="chapter-start">
    <div class="ch-head">Chapter <span class="chapter-number"> 2</span></div>
    <h1 class="chaptertitle" id="cleancode">Clean Code with ES6 Default Parameters &amp; Property Shorthands</h1>
    <h3 class="author">Moritz KrÃ¶ger</h3>
  </div>
<p><strong>Creating a method also means writing an API â€” whether itâ€™s for yourself, another developer on your team, or other developers using your project. Depending on the size, complexity, and purpose of your function, you have to think of default settings and the API of your input/output.</strong></p>

<p><a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/Default_parameters" target="_blank">Default function  parameters</a> and <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Object_initializer#New_notations_in_ECMAScript_2015" target="_blank">property shorthands</a> are two handy features of ES6 that can help you write your API.</p>

<h2 id="defaultparameters">ES6 Default Parameters</h2>

<p>Letâ€™s freshen up our knowledge quickly and take a look at the syntax again. Default parameters allow us to initialize functions with default values. A default is used when an argument is either omitted or <code>undefined</code> â€” meaning <code>null</code> is a valid value. A default parameter can be anything from a number to another function.</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token comment">// Basic syntax</span>
<span class="token keyword">function</span> <span class="token function">multiply</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>

<span class="token comment">// Default parameters are also available to later default parameters</span>
<span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span>num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> multi <span class="token operator">=</span> <span class="token function">multiply</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>num<span class="token punctuation">,</span> multi<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2]</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [6, 12]</span>
</code></pre>

<h3 id="arealworldexample">A real-world example</h3>

<p>Letâ€™s take a basic function and demonstrate how default parameters can speed up your development and make the code better organized.</p>

<p>Our example method is called <code>createElement()</code>. It takes a few configuration arguments, and returns an HTML element. The API looks like this:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token comment">// We want a &lt;p&gt; element, with some text content and two classes attached.</span>
<span class="token comment">// Returns &lt;p class="very-special-text super-big"&gt;Such unique text&lt;/p&gt;</span>
<span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  content<span class="token punctuation">:</span> <span class="token string">'Such unique text'</span><span class="token punctuation">,</span>
  classNames<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'very-special-text'</span><span class="token punctuation">,</span> <span class="token string">'super-big'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// To make this method even more useful, it should always return a default</span>
<span class="token comment">// element when any argument is left out or none are passed at all.</span>
<span class="token function">createElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;div class="module-text default"&gt;Very default&lt;/div&gt;</span>
</code></pre>

<p>The implementation of this wonâ€™t have much logic, but can become quite large due to itâ€™s default coverage.</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token comment">// Without default parameters it looks quite bloated and unnecessary large.</span>
<span class="token keyword">function</span> <span class="token function">createElement</span> <span class="token punctuation">(</span>tag<span class="token punctuation">,</span> config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  tag <span class="token operator">=</span> tag <span class="token operator">||</span> <span class="token string">'div'</span><span class="token punctuation">;</span>
  config <span class="token operator">=</span> config <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> content <span class="token operator">=</span> config<span class="token punctuation">.</span>content <span class="token operator">||</span> <span class="token string">'Very default'</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> text <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> classNames <span class="token operator">=</span> config<span class="token punctuation">.</span>classNames<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>classNames <span class="token operator">===</span> undefined<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    classNames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'module-text'</span><span class="token punctuation">,</span> <span class="token string">'default'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">...</span>classNames<span class="token punctuation">)</span><span class="token punctuation">;</span>
  element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>

<p>So far, so good. Whatâ€™s happening here? Weâ€™re doing the following:</p>

<ol>
<li>setting default values for both our parameters <code>tag</code> and <code>config</code>, in case they arenâ€™t passed <em>(note that some linters <a href="http://eslint.org/docs/rules/no-param-reassign" target="_blank">donâ€™t like parameter reassigning</a>)</em> </li>

<li>creating constants with the actual content (and default values)</li>

<li>checking if <code>classNames</code> is defined, and assigning a default array if not</li>

<li>creating and modifying the element before we return it.</li>
</ol>

<p>Now letâ€™s take this function and optimize it to be cleaner, faster to write, and so that itâ€™s more obvious what its purpose is:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token comment">// Default all the things</span>
<span class="token keyword">function</span> <span class="token function">createElement</span> <span class="token punctuation">(</span>tag <span class="token operator">=</span> <span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  content <span class="token operator">=</span> <span class="token string">'Very default'</span><span class="token punctuation">,</span>
  classNames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'module-text'</span><span class="token punctuation">,</span> <span class="token string">'special'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> text <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>

  element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">...</span>classNames<span class="token punctuation">)</span><span class="token punctuation">;</span>
  element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>

<p>We didnâ€™t touch the functionâ€™s logic, but removed all default handling from the function body. The <a href="https://developer.mozilla.org/en-US/docs/Glossary/Signature/Function" target="_blank">function signature</a> now contains all  defaults. </p>

<p>Let me further explain one part, which might be slightly confusing:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token comment">// What exactly happens here?</span>
<span class="token keyword">function</span> <span class="token function">createElement</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  content <span class="token operator">=</span> <span class="token string">'Very default'</span><span class="token punctuation">,</span>
  classNames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'module-text'</span><span class="token punctuation">,</span> <span class="token string">'special'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// function body</span>
<span class="token punctuation">}</span>
</code></pre>

<p>We not only declare a default <code>object</code> parameter, but also default object <em>properties</em>. This makes it more obvious what the default configuration is supposed to look like, rather than only declaring a default object (e.g. <code>config = {}</code>) and later setting default properties. It might take some additional time to get used to it, but in the end it improves your workflow. </p>

<p>Of course, we could still argue with larger configurations that it might create more overhead and itâ€™d be simpler to just keep the default handling inside of the function body.</p>

<h2 id="propertyshorthands">ES6 Property Shorthands</h2>

<p>If a method accepts large configuration objects as an argument, your code can become quite large. Itâ€™s common to prepare some variables and add them to said object. Property shorthands are <em><a href="https://en.wikipedia.org/wiki/Syntactic_sugar" target="_blank">syntactic sugar</a></em> to make this step shorter and more readable:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token string">'foo'</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token function-variable function">c</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Previously we would use these constants like this.</span>
<span class="token keyword">const</span> alphabet <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">:</span> a<span class="token punctuation">,</span>
  b<span class="token punctuation">:</span> b<span class="token punctuation">,</span>
  c<span class="token punctuation">:</span> c
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// But with the new shorthand we can actually do this now,</span>
<span class="token comment">// which is equivalent to the above.</span>
<span class="token keyword">const</span> alphabet <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>

<h3 id="shortenyourapi">Shorten Your API</h3>

<p>Okay, back to another, more common example. The following function takes some data, mutates it and calls another method:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">function</span> <span class="token function">updateSomething</span> <span class="token punctuation">(</span>data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> target <span class="token operator">=</span> data<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
  <span class="token keyword">const</span> veryLongProperty <span class="token operator">=</span> data<span class="token punctuation">.</span>veryLongProperty<span class="token punctuation">;</span>
  <span class="token keyword">let</span> willChange <span class="token operator">=</span> data<span class="token punctuation">.</span>willChange<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>willChange <span class="token operator">===</span> <span class="token string">'unwantedValue'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    willChange <span class="token operator">=</span> <span class="token string">'wayBetter'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Do more.</span>

  <span class="token function">useDataSomewhereElse</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    target<span class="token punctuation">:</span> target<span class="token punctuation">,</span>
    property<span class="token punctuation">:</span> veryLongProperty<span class="token punctuation">,</span>
    willChange<span class="token punctuation">:</span> willChange<span class="token punctuation">,</span>
    <span class="token comment">// .. more</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>

<p>It often happens that we name variables and object property names the same. Using the property shorthand, combined with <a href="https://www.sitepoint.com/preparing-ecmascript-6-destructuring-assignment/" target="_blank">destructuring</a>, we actually can shorten our code quite a bit:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">function</span> <span class="token function">updateSomething</span> <span class="token punctuation">(</span>data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Here we use destructuring to store the constants from the data object.</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> target<span class="token punctuation">,</span> veryLongProperty<span class="token punctuation">:</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> willChange <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>willChange <span class="token operator">===</span> <span class="token string">'unwantedValue'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    willChange <span class="token operator">=</span> <span class="token string">'wayBetter'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Do more.</span>

  <span class="token function">useDataSomewhereElse</span><span class="token punctuation">(</span><span class="token punctuation">{</span> target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> willChange <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>

<p>Again, this might take a while to get used to. In the end, itâ€™s one of those new features in JavaScript which helped me write code faster and work with cleaner function bodies.</p>

<p>But wait, thereâ€™s more! Property shorthands can also be applied to method definitions inside an object:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token comment">// Instead of writing the function keyword everytime,</span>
<span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token punctuation">{</span>
  foo<span class="token punctuation">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  bar<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// we can just omit it and have shorter declarations</span>
<span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token punctuation">{</span>
  foo<span class="token punctuation">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  <span class="token function">bar</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>

<h2 id="conclusion-2">Conclusion</h2>

<p>Default parameters and property shorthands are a great way to make your methods more organized, and in some cases even shorter. Overall, default function parameters helped me to focus more on the actual purpose of the method without the distraction of lots of default preparations and if statements.</p>

<p>Property shorthands are indeed more of a cosmetic feature, but I found myself being more productive and spending less time writing all the variables, configuration objects, and function keywords.</p>


<div class="next-chapter-wrapper"><a class="next-chapter-button" data-next-chapter="3" target="_blank" data-href="#arraymethods"><span>NEXT :</span>JavaScript
    Performance Optimization Tips: An Overview<i class="fas fa-chevron-right"></i></a>
</div>
<div class="chapter-end"></div>
</div>

<!--new chapter-->
<div class="chapter hide" data-chapter-number="3">
  <div class="chapter-start">
    <div class="ch-head">Chapter <span class="chapter-number"> 3</span></div>
    <h1 class="chaptertitle" id="arraymethods">JavaScript Performance Optimization Tips: An Overview</h1>
    <h3 class="author">Ivan ÄŒuriÄ‡ </h3>
  </div>
<p><strong>In this post, thereâ€™s lots of stuff to cover across a wide and wildly changing landscape. Itâ€™s also a topic that covers everyoneâ€™s favorite: The JS Framework of the Monthâ„¢.</strong></p>

<p>Weâ€™ll try to stick to the "Tools, not rules" mantra and keep the JS buzzwords to a minimum. Since we wonâ€™t be able to cover everything related to JS performance in a 2000 word article, make sure you read the references and do your own research afterwards.</p>

<p>But before we dive into specifics, letâ€™s get a broader understanding of the issue by answering the following: what is considered as performant JavaScript, and how does it fit into the broader scope of web performance metrics?</p>

<h2 id="settingthestage">Setting the Stage</h2>

<p>First of all, letâ€™s get the following out of the way: if youâ€™re testing exclusively on your desktop device, youâ€™re excluding <a href="http://gs.statcounter.com/platform-market-share/desktop-mobile-tablet" target="_blank">more than 50%</a> of your users.</p>

<p class="image-wrapper"><img src="./SitePoint Premium_files/1511316210mobile-vs-desktop.png" alt="The number of mobile users overtook the number of desktop users in November 2016"></p>

<p>This trend will only continue to grow, as the emerging marketâ€™s preferred gateway to the web is a sub-$100 Android device. The era of the desktop as the main device to access the Internet is over, and the next billion internet users will visit your sites primarily through a mobile device.</p>

<p>Testing in Chrome DevToolsâ€™ device mode isnâ€™t a valid substitute to testing on a real device. Using CPU and network throttling helps, but itâ€™s a fundamentally different beast. Test on real devices.</p>

<p>Even if you <em>are</em> testing on real mobile devices, youâ€™re probably doing so on your brand spanking new $600 flagship phone. The thing is, thatâ€™s not the device your users have. The median device is something along the lines of a Moto G1 --- a device with under 1GB of RAM, and a very weak CPU and GPU.</p>

<p>Letâ€™s see how it stacks up when <a href="https://docs.google.com/spreadsheets/d/1wHcNNQea28LhwQ_amFamT33d5woVrJfJy53Z1k6V090/edit?usp=sharing" target="_blank">parsing an average JS bundle</a>.</p>


<div style="margin-bottom: 1.5em;">
<p class="image-wrapper"><img style="margin-bottom: 0.5em;" src="./SitePoint Premium_files/1511316294js-chart-1024x633.png" alt="-"> </p>
  <p style="font-size: 0.8em; text-align:center; margin: 0;">Addy Osmani: <a href="https://docs.google.com/spreadsheets/d/1wHcNNQea28LhwQ_amFamT33d5woVrJfJy53Z1k6V090/edit?usp=sheets_home&amp;ths=true" target="_blank">Time spent in JS parse &amp; eval for average JS</a>.</p>
</div>


<p>Ouch. While this image only covers the parse and compile time of the JS (more on that later) and not general performance, itâ€™s strongly correlated and can be treated as an indicator of general JS performance.</p>

<p>To quote Bruce Lawson, â€œ<a href="https://vimeo.com/194968584" target="_blank">itâ€™s the World-Wide Web, not the Wealthy Western Web</a>â€. So, your target for web performance is a device thatâ€™s <strong>~25x slower</strong> than your MacBook or iPhone. Let that sink in for a bit. But it gets worse. Letâ€™s see what weâ€™re actually aiming for.</p>

<h2 id="whatexactlyisperformantjscode">What Exactly is Performant JS Code?</h2>

<p>Now that we know what our target platform is, we can answer the next question: what <em>is</em> performant JS code?</p>

<p>While thereâ€™s no absolute classification of what defines performant code, we do have a user-centric performance model we can use as a reference: <a href="https://developers.google.com/web/fundamentals/performance/rail" target="_blank">The RAIL model</a>.</p>


<div style="margin-bottom: 1.5em;">
<p class="image-wrapper"><img style="margin-bottom: 0.5em;" src="./SitePoint Premium_files/1511316348rail.png" alt="-"> </p>
  <p style="font-size: 0.8em; text-align:center; margin: 0;">Sam Saccone: <a href="https://www.youtube.com/watch?v=RWLzUnESylc" target="_blank">Planning for Performance: PRPL</a></p>
</div>


<h3 id="respond">Respond</h3>

<p>If your app responds to a user action in under 100ms, the user perceives the response as immediate. This applies to tappable elements, but not when scrolling or dragging.</p>

<h3 id="animate">Animate</h3>

<p>On a 60Hz monitor, we want to target a constant 60 frames per second when animating and scrolling. That results in around 16ms per frame. Out of that 16ms budget, you realistically have 8â€“10ms to do all the work, the rest taken up by the browser internals and other variances.</p>

<h3 id="idlework">Idle work</h3>

<p>If you have an expensive, continuously running task, make sure to slice it into smaller chunks to allow the main thread to react to user inputs. You shouldnâ€™t have a task that delays user input for more than 50ms.</p>

<h3 id="load">Load</h3>

<p>You should target a page load in under 1000ms. Anything over, and your users start getting twitchy. This is a pretty difficult goal to reach on mobile devices as it relates to the page being interactive, not just having it painted on screen and scrollable. In practice, itâ€™s even less:</p>


<div style="margin-bottom: 1.5em;">
<p class="image-wrapper"> <img style="margin-bottom: 0.5em;" src="./SitePoint Premium_files/15113164081000ms.png" alt="-"></p>
  <p style="font-size: 0.8em; text-align:center; margin: 0;"><a href="https://www.youtube.com/watch?v=_srJ7eHS3IM" target="_blank">Fast By Default: Modern Loading Best Practices (Chrome Dev Summit 2017)</a></p>
</div>


<p>In practice, aim for the 5s time-to-interactive mark. Itâ€™s what Chrome uses in their <a href="https://developers.google.com/web/tools/lighthouse/audits/time-to-interactive" target="_blank">Lighthouse audit</a>.</p>

<p>Now that we know the metrics, <a href="https://storage.googleapis.com/doubleclick-prod/documents/The_Need_for_Mobile_Speed_-_FINAL.pdf" target="_blank">letâ€™s have a look at some of the statistics</a>:</p>

<ul>
<li>53% of visits are abandoned if a mobile site takes more than three seconds to load</li>

<li>1 out of 2 people expect a page to load in less than 2 seconds</li>

<li>77% of mobile sites take longer than 10 seconds to load on 3G networks</li>

<li>19 seconds is the average load time for mobile sites on 3G networks.</li>
</ul>

<p><a href="https://medium.com/reloading/javascript-start-up-performance-69200f43b201" target="_blank">And a bit more, courtesy of Addy Osmani</a>:</p>

<ul>
<li>apps became interactive in 8 seconds on desktop (using cable) and 16 seconds on mobile (Moto G4 over 3G)</li>

<li>at the median, developers shipped 410KB of gzipped JS for their pages.</li>
</ul>

<p>Feeling sufficiently frustrated? Good. Letâ€™s get to work and fix the web. âœŠ</p>

<h2 id="contextiseverything">Context is Everything</h2>

<p>You might have noticed that the main bottleneck is the time it takes to load up your website. Specifically, the JavaScript download, parse, compile and execution time. Thereâ€™s no way around it but to load less JavaScript and load smarter.</p>

<p>But what about the actual work that your code does aside from just booting up the website? There has to be some performance gains there, right?</p>

<p>Before you dive into optimizing your code, consider what youâ€™re building. Are you building a framework or a VDOM library? Does your code need to do thousands of operations per second? Are you doing a time-critical library for handling user input and/or animations? If not, you may want to shift your time and energy somewhere more impactful.</p>

<p>Itâ€™s not that writing performant code doesnâ€™t matter, but it usually makes little to no impact in the grand scheme of things, especially when talking about microoptimizations. So, before you get into a Stack Overflow argument about <code>.map</code> vs <code>.forEach</code> vs <code>for</code> loops by comparing results from JSperf.com, make sure to see the forest and not just the trees. 50k ops/s might sound 50Ã— better than 1k ops/s on paper, but it wonâ€™t make a difference in most cases.</p>

<h2 id="parsingcompilingandexecuting">Parsing, Compiling and Executing</h2>

<p>Fundamentally, the problem of most non-performant JS is not running the code itself, but all the steps that have to be taken <em>before</em> the code even starts executing.</p>

<p>Weâ€™re talking about levels of abstraction here. The CPU in your computer runs machine code. Most of the code youâ€™re running on your computer is in the compiled binary format. (I said <em>code</em> rather than <em>programs</em>, considering all the Electron apps these days.) Meaning, all the OS-level abstractions aside, it runs natively on your hardware, no prep-work needed.</p>

<p>JavaScript is not pre-compiled. It arrives (via a relatively slow network) as readable code in your browser which is, for all intents and purposes, the "OS" for your JS program.</p>

<p>That code first needs to be parsed --- that is, read and turned into an computer-indexable structure that can be used for compiling. It then gets compiled into bytecode and finally machine code, before it can be executed by your device/browser.</p>

<p>Another <em>very</em> important thing to mention is that JavaScript is single-threaded, and runs on the browserâ€™s main thread. This means that only one process can run at a time. If your DevTools performance timeline is filled with yellow peaks, running your CPU at 100%, youâ€™ll have long/dropped frames, janky scrolling and all other kind of nasty stuff.</p>


<div style="margin-bottom: 1.5em;">
<p class="image-wrapper"> <img style="margin-bottom: 0.5em;" src="./SitePoint Premium_files/1511316460long-task.jpg" alt="-"></p> <p style="font-size: 0.8em; text-align:center; margin: 0;">Paul Lewis: <a href="https://aerotwist.com/blog/when-everything-is-important-nothing-is/" target="_blank">When everythingâ€™s important, nothing is!</a>.</p>
</div>


<p>So thereâ€™s all this work that needs to be done before your JS starts working. Parsing and compiling takes up to 50% of the total time of JS execution in Chromeâ€™s V8 engine.</p>


<div style="margin-bottom: 1.5em;">
<p class="image-wrapper"> <img style="margin-bottom: 0.5em;" src="./SitePoint Premium_files/1511316514mobile-vs-desktop-parse-1024x249.png" alt="-"></p> <p style="font-size: 0.8em; text-align:center; margin: 0;">Addy Osmani: <a href="https://medium.com/reloading/javascript-start-up-performance-69200f43b201" target="_blank">JavaScript Start-up Performance</a>.</p>
</div>


<p>There are two things you should take away from this section:</p>

<ol>
<li>While not necessarily linearly, JS parse time scales with the bundle size. The less JS you ship, the better.</li>

<li>Every JS framework you use (React, Vue, Angular, Preactâ€¦) is another level of abstraction (unless itâ€™s a precompiled one, like <a href="https://github.com/sveltejs/svelte" target="_blank">Svelte</a>). Not only will it increase your bundle size, but also slow down your code since youâ€™re not talking directly to the browser.</li>
</ol>

<p>There are ways to mitigate this, such as using service workers to do jobs in the background and on another thread, using asm.js to write code thatâ€™s more easily compiled to machine instructions, but thatâ€™s a whole â€™nother topic.</p>

<p>What you can do, however, is avoid using JS animation frameworks for everything and <a href="https://csstriggers.com/" target="_blank">read up on what triggers paints and layouts</a>. Use the libraries only when thereâ€™s absolutely no way to implement the animation using regular CSS transitions and animations.</p>

<p>Even though they may be using CSS transitions, composited properties and <code>requestAnimationFrame()</code>, theyâ€™re still running in JS, on the main thread. Theyâ€™re basically just hammering your DOM with inline styles every 16ms, since thereâ€™s not much else they can do. You need to make sure all your JS will be done executing in under 8ms per frame in order to keep the animations smooth.</p>

<p>CSS animations and transitions, on the other hand, are running off the main thread --- on the GPU, if implemented performantly, without causing relayouts/reflows.</p>

<p>Considering that most animations are running either during loading or user interaction, this can give your web apps the much-needed room to breathe.</p>

<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API" target="_blank">Web Animations API</a> is an upcoming feature set that will allow you to do performant JS animations off the main thread, but for now, stick to CSS transitions and techniques like <a href="https://aerotwist.com/blog/flip-your-animations/" target="_blank">FLIP</a>.</p>

<h2 id="bundlesizesareeverything">Bundle Sizes are Everything</h2>

<p>Today itâ€™s all about bundles. Gone are the times of Bower and dozens of <code>&lt;script&gt;</code> tags before the closing <code>&lt;/body&gt;</code> tag.</p>

<p>Now itâ€™s all about <code>npm install</code>-ing whatever shiny new toy you find on NPM, bundling them together with Webpack in a huge single 1MB JS file and hammering your usersâ€™ browser to a crawl while capping off their data plans.</p>

<p>Try shipping less JS. You might not need <a href="https://surma.github.io/underdash/" target="_blank">the entire Lodash library</a> for your project. Do you absolutely <em>need</em> to use a JS framework? If yes, have you considered using something other than React, such as <a href="https://github.com/developit/preact" target="_blank">Preact</a> or <a href="https://viperhtml.js.org/" target="_blank">HyperHTML</a>, which are less than 1/20 the size of React? Do you need <a href="https://greensock.com/tweenmax" target="_blank">TweenMax</a> for that scroll-to-top animation? The convenience of npm and isolated components in frameworks comes with a downside: the first response of developers to a problem has become to throw more JS at it. When all you have is a hammer, everything looks like a nail.</p>

<p>When youâ€™re done pruning the weeds and shipping less JS, try shipping it <em>smarter</em>. Ship what you need, when you need it.</p>

<p>Webpack 3 has <em>amazing</em> features called <a href="https://webpack.js.org/guides/code-splitting/" target="_blank">code splitting</a> and <a href="https://webpack.js.org/guides/code-splitting/#dynamic-imports" target="_blank">dynamic imports</a>. Instead of bundling all your JS modules into a monolithic <code>app.js</code> bundle, it can automatically split the code using the <code>import()</code> syntax and load it asynchronously.</p>

<p>You donâ€™t need to use frameworks, components and client-side routing to gain the benefit of it, either. Letâ€™s say you have a complex piece of code that powers your <code>.mega-widget</code>, which can be on any number of pages. You can simply write the following in your main JS file:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.mega-widget'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./mega-widget'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>

<p>If your app finds the widget on the page, it will dynamically load the required supporting code. Otherwise, allâ€™s good.</p>

<p>Also, Webpack needs its own runtime to work, and it injects it into all the .js files it generates. If you use the <code>commonChunks</code> plugin, you can use the following to <a href="https://medium.com/connect-the-dots/caching-assets-long-term-with-webpack-5ad24a4c39bd" target="_blank">extract the runtime into its own chunk</a>:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'runtime'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre>

<p>It will strip out the runtime from all your other chunks into its own file, in this case named <code>runtime.js</code>. Just make sure to load it before your main JS bundle. For example:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"runtime.js"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"main-bundle.js"</span><span class="token operator">&gt;</span>
</code></pre>

<p>Then thereâ€™s the topic of transpiled code and polyfills. If youâ€™re writing modern (ES6+) JavaScript, youâ€™re probably using Babel to transpile it into ES5 compatible code. Transpiling not only increases file size due to all the verbosity, but also complexity, and it often has <a href="https://github.com/babel/babel/pull/6748" target="_blank">performance regressions</a> compared to native ES6+ code.</p>

<p>Along with that, youâ€™re probably using the <code>babel-polyfill</code> package and <code>whatwg-fetch</code> to patch up missing features in older browsers. Then, if youâ€™re writing code using <code>async/await</code>, you also transpile it using generators needed to include the <code>regenerator-runtime</code>â€¦</p>

<p>The point is, you add almost 100 kilobytes to your JS bundle, which has not only a huge file size, but also a huge parsing and executing cost, in order to support older browsers.</p>

<p>Thereâ€™s no point in punishing people who are using modern browsers, though. An approach I use, and which Philip Walton covered in <a href="https://philipwalton.com/articles/deploying-es2015-code-in-production-today/" target="_blank">this article</a>, is to create two separate bundles and load them conditionally. Babel makes this easy with <code>babel-preset-env</code>. For instance, you have one bundle for supporting IE 11, and the other without polyfills for the latest versions of modern browsers.</p>

<p>A dirty but efficient way is to place the following in an inline script:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">'async () =&gt; {}'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// create script tag pointing to legacy-bundle.js;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// create script tag pointing to modern-bundle.js;;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>If the browser isnâ€™t able to evaluate an <code>async</code> function, we assume that itâ€™s an old browser and just ship the polyfilled bundle. Otherwise, the user gets the neat and modern variant.</p>

<h2 id="conclusion-3">Conclusion</h2>

<p>What we would like you to gain from this article is that JS is expensive and should be used sparingly.</p>

<p>Make sure you test your websiteâ€™s performance on low-end devices, under real network conditions. Your site should load fast and be interactive as soon as possible. This means shipping less JS, and shipping faster by any means necessary. Your code should always be minified, split into smaller, manageable bundles and loaded asynchronously whenever possible. On the server side, make sure it has HTTP/2 enabled for faster parallel transfers and gzip/Brotli compression to drastically reduce the transfer sizes of your JS.</p>

<div class="next-chapter-wrapper"><a class="next-chapter-button" data-next-chapter="4" target="_blank" data-href="#singleton"><span>NEXT :</span>JavaScript
    Design Patterns: The Singleton<i class="fas fa-chevron-right"></i></a>
</div>
<div class="chapter-end"></div>
</div>

<!--new chapter-->

<div class="chapter hide" data-chapter-number="4">
  <div class="chapter-start">
    <div class="ch-head">Chapter <span class="chapter-number"> 4</span></div>
    <h1 class="chaptertitle" id="singleton">JavaScript Design Patterns: The Singleton</h1>
    <h3 class="author"> Samier Saeed </h3>
  </div>
<p><strong>In this chapter, weâ€™ll dig into the best way to implement a singleton in JavaScript, looking at how this has evolved with the rise of ES6.</strong></p>

<p>Among languages used in widespread production, JavaScript is by far the most quickly evolving, looking less like its earliest iterations and more like Python, with every new spec put forth by ECMA International. While the changes have their fair share of detractors, the new JavaScript does succeed in making code easier to read and reason about, easier to write in a way that adheres to software engineering best practices (particularly the concepts of modularity and SOLID principles), and easier to assemble into canonical software design patterns.</p>

<h2 id="explaininges6">Explaining ES6</h2>

<p>ES6 (aka ES2015) was the first major update to the language since ES5 was standardized in 2009. <a href="https://kangax.github.io/compat-table/es6/" target="_blank">Almost all modern browsers support ES6</a>. However, if you need to accommodate older browsers, ES6 code can easily be transpiled into ES5 using a tool such as Babel. ES6 gives JavaScript a ton of new features, including <a href="https://www.sitepoint.com/object-oriented-javascript-deep-dive-es6-classes/" target="_blank">a superior syntax for classes</a>, and <a href="https://www.sitepoint.com/preparing-ecmascript-6-let-const/" target="_blank">new keywords for variable declarations</a>. You can learn more about it by perusing <a href="https://www.sitepoint.com/JavaScript/es6/" target="_blank">SitePoint articles on the subject</a>.</p>

<h2 id="whatisasingleton">What Is a Singleton</h2>



<p>In case youâ€™re unfamiliar with the <a href="https://en.wikipedia.org/wiki/Singleton_pattern" target="_blank">singleton pattern</a>, it is, at its core, a design pattern that restricts the instantiation of a class to one object. Usually, the goal is to manage global application state. Some examples Iâ€™ve seen or written myself include using a singleton as the source of config settings for a web app, on the client side for anything initiated with an API key (you usually donâ€™t want to risk sending multiple analytics tracking calls, for example), and to store data in memory in a client-side web application (e.g. stores in Flux).</p>

<p>A singleton should be immutable by the consuming code, and there should be no danger of instantiating more than one of them.</p>

<div class="box note">
    <h4>Are Singletons Bad?</h4>
    <div class="body">
      <p>There are scenarios when singletons might be bad, and arguments that they are, in fact, always bad. For that discussion, you can check out <a href="https://www.sitepoint.com/whats-so-bad-about-the-singleton/" target="_blank">this helpful article</a> on the subject.</p>
    </div>
  </div>



<h2 id="theoldwayofcreatingasingletoninjavascript">The Old Way of Creating a Singleton in JavaScript</h2>

<p>The old way of writing a singleton in JavaScript involves leveraging <a href="https://www.sitepoint.com/demystifying-javascript-closures-callbacks-iifes/" target="_blank">closures and immediately invoked function expressions </a>. Hereâ€™s how we might write a (very simple) store for a hypothetical Flux implementation the old way:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">var</span> UserStore <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> _data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">{</span>
    _data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token keyword">get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> _data<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> d<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    add<span class="token punctuation">:</span> add<span class="token punctuation">,</span>
    <span class="token keyword">get</span><span class="token punctuation">:</span> <span class="token keyword">get</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>When that code is interpreted, <code>UserStore</code> will be set to the result of that immediately invoked function â€” an object that exposes two functions, but that does not grant direct access to the collection of data.</p>

<p>However, this code is more verbose than it needs to be, and also doesnâ€™t give us the immutability we desire when making use of singletons. Code executed later could modify either one of the exposed functions, or even redefine <code>UserStore</code> altogether. Moreover, the modifying/offending code could be anywhere! If we got bugs as a result of unexpected modification of <code>UsersStore</code>, tracking them down in a larger project could prove very frustrating.</p>

<p>There are more advanced moves you could pull to mitigate some of these downsides, as specified in <a href="http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html" target="_blank">this article</a> by Ben Cherry. (His goal is to create modules, which just happen to be singletons, but the pattern is the same.) But those add unneeded complexity to the code, while still failing to get us exactly what we want.</p>

<h2 id="thenewways">The New Way(s)</h2>

<p>By leveraging ES6 features, mainly modules and the new <code>const</code> variable declaration, we can write singletons in ways that are not only more concise, but which better meet our requirements.</p>

<p>Letâ€™s start with the most basic implementation. Hereâ€™s (a cleaner and more powerful) modern interpretation of the above example:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">const</span> _data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> UserStore <span class="token operator">=</span> <span class="token punctuation">{</span>
  add<span class="token punctuation">:</span> item <span class="token operator">=&gt;</span> _data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span><span class="token punctuation">:</span> id <span class="token operator">=&gt;</span> _data<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>d <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>UserStore<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> UserStore<span class="token punctuation">;</span>
</code></pre>

<p>As you can see, this way offers an improvement in readability. But where it really shines is in the constraint imposed upon code that consumes our little singleton module here: the consuming code cannot reassign <code>UserStore</code> because of the <code>const</code> keyword. And as a result of our use of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze" target="_blank">Object.freeze</a>, its methods cannot be changed, nor can new methods or properties be added to it. Furthermore, because weâ€™re taking advantage of ES6 modules, we know exactly where <code>UserStore</code> is used.</p>

<p>Now, here weâ€™ve made <code>UserStore</code> an object literal. Most of the time, going with an object literal is the most readable and concise option. However, there are times when you might want to exploit the benefits of going with a traditional class. For example, stores in Flux will all have a lot of the same base functionality. Leveraging traditional object-oriented inheritance is one way to get that repetitive functionality while keeping your code DRY.</p>

<p>Hereâ€™s how the implementation would look if we wanted to utilize ES6 classes:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">UserStore</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_data<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>d <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> instance<span class="token punctuation">;</span>
</code></pre>

<p>This way is slightly more verbose than using an object literal, and our example is so simple that we donâ€™t really see any benefits from using a class (though it will come in handy in the final example).</p>

<p>One benefit to the class route that might not be obvious is that, if this is your front-end code, and your back end is written in C# or Java, you can employ a lot of the same design patterns in your client-side application as you do on the back end, and increase your teamâ€™s efficiency (if youâ€™re small and people are working full-stack). Sounds soft and hard to measure, but Iâ€™ve experienced it firsthand working on a C# application with a React front end, and the benefit is real.</p>

<p>It should be noted that, technically, the immutability and non-overridability of the singleton using both of these patterns can be subverted by the motivated provocateur. An object literal can be copied, even if it itself is <code>const</code>, by using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" target="_blank">Object.assign</a>. And when we export an instance of a class, though we arenâ€™t directly exposing the class itself to the consuming code, the constructor of any instance is available in JavaScript and can be invoked to create new instances. Obviously, though, that all takes at least a little bit of effort, and hopefully your fellow devs arenâ€™t so insistent on violating the singleton pattern.</p>

<p>But letâ€™s say you wanted to be extra sure that nobody messed with the singleness of your singleton, and you also wanted it to match the implementation of singletons in the object-oriented world even more closely. Hereâ€™s something you could do:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">UserStore</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span> UserStore<span class="token punctuation">.</span>instance<span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>_data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
     UserStore<span class="token punctuation">.</span>instance <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">return</span> UserStore<span class="token punctuation">.</span>instance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

 <span class="token comment">//rest is the same code as preceding example</span>

<span class="token punctuation">}</span>

<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> instance<span class="token punctuation">;</span>
</code></pre>

<p>By adding the extra step of holding a reference to the instance, we can check whether or not weâ€™ve already instantiated a <code>UserStore</code>, and if we have, we wonâ€™t create a new one. As you can see, this also makes good use of the fact that weâ€™ve made <code>UserStore</code> a class.</p>

<h2 id="thoughtshatemail">Conclusion</h2>

<p>There are no doubt plenty of developers who have been using the old singleton/module pattern in JavaScript for a number of years, and who find it works quite well for them. Nevertheless, because finding better ways to do things is so central to the ethos of being a developer, hopefully we see cleaner and easier-to-reason-about patterns like this one gaining more and more traction. Especially once it becomes easier and more commonplace to utilize ES6+ features.</p>



<div class="next-chapter-wrapper"><a class="next-chapter-button" data-next-chapter="5" target="_blank" data-href="#numbermethods"><span>NEXT :</span>JavaScript
    Object Creation: Patterns and Best Practices<i class="fas fa-chevron-right"></i></a>
</div>
<div class="chapter-end"></div>
</div>


<!--new chapter-->

<div class="chapter hide" data-chapter-number="5">
  <div class="chapter-start">
    <div class="ch-head">Chapter <span class="chapter-number"> 5</span></div>
    <h1 class="chaptertitle" id="numbermethods">JavaScript Object Creation: Patterns and Best Practices</h1>
    <h3 class="author"> Jeff Mott </h3>
  </div>
<p><strong>In this chapter, Iâ€™m going to take you on a tour of the various styles of JavaScript object creation, and how each builds on the others in incremental steps.</strong></p>

<p>JavaScript has a multitude of styles for creating objects, and newcomers and veterans alike can feel overwhelmed by the choices and unsure which they should use. But despite the variety and how different the syntax for each may look, theyâ€™re more similar than you probably realize.</p>

<h2 id="objectliterals">Object Literals</h2>

<p>The first stop on our tour is the absolute simplest method of JavaScript object creation â€” the object literal. JavaScript touts that objects can be created â€œex niloâ€, out of nothing â€” no class, no template, no prototype â€” just <em>poof!</em>, an object with methods and data:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token punctuation">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  y<span class="token punctuation">:</span> <span class="token number">3.14</span><span class="token punctuation">,</span>
  f<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  g<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>

<p>But thereâ€™s a drawback. If we need to create the same type of object in other places, then weâ€™ll end up copy-pasting the objectâ€™s methods, data, and initialization. We need a way to create not just the one object, but a family of objects.</p>

<h2 id="factoryfunctions">Factory Functions</h2>

<p>The next stop on our JavaScript object creation tour is the factory function. This is the absolute simplest way to create a family of objects that share the same structure, interface, and implementation. Rather than creating an object literal directly, instead we return an object literal from a function. This way, if we need to create the same type of object multiple times or in multiple places, we only need to invoke a function:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">function</span> <span class="token function">thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
    y<span class="token punctuation">:</span> <span class="token number">3.14</span><span class="token punctuation">,</span>
    f<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    g<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token function">thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>But thereâ€™s a drawback. This approach of JavaScript object creation can cause memory bloat, because each object contains its own unique copy of each function. Ideally, we want every object to <em>share</em> just one copy of its functions.</p>

<h2 id="prototypechains">Prototype Chains</h2>

<p>JavaScript gives us a built-in mechanism to share data across objects, called the <strong>prototype chain</strong>. When we access a property on an object, it can fulfill that request by delegating to some other object. We can use that and change our factory function so that each object it creates contains only the data unique to that particular object, and delegate all other property requests to a single, shared object:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">var</span> thingPrototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  f<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  g<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> o <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>thingPrototype<span class="token punctuation">)</span><span class="token punctuation">;</span>

  o<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
  o<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> o<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token function">thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>In fact, this is such a common pattern that the language has built-in support for it. We donâ€™t need to create our own shared object (the prototype object). Instead, a prototype object is created for us automatically alongside every function, and we can put our shared data there:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript">thing<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
thing<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">g</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> o <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>thing<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>

  o<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
  o<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> o<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token function">thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>But thereâ€™s a drawback. This is going to result in some repetition. The first and last lines of the <code>thing</code> function are going to be repeated almost verbatim in every such delegating-to-prototype factory function.</p>

<h2 id="es5classes">ES5 Classes</h2>

<p>We can isolate the repetitive lines by moving them into their own function. This function would create an object that delegates to some other arbitrary functionâ€™s prototype, then invoke that function with the newly created object as an argument, and finally return the object:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> o <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>

  fn<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> o<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ...</span>

Thing<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Thing<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">g</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span>Thing<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>In fact, this too is such a common pattern that the language has some built-in support for it. The <code>create</code> function we defined is actually a rudimentary version of the <code>new</code> keyword, and we can drop-in replace <code>create</code> with <code>new</code>:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript">Thing<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Thing<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">g</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>Weâ€™ve now arrived at what we commonly call â€œES5 classesâ€. Theyâ€™re object creation functions that delegate shared data to a prototype object and rely on the <code>new</code> keyword to handle repetitive logic.</p>

<p>But thereâ€™s a drawback. Itâ€™s verbose and ugly, and implementing inheritance is even more verbose and ugly.</p>

<h2 id="es6classes">ES6 Classes</h2>

<p>A relatively recent addition to JavaScript is ES6 classes, which offer a significantly cleaner syntax for doing the same thing:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">Thing</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<h2 id="comparison">Comparison</h2>

<p>Over the years, we JavaScripters have had an on-and-off relationship with the prototype chain, and today the two most common styles youâ€™re likely to encounter are the class syntax, which relies heavily on the prototype chain, and the factory function syntax, which typically doesnâ€™t rely on the prototype chain at all. The two styles differ â€” but only slightly â€” in performance and features.</p>

<h3 id="performance">Performance</h3>

<p>JavaScript engines are so heavily optimized today that itâ€™s nearly impossible to look at our code and reason about what will be faster. Measurement is crucial. Yet sometimes even measurement can fail us. Typically, an updated JavaScript engine is released every six weeks, sometimes with significant changes in performance, and any measurements we had previously taken, and any decisions we made based on those measurements, go right out the window. So, my rule of thumb has been to favor the most official and most widely used syntax, under the presumption that it will receive the most scrutiny and be the most performant <em>most of the time</em>. Right now, thatâ€™s the class syntax, and as I write this, the class syntax is roughly 3x faster than a factory function returning a literal.</p>

<h3 id="features">Features</h3>

<p>What few feature differences there were between classes and factory functions evaporated with ES6. Today, both factory functions and classes can enforce truly private dataâ€”factory functions with closures and classes with weak maps. Both can achieve multiple-inheritance factory functions by mixing other properties into their own object, and classes also by mixing other properties into their prototype, or with class factories, or with proxies. Both factory functions and classes can return any arbitrary object if need be. And both offer a simple syntax.</p>

<h2 id="conclusion-5">Conclusion</h2>

<p>All things considered, my preference for JavaScript object creation is to use the class syntax. Itâ€™s standard, itâ€™s simple and clean, itâ€™s fast, and it provides every feature that once upon a time only factories could deliver.</p>

<div class="next-chapter-wrapper"><a class="next-chapter-button" data-next-chapter="6" target="_blank" data-href="#modernjsbestpractice"><span>NEXT :</span>Best
    Practices for Using Modern JavaScript Syntax<i class="fas fa-chevron-right"></i></a>
</div>
<div class="chapter-end"></div>
</div>

<!--new chapter-->

<div class="chapter hide" data-chapter-number="6">
  <div class="chapter-start">
    <div class="ch-head">Chapter <span class="chapter-number"> 6</span></div>
    <h1 class="chaptertitle" id="modernjsbestpractice">Best Practices for Using Modern JavaScript Syntax</h1>
    <h3 class="author">M. David Green</h3>
  </div>
<p><strong>Modern JavaScript is evolving quickly to meet the changing needs of new frameworks and environments. Understanding how to take advantage of those changes can save you time, improve your skill set, and mark the difference between good code and great code.</strong></p>

<p>Knowing what modern JavaScript is trying to do can help you decide when to use the new syntax to your best advantage, and when it still makes sense to use traditional techniques.</p>

<h2 id="somethingsolidtoclingto">Something Solid to Cling To</h2>

<p>I donâ€™t know anybody who isnâ€™t confused at the state of JavaScript these days, whether youâ€™re new to JavaScript, or youâ€™ve been coding with it for a while. So many new frameworks, so many changes to the language, and so many contexts to consider. Itâ€™s a wonder that anybody gets any work done, with all of the new things that we have to learn every month.</p>

<p>I believe that the secret to success with any programming language, no matter how complex the application, is getting back to the basics. If you want to understand Rails, start by working on your Ruby skills, and if you want to use <a href="https://www.sitepoint.com/immutable-data-functional-javascript-mori/" target="_blank">immutables</a> and <a href="https://www.sitepoint.com/video-introducing-one-way-data-flow/" target="_blank">unidirectional data flow</a> in <a href="https://www.sitepoint.com/url-parsing-isomorphic-javascript/" target="_blank">isomorphic</a> <a href="https://www.sitepoint.com/universal-react-rendering-sitepoint/" target="_blank">React</a> with <a href="https://www.sitepoint.com/bundle-static-site-webpack/" target="_blank">webpack</a> (or whatever the cool nerds are doing these days) start by knowing your core JavaScript.</p>

<p>Understanding how the language itself works is much more practical than familiarizing yourself with the latest frameworks and environments. Those change faster than the weather. And with JavaScript, we have a long history of thoughtful information online about how JavaScript was created and how to use it effectively.</p>

<p>The problem is that some of the new techniques that have come around with the latest versions of JavaScript make some of the old rules obsolete. But not all of them! Sometimes a new syntax may replace a clunkier one to accomplish the same task. Other times the new approach may seem like a simpler drop-in replacement for the way we used to do things, but there are subtle differences, and itâ€™s important to be aware of what those are.</p>

<h2 id="aspoonfulofsyntacticsugar">A Spoonful of Syntactic Sugar</h2>

<p>A lot of the changes in JavaScript in recent years have been described as syntactic sugar for existing syntax. In many cases, the syntactic sugar can help the medicine go down for Java programmers learning how to work with JavaScript, or for the rest of us we just want a cleaner, simpler way to accomplish something we already knew how to do. Other changes seem to introduce magical new capabilities.</p>

<p>But if you try to use modern syntax to recreate a familiar old technique, or stick it in without understanding how it actually behaves, you run the risk of:</p>

<ul>
<li>having to debug code that worked perfectly before</li>

<li>introducing subtle mistakes that may catch you at runtime</li>

<li>creating code that fails silently when you least expect it.</li>
</ul>

<p>In fact, several of the changes that appear to be drop-in replacements for existing techniques actually behave differently from the code that they supposedly replace. In many cases, it can make more sense to use the original, older style to accomplish what youâ€™re trying to do. Recognizing when thatâ€™s happening, and knowing how to make the choice, is critical to writing effective modern JavaScript.</p>

<h2 id="whenyourconstisntconsistent">When Your <code>const</code> Isnâ€™t Consistent</h2>

<p>Modern JavaScript introduced two new keywords, <code>let</code> and <code>const</code>, which effectively replace the need for <code>var</code> when declaring variables in most cases. But they donâ€™t behave exactly the same way that <code>var</code> does.</p>

<p>In traditional JavaScript, it was always a clean coding practice to declare your variables with the <code>var</code> keyword before using them. Failure to do that meant that the variables you declared could be accessed in the global scope by any scripts that happened to run in the same context. And because traditional JavaScript was frequently run on webpages where multiple scripts might be loaded simultaneously, that meant that it was possible for variables declared in one script to leak into another.</p>

<p>The cleanest drop-in replacement for <code>var</code> in modern JavaScript is <code>let</code>. But <code>let</code> has a few idiosyncrasies that distinguish it from <code>var</code>. Variable declarations with <code>var</code> were always hoisted to the top of their containing <a href="https://toddmotto.com/everything-you-wanted-to-know-about-javascript-scope/" target="_blank">scope</a> by default, regardless of where they were placed inside of that scope. That meant that even a deeply nested variable could be considered declared and available right from the beginning of its containing scope. The same is not true of <code>let</code> or <code>const</code>.</p>

<pre class=" language-javascript"><code class="JavaScript  language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>usingVar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
<span class="token keyword">var</span> usingVar <span class="token operator">=</span> <span class="token string">"defined"</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>usingVar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "defined"</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>usingLet<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error</span>
<span class="token keyword">let</span> usingLet <span class="token operator">=</span> <span class="token string">"defined"</span><span class="token punctuation">;</span> <span class="token comment">// never gets executed</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>usingLet<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// never gets executed</span>
</code></pre>

<p>When you declare a variable using <code>let</code> or <code>const</code>, the scope for that variable is limited to the local block where itâ€™s declared. A block in JavaScript is distinguished by a set of curly braces <code>{}</code>, such as the body of a function or the executable code within a loop.</p>

<p>This is a great convenience for block-scoped uses of variables such as iterators and loops. Previously, variables declared within loops would be available to the containing scope, leading to potential confusion when multiple counters might use the same variable name. However <code>let</code> can catch you by surprise if you expect your variable declared somewhere inside of one block of your script to be available elsewhere.</p>

<pre class=" language-javascript"><code class="JavaScript  language-javascript"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> count <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> count<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">// outputs the numbers 0 - 4 to the console</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>


<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> otherCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> otherCount <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> otherCount<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>otherCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">// outputs the numbers 0 - 4 to the console</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>otherCount<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error, otherCount is undefined</span>
</code></pre>

<p>The other alternative declaration is <code>const</code>, which is supposed to represent a constant. But itâ€™s not completely constant.</p>

<p>A <code>const</code> canâ€™t be declared without a value, unlike a <code>var</code> or <code>let</code> variable.</p>

<pre class=" language-javascript"><code class="JavaScript  language-javascript"><span class="token keyword">var</span> x<span class="token punctuation">;</span> <span class="token comment">// valid</span>
<span class="token keyword">let</span> y<span class="token punctuation">;</span> <span class="token comment">//valid</span>
<span class="token keyword">const</span> z<span class="token punctuation">;</span> <span class="token comment">// error</span>
</code></pre>

<p>A <code>const</code> will also throw an error if you try to set it to a new value after itâ€™s been declared:</p>

<pre class=" language-javascript"><code class="JavaScript  language-javascript"><span class="token keyword">const</span> z <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// valid</span>
z <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// error</span>
</code></pre>

<p>But if you expect your <code>const</code> to be immutable in all cases, you may be in for a surprise when an object or an array declared as a <code>const</code> lets you alter its content.</p>

<pre class=" language-javascript"><code class="JavaScript  language-javascript"><span class="token keyword">const</span> z <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// valid</span>
z<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// valid, and z is now [1]</span>
z <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment">// error</span>
</code></pre>

<p>For this reason, I remain skeptical when people recommend using <code>const</code> constantly in place of <code>var</code> for all variable declarations, even when you have every intention of never altering them after theyâ€™ve been declared.</p>

<p>While itâ€™s a good practice to treat your variables as immutable, JavaScript wonâ€™t enforce that for the contents of a reference variables like arrays and objects declared with <code>const</code> without some help from external scripts. So the <code>const</code> keyword may make casual readers and newcomers to JavaScript expect more protection than it actually provides.</p>

<p>Iâ€™m inclined to use <code>const</code> for simple number or string variables I want to initialize and never alter, or for named functions and classes that I expect to define once and then leave closed for modification. Otherwise, I use <code>let</code> for most variable declarations â€” especially those I want to be bounded by the scope in which they were defined. I havenâ€™t found the need to use <code>var</code> lately, but if I wanted a declaration to break scope and get hoisted to the top of my script, thatâ€™s how I would do it.</p>

<h2 id="limitingthescopeofthefunction">Limiting the Scope of the Function</h2>

<p>Traditional functions, defined using the <code>function</code> keyword, can be called to execute a series of statements defined within a block on any parameters passed in, and optionally return a value:</p>

<pre class=" language-javascript"><code class="JavaScript  language-javascript"><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Did it: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>param<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Did it: Hello"</span>
</code></pre>

<p>They can also be used with the <code>new</code> keyword to construct objects with prototypal inheritance, and that definition can be placed anywhere in the scope where they might be called:</p>

<pre class=" language-javascript"><code class="JavaScript  language-javascript"><span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">"Fluffy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`My cat's name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cat<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "My cat's name is Fluffy."</span>
</code></pre>

<p>Functions used in either of these ways can be defined before or after theyâ€™re called. It doesnâ€™t matter to JavaScript.</p>

<pre class=" language-javascript"><code class="JavaScript  language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Did it: Hello"</span>

<span class="token keyword">let</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">"Fluffy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`My cat's name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cat<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "My cat's name is Fluffy."</span>

<span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Did it: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>param<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>

<p>A traditional function also creates its own context, defining a value for <code>this</code> that exists only within the scope of the statement body. Any statements or sub-functions defined within it are executing, and optionally allowing us to bind a value for <code>this</code> when calling the function.</p>

<p>Thatâ€™s a lot for the keyword to do, and itâ€™s usually more than a programmer needs in any one place. So modern JavaScript split out the behavior of the traditional function into arrow functions and classes.</p>

<h3 id="gettingtoclassontime">Getting to Class on Time</h3>

<p>One part of the traditional <code>function</code> has been taken over by the <code>class</code> keyword. This allows programmers to choose whether they would prefer to follow a more functional programming paradigm with callable arrow functions, or use a more object-oriented approach with classes to substitute for the prototypal inheritance of traditional functions.</p>

<p>Classes in JavaScript look and act a lot like simple classes in other object-oriented languages, and may be an easy stepping stone for Java and C++ developers looking to expand into JavaScript as JavaScript expands out to the server.</p>

<p>One difference between functions and classes when doing object-oriented programming in JavaScript is that classes in JavaScript require forward declaration, the way they do in C++ (although not in Java). That is, a <code>class</code> needs to be declared in the script before it is instantiated with a <code>new</code> keyword. Prototypal inheritance using the <code>function</code> keyword works in JavaScript even if itâ€™s defined later in the script, since a <code>function</code> declaration is automatically hoisted to the top, unlike a <code>class</code>.</p>

<pre class=" language-javascript"><code class="JavaScript  language-javascript"><span class="token comment">// Using a function to declare and instantiate an object (hoisted)</span>
<span class="token keyword">let</span> aProto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proto</span><span class="token punctuation">(</span><span class="token string">"Myra"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
aProto<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Hi Myra"</span>

<span class="token keyword">function</span> <span class="token function">Proto</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">greet</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Hi </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Using a class to declare and instantiate an object (not hoisted)</span>
<span class="token keyword">class</span> <span class="token class-name">Classy</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Hi </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> aClassy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Classy</span><span class="token punctuation">(</span><span class="token string">"Sonja"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
aClassy<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Hi Sonja"</span>
</code></pre>

<h3 id="pointeddifferenceswitharrowfunctions">Pointed Differences with Arrow Functions</h3>

<p>The other aspect of traditional functions can now be accessed using arrow functions, a new syntax that allows you to write a callable function more concisely, to fit more neatly inside a callback. In fact, the simplest syntax for an arrow function is a single line that leaves off the curly braces entirely, and automatically returns the result of the statement executed:</p>

<pre class=" language-javascript"><code class="JavaScript  language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">traditional</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> from a traditional function`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">arrow</span> <span class="token operator">=</span> data <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> from an arrow function`</span></span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">traditional</span><span class="token punctuation">(</span><span class="token string">"Hi"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Hi from a traditional function"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">arrow</span><span class="token punctuation">(</span><span class="token string">"Hi"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// "Hi from an arrow function"</span>
</code></pre>

<p>Arrow functions encapsulate several qualities that can make calling them more convenient, and leave out other behavior that isnâ€™t as useful when calling a function. They are not drop-in replacements for the more versatile traditional <code>function</code> keyword.</p>

<p>For example, an arrow function inherits both <code>this</code> and <code>arguments</code> from the contexts in which itâ€™s called. Thatâ€™s great for situations like event handling or <code>setTimeout</code> when a programmer frequently wants the behavior being called to apply to the context in which is it was requested. Traditional functions have forced programmers to write convoluted code that binds a function to an existing <code>this</code> by using <code>.bind(this)</code>. None of that is necessary with arrow functions.</p>

<pre class=" language-javascript"><code class="JavaScript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">GreeterTraditional</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Joe"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// inner function has its own this with no name</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> greeterTraditional <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GreeterTraditional</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
greeterTraditional<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Hello "</span>

<span class="token keyword">class</span> <span class="token class-name">GreeterBound</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Steven"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// passing this from the outside context</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> greeterBound <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GreeterBound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Hello Steven"</span>
greeterBound<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">GreeterArrow</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Ravi"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// arrow function inherits this by default</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> greeterArrow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GreeterArrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
greeterArrow<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Hello Ravi"</span>
</code></pre>

<h2 id="understandwhatyouregetting">Understand What Youâ€™re Getting</h2>

<p>Itâ€™s not all just syntactic sugar. A lot of the new changes in JavaScript have been introduced because new functionality was needed. But that doesnâ€™t mean that the old reasons for JavaScriptâ€™s traditional syntax have gone away. Often it makes sense to continue using the traditional JavaScript syntax, and sometimes using the new syntax can make your code much faster to write and easier to understand.</p>

<p>Check out those online tutorials youâ€™re following. If the writer is using <code>var</code> to initialize all of the variables, ignoring classes in favor of prototypal inheritance, or relying on <code>function</code> statements in callbacks, you can expect the rest of the syntax to be based on older, traditional JavaScript. And thatâ€™s fine. Thereâ€™s still a lot that we can learn and apply today from the traditional ways the JavaScript has always been taught and used. But if you see <code>let</code> and <code>const</code> in the intializations, arrow functions in callbacks, and classes as the basis for object-oriented patterns, youâ€™ll probably also see other modern JavaScript code in the examples.</p>

<p>The best practice in modern JavaScript is paying attention to what the language is actually doing. Depending on what youâ€™re used to, it may not always be obvious. But think about what the code youâ€™re writing is trying to accomplish, where youâ€™re going to need to deploy it, and who will be modifying it next. Then decide for yourself what the best approach would be.</p>


<div class="next-chapter-wrapper"><a class="next-chapter-button" data-next-chapter="7" target="_blank" data-href="#flowcontrol"><span>NEXT :</span>Flow Control
    in Modern JS: Callbacks to Promises to Async/Await<i class="fas fa-chevron-right"></i></a>
</div>
<div class="chapter-end"></div>
</div>

<!--new chapter-->

<div class="chapter hide" data-chapter-number="7">
  <div class="chapter-start">
    <div class="ch-head">Chapter <span class="chapter-number"> 7</span></div>
    <h1 class="chaptertitle" id="flowcontrol">Flow Control in Modern JS: Callbacks to Promises to Async/Await</h1>
    <h3 class="author"> Craig Buckler </h3>
  </div>
<p><strong>JavaScript is regularly claimed to be <em>asynchronous</em>. What does that mean? How does it affect development? How has the approach changed in recent years?</strong></p>

<p>Consider the following code:</p>

<pre class=" language-javascript"><code class="JavaScript  language-javascript">result1 <span class="token operator">=</span> <span class="token function">doSomething1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
result2 <span class="token operator">=</span> <span class="token function">doSomething2</span><span class="token punctuation">(</span>result1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>Most languages process each line <em>synchronously</em>. The first line runs and returns a result. The second line runs once the first has finished <em>regardless of how long it takes</em>.</p>

<h2 id="singlethreadprocessing">Single-thread Processing</h2>

<p>JavaScript runs on a single processing thread. When executing in a browser tab, everything else stops. This is necessary because changes to the page DOM canâ€™t occur on parallel threads; it would be dangerous to have one thread redirecting to a different URL while another attempts to append child nodes.</p>

<p>This is rarely evident to the user, because processing occurs quickly in small chunks. For example, JavaScript detects a button click, runs a calculation, and updates the DOM. Once complete, the browser is free to process the next item on the queue.</p>

<div class="box note">
    <h4>Other Languages</h4>
    <div class="body">
      <p>Other languages such as PHP also use a single thread but may be managed by by a multi-threaded server such as Apache. Two requests to the same PHP page at the same time can initiate two threads running isolated instances of the PHP runtime.</p>
    </div>
  </div>



<h2 id="goingasynchronouswithcallbacks">Going Asynchronous with Callbacks</h2>

<p>Single threads raise a problem. What happens when JavaScript calls a â€œslowâ€ process such as an Ajax request in the browser or a database operation on the server? That operation could take several seconds â€” <em>even minutes</em>. A browser would become locked while it waited for a response. On the server, a Node.js application would not be able to process further user requests.</p>

<p>The solution is asynchronous processing. Rather than wait for completion, a process is told to call another function when the result is ready. This is known as a <em>callback</em>, and itâ€™s passed as an argument to any asynchronous function. For example:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token function">doSomethingAsync</span><span class="token punctuation">(</span>callback1<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'finished'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// call when doSomethingAsync completes</span>
<span class="token keyword">function</span> <span class="token function">callback1</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>error<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'doSomethingAsync complete'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>

<p><code>doSomethingAsync()</code> accepts a callback function as a parameter (only a reference to that function is passed so thereâ€™s little overhead). It doesnâ€™t matter how long <code>doSomethingAsync()</code> takes; all we know is that <code>callback1()</code> will be executed at some point in the future. The console will show:</p>

<pre class=" language-javascript"><code class="JavaScript  language-javascript">finished
doSomethingAsync complete
</code></pre>

<h3 id="callbackhell">Callback Hell</h3>

<p>Often, a callback is only ever called by one asynchronous function. Itâ€™s therefore possible to use concise, anonymous inline functions:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token function">doSomethingAsync</span><span class="token punctuation">(</span>error <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>error<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'doSomethingAsync complete'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>A series of two or more asynchronous calls can be completed in series by nesting callback functions. For example:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span> <span class="token function">async2</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span> <span class="token function">async3</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1, async2, async3 complete.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>Unfortunately, this introduces <strong>callback hell</strong> â€” a notorious concept that even <a href="http://callbackhell.com/" target="_blank">has its own web page</a>! The code is difficult to read, and will become worse when error-handling logic is added.</p>

<p>Callback hell is relatively rare in client-side coding. It can go two or three levels deep if youâ€™re making an Ajax call, updating the DOM and waiting for an animation to complete, but it normally remains manageable.</p>

<p>The situation is different on OS or server processes. A Node.js API call could receive file uploads, update multiple database tables, write to logs, and make further API calls before a response can be sent.</p>

<h2 id="promises">Promises</h2>

<p><a href="https://www.sitepoint.com/overview-javascript-promises/" target="_blank">ES2015 (ES6) introduced Promises</a>. Callbacks are still used below the surface, but Promises provide a clearer syntax that <em>chains</em> asynchronous commands so they run in series (more about that in the <a href="https://www.sitepoint.com/premium/books/javascript-best-practice/read#asynchronouschaining" target="_blank">next section</a>).</p>

<p>To enable Promise-based execution, asynchronous callback-based functions must be changed so they immediately return a Promise object. That object <em>promises</em> to run one of two functions (passed as arguments) at some point in the future:</p>

<ul>
<li><strong><code>resolve</code></strong>: a callback function run when processing successfully completes, and</li>

<li><strong><code>reject</code></strong>: an optional callback function run when a failure occurs.</li>
</ul>

<p>In the example below, a database API provides a <code>connect()</code> method which accepts a callback function. The outer <code>asyncDBconnect()</code> function immediately returns a new Promise and runs either <code>resolve()</code> or <code>reject()</code> once a connection is established or fails:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'database'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// connect to database</span>
<span class="token keyword">function</span> <span class="token function">asyncDBconnect</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    db<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>param<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> connection<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">else</span> <span class="token function">resolve</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre>

<p>Node.js 8.0+ provides a <a href="https://nodejs.org/api/util.html#util_util_promisify_original" target="_blank">util.promisify() utility</a> to convert a callback-based function into a Promise-based alternative. There are a couple of conditions:</p>

<ol>
<li>the callback must be passed as the last parameter to an asynchronous function, and</li>

<li>the callback function must expect an error followed by a value parameter.</li>
</ol>

<p>Example:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token comment">// Node.js: promisify fs.readFile</span>
<span class="token keyword">const</span>
  util <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'util'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  readFileAsync <span class="token operator">=</span> util<span class="token punctuation">.</span><span class="token function">promisify</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span>readFile<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">readFileAsync</span><span class="token punctuation">(</span><span class="token string">'file.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>Various client-side libraries also provide promisify options, but you can create one yourself in a few lines:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token comment">// promisify a callback function passed as the last parameter</span>
<span class="token comment">// the callback function must accept (err, data) parameters</span>
<span class="token keyword">function</span> <span class="token function">promisify</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span>
          <span class="token operator">...</span>Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span>err<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> err <span class="token operator">?</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// example</span>
<span class="token keyword">function</span> <span class="token function">wait</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'done'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> asyncWait <span class="token operator">=</span> <span class="token function">promisify</span><span class="token punctuation">(</span>wait<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">ayscWait</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<h3 id="asynchronouschaining">Asynchronous Chaining</h3>

<p>Anything that returns a Promise can start a series of asynchronous function calls defined in <code>.then()</code> methods. Each is passed the result from the previous <code>resolve</code>:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token function">asyncDBconnect</span><span class="token punctuation">(</span><span class="token string">'http://localhost:1234'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>asyncGetSession<span class="token punctuation">)</span>      <span class="token comment">// passed result of asyncDBconnect</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>asyncGetUser<span class="token punctuation">)</span>         <span class="token comment">// passed result of asyncGetSession</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>asyncLogAccess<span class="token punctuation">)</span>       <span class="token comment">// passed result of asyncGetUser</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>           <span class="token comment">// non-asynchronous function</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'complete'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//   (passed result of asyncLogAccess)</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>            <span class="token comment">//   (result passed to next .then())</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>             <span class="token comment">// called on any reject</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>Synchronous functions can also be executed in <code>.then()</code> blocks. The returned value is passed to the next <code>.then()</code> (if any).</p>

<p>The <code>.catch()</code> method defines a function thatâ€™s called when any previous <code>reject</code> is fired. At that point, no further <code>.then()</code> methods will be run. You can have multiple <code>.catch()</code> methods throughout the chain to capture different errors.</p>

<p>ES2018 introduces a <code>.finally()</code> method, which runs any final logic regardless of the outcome â€” for example, to clean up, close a database connection etc. Itâ€™s currently supported in Chrome and Firefox only, but Technical Committee 39 has released a <a href="https://github.com/tc39/proposal-promise-finally/blob/fd934c0b42d59bf8d9446e737ba14d50a9067216/polyfill.js" target="_blank">.finally() polyfill</a>.</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">doSomething1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>doSomething2<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>doSomething3<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// tidy-up here!</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>

<h3 id="multipleasynchronouscallswithpromiseall">Multiple Asynchronous Calls with Promise.all()</h3>

<p>Promise <code>.then()</code> methods run asynchronous functions one after the other. If the order doesnâ€™t matter â€” for example, initialising unrelated components â€” itâ€™s faster to launch all asynchronous functions at the same time and finish when the last (slowest) function runs <code>resolve</code>.</p>

<p>This can be achieved with <code>Promise.all()</code>. It accepts an array of functions and returns another Promise.  For example:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript">Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span> async1<span class="token punctuation">,</span> async2<span class="token punctuation">,</span> async3 <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>values <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>           <span class="token comment">// array of resolved values</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// (in same order as function array)</span>
    <span class="token keyword">return</span> values<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>             <span class="token comment">// called on any reject</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p><code>Promise.all()</code> terminates immediately if any one of the asynchronous functions calls <code>reject</code>.</p>

<h3 id="multipleasynchronouscallswithpromiserace">Multiple Asynchronous Calls with Promise.race()</h3>

<p><code>Promise.race()</code> is similar to <code>Promise.all()</code>, except that it will resolve or reject as soon as the <em>first</em> Promise resolves or rejects. Only the fastest Promise-based asynchronous function will ever complete:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript">Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span> async1<span class="token punctuation">,</span> async2<span class="token punctuation">,</span> async3 <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>value <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>            <span class="token comment">// single value</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>             <span class="token comment">// called on any reject</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<h3 id="apromisingfuture">A Promising Future?</h3>

<p>Promises reduce callback hell but introduce their own problems.</p>

<p>Tutorials often fail to mention that <em>the whole Promise chain is asynchronous</em>. Any function using a series of promises should either return its own Promise or run callback functions in the final <code>.then()</code>, <code>.catch()</code> or <code>.finally()</code> methods.</p>

<p>I also have a confession: <em>Promises confused me for a long time</em>. The syntax often seems more complicated than callbacks, thereâ€™s a lot to get wrong, and debugging can be problematic. However, itâ€™s essential to learn the basics.</p>

<p>Further Promise resources:</p>

<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">MDN Promise documentation</a></li>

<li><a href="https://developers.google.com/web/fundamentals/primers/promises" target="_blank">JavaScript Promises: an Introduction</a></li>

<li><a href="http://www.mattgreer.org/articles/promises-in-wicked-detail/" target="_blank">JavaScript Promises â€¦ In Wicked Detail</a></li>

<li><a href="http://exploringjs.com/es6/ch_promises.html" target="_blank">Promises for asynchronous programming</a></li>
</ul>

<h2 id="asyncawait">Async/Await</h2>

<p>Promises can be daunting, so <a href="https://www.sitepoint.com/LINK-to-ES2017-article" target="_blank">ES2017</a> introduced <code>async</code> and <code>await</code>. While it may only be syntactical sugar, it makes Promises far sweeter, and you can avoid <code>.then()</code> chains altogether. Consider the Promise-based example below:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">function</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token function">asyncDBconnect</span><span class="token punctuation">(</span><span class="token string">'http://localhost:1234'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>asyncGetSession<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>asyncGetUser<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>asyncLogAccess<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// run connect (self-executing function)</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>To rewrite this using <code>async</code>/<code>await</code>:</p>

<ol>
<li>the outer function must be preceded by an <code>async</code> statement, and</li>

<li>calls to asynchronous Promise-based functions must be preceded by <code>await</code> to ensure processing completes before the next command executes.</li>
</ol>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span>
      connection <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">asyncDBconnect</span><span class="token punctuation">(</span><span class="token string">'http://localhost:1234'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      session <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">asyncGetSession</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">,</span>
      user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">asyncGetUser</span><span class="token punctuation">(</span>session<span class="token punctuation">)</span><span class="token punctuation">,</span>
      log <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">asyncLogAccess</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> log<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token comment">// run connect (self-executing async function)</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">await</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p><code>await</code> effectively makes each call appear as though itâ€™s synchronous, while not holding up JavaScriptâ€™s single processing thread. In addition, <code>async</code> functions always return a Promise so they, in turn, can be called by other <code>async</code> functions.</p>

<p><code>async</code>/<code>await</code> code may not be shorter, but there are considerable benefits:</p>

<ol>
<li>The syntax is cleaner. There are fewer brackets and less to get wrong.</li>

<li>Debugging is easier. Breakpoints can be set on any <code>await</code> statement.</li>

<li>Error handling is better. <code>try</code>/<code>catch</code> blocks can be used in the same way as synchronous code.</li>

<li>Support is good. Itâ€™s implemented in all browsers (except IE and Opera Mini) and Node 7.6+.</li>
</ol>

<p>That said, not all is perfect â€¦</p>

<h3 id="promisespromises">Promises, Promises</h3>

<p><code>async</code>/<code>await</code> still relies on Promises, which ultimately rely on callbacks. Youâ€™ll need to understand how Promises work, and thereâ€™s no direct equivalent of <code>Promise.all()</code> and <code>Promise.race()</code>. Itâ€™s easy to forget about <code>Promise.all()</code>, which is more efficient than using a series of unrelated <code>await</code> commands.</p>

<h3 id="asynchronousawaitsinsynchronousloops">Asynchronous Awaits in Synchronous Loops</h3>

<p>At some point youâ€™ll try calling an asynchronous function <em>inside</em> a synchronous loop. For example:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">process</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> array<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>

<p>It wonâ€™t work. Neither will this:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">process</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  array<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> i <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>

<p>The loops themselves remain synchronous and will always complete before their inner asynchronous operations.</p>

<p>ES2018 introduces asynchronous iterators, which are just like regular iterators except the <code>next()</code> method returns a Promise. Therefore, the <code>await</code> keyword can be used with <code>for â€¦ of</code> loops to run asynchronous operations in series. for example:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">process</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> array<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">doSomething</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>

<p>However, until asynchronous iterators are implemented, itâ€™s possibly best to <code>map</code> array items to an <code>async</code> function and run them with <code>Promise.all()</code>. For example:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">const</span>
  todo <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  alltodo <span class="token operator">=</span> todo<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>v<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'iteration'</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">processSomething</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>alltodo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>This has the benefit of running tasks in parallel, but itâ€™s not possible to pass the result of one iteration to another, and mapping large arrays could be computationally expensive.</p>

<h3 id="trycatchugliness">try/catch Ugliness</h3>

<p><code>async</code> functions will silently exit if you omit a <code>try</code>/<code>catch</code> around any <code>await</code> which fails. If you have a long set of asynchronous <code>await</code> commands, you may need multiple <code>try</code>/<code>catch</code> blocks.</p>

<p>One alternative is a higher-order function, which catches errors so <code>try</code>/<code>catch</code> blocks become unnecessary (thanks to <a href="https://twitter.com/wesbos/status/911309291545559041" target="_blank">@wesbos</a> for the suggestion):</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span>
    connection <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">asyncDBconnect</span><span class="token punctuation">(</span><span class="token string">'http://localhost:1234'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    session <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">asyncGetSession</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">,</span>
    user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">asyncGetUser</span><span class="token punctuation">(</span>session<span class="token punctuation">)</span><span class="token punctuation">,</span>
    log <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">asyncLogAccess</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// higher-order function to catch errors</span>
<span class="token keyword">function</span> <span class="token function">catchErrors</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ERROR'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">catchErrors</span><span class="token punctuation">(</span>connect<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>However, this option may not be practical in situations where an application must react to some errors in a different way from others.</p>

<p>Despite some pitfalls, <code>async</code>/<code>await</code> is an elegant addition to JavaScript. Further resources:</p>

<ul>
<li>MDN <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank">async</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await" target="_blank">await</a></li>

<li><a href="https://developers.google.com/web/fundamentals/primers/async-functions" target="_blank">Async functions - making promises friendly</a></li>

<li><a href="https://tc39.github.io/ecmascript-asyncawait/" target="_blank">TC39 Async Functions specification</a></li>

<li><a href="https://www.sitepoint.com/simplifying-asynchronous-coding-async-functions/" target="_blank">Simplifying Asynchronous Coding with Async Functions</a></li>
</ul>

<h2 id="javascriptjourney">JavaScript Journey</h2>

<p>Asynchronous programming is a challenge thatâ€™s impossible to avoid in JavaScript. Callbacks are essential in most applications, but itâ€™s easy to become entangled in deeply nested functions.</p>

<p>Promises abstract callbacks, but there are many syntactical traps. Converting existing functions can be a chore and <code>.then()</code> chains still look messy.</p>

<p>Fortunately, <code>async</code>/<code>await</code> delivers clarity. Code looks synchronous, but it canâ€™t monopolize the single processing thread. It will change the way you write JavaScript and could even make you appreciate Promises â€” if you didnâ€™t before!</p>


<div class="next-chapter-wrapper"><a class="next-chapter-button" data-next-chapter="8" target="_blank" data-href="#privatclassfields"><span>NEXT :</span>JavaScriptâ€™s
    New Private Class Fields, and How to Use Them<i class="fas fa-chevron-right"></i></a>
</div>
<div class="chapter-end"></div>
</div>
<!--new chapter-->

<div class="chapter hide" data-chapter-number="8">
  <div class="chapter-start">
    <div class="ch-head">Chapter <span class="chapter-number"> 8</span></div>
    <h1 class="chaptertitle" id="privatclassfields">JavaScriptâ€™s New Private Class Fields, and How to Use Them</h1>
    <h3 class="author"> Craig Buckler </h3>
  </div>
<p><strong>ES6 introduced classes to JavaScript, but theyâ€™re too simplistic for complex applications. Class fields (also referred to as <em>class properties</em>) aim to deliver simpler constructors with private and static members. The proposal is currently at <a href="https://github.com/tc39/proposal-class-fields" style="font-weight:bold !important" target="_blank">TC39 stage 3: candidate</a> and could appear in ES2019 (ES10).</strong></p>

<p>A quick recap of ES6 classes is useful before we examine class fields in more detail.</p>

<h2 id="es6classbasics">ES6 Class Basics</h2>

<p>JavaScriptâ€™s prototypal inheritance model can appear confusing to developers with an understanding of the classical inheritance used in languages such as C++, C#, Java and PHP. JavaScript classes are primarily syntactical sugar, but they offer more familiar object-oriented programming concepts.</p>

<p>A class is a <em>template</em> which defines how objects of that type behave. The following <code>Animal</code> class defines generic animals (classes are normally denoted with an initial capital to distinguish them from objects and other types):</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">'anonymous'</span><span class="token punctuation">,</span> legs <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> noise <span class="token operator">=</span> <span class="token string">'nothing'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'animal'</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>legs <span class="token operator">=</span> legs<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>noise <span class="token operator">=</span> noise<span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> says "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>noise<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">walk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> walks on </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>legs<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> legs`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>

<p>Class declarations execute in strict mode; thereâ€™s no need to add <code>'use strict'</code>.</p>

<p>A <code>constructor</code> method is run when an object of this type is created, and it typically defines initial properties. <code>speak()</code> and <code>walk()</code> are methods which add further functionality.</p>

<p>An object can now be created from this class with the <code>new</code> keyword:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">const</span> rex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">'Rex'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'woof'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rex<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// Rex says "woof"</span>
rex<span class="token punctuation">.</span>noise <span class="token operator">=</span> <span class="token string">'growl'</span><span class="token punctuation">;</span>
rex<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// Rex says "growl"</span>
</code></pre>

<h2 id="gettersandsetters">Getters and Setters</h2>

<p><em>Setters</em> are special methods used to define values only. Similarly, <em>Getters</em> are special methods used to return a value only. For example:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">'anonymous'</span><span class="token punctuation">,</span> legs <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> noise <span class="token operator">=</span> <span class="token string">'nothing'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'animal'</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>legs <span class="token operator">=</span> legs<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>noise <span class="token operator">=</span> noise<span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> says "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>noise<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">walk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> walks on </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>legs<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> legs`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// setter</span>
  <span class="token keyword">set</span> <span class="token function">eats</span><span class="token punctuation">(</span>food<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>food <span class="token operator">=</span> food<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// getter</span>
  <span class="token keyword">get</span> <span class="token function">dinner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> eats </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>food <span class="token operator">||</span> <span class="token string">'nothing'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> for dinner.`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>


<span class="token keyword">const</span> rex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">'Rex'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'woof'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rex<span class="token punctuation">.</span>eats <span class="token operator">=</span> <span class="token string">'anything'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> rex<span class="token punctuation">.</span>dinner <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Rex eats anything for dinner.</span>
</code></pre>

<h2 id="childorsubclasses">Child or Sub-Classes</h2>

<p>Itâ€™s often practical to use one class as the base for another. If weâ€™re mostly creating dog objects, <code>Animal</code> is too generic, and we must specify the same 4-leg and â€œwoofâ€ noise defaults every time.</p>

<p>A <code>Dog</code> class can inherit all the properties and methods from the <code>Animal</code> class using <code>extends</code>. Dog-specific properties and methods can be added or removed as necessary:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// call the Animal constructor</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'woof'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'dog'</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token comment">// override Animal.speak</span>
  <span class="token function">speak</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>to<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>

<p><code>super</code> refers to the parent class and is usually called in the <code>constructor</code>. In this example, the Dog <code>speak()</code> method overrides the one defined in <code>Animal</code>.</p>

<p>Object instances of <code>Dog</code> can now be created:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">const</span> rex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'Rex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rex<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token string">'everyone'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// Rex says "woof" to everyone</span>

rex<span class="token punctuation">.</span>eats <span class="token operator">=</span> <span class="token string">'anything'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> rex<span class="token punctuation">.</span>dinner <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Rex eats anything for dinner.</span>
</code></pre>

<h2 id="staticmethodsandproperties">Static Methods and Properties</h2>

<p>Defining a method with the <code>static</code> keyword allows it to be called on a class without creating an object instance. JavaScript doesnâ€™t support static properties in the same way as other languages, but it is possible to add properties to the class definition (a <code>class</code> is a JavaScript object in itself!).</p>

<p>The <code>Dog</code> class can be adapted to retain a count of how many dog objects have been created:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// call the Animal constructor</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'woof'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'dog'</span><span class="token punctuation">;</span>

    <span class="token comment">// update count of Dog objects</span>
    Dog<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token comment">// override Animal.speak</span>
  <span class="token function">speak</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>to<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token comment">// return number of dog objects</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token constant">COUNT</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Dog<span class="token punctuation">.</span>count<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token comment">// static property (added after class is defined)</span>
Dog<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre>

<p>The classâ€™s static <code>COUNT</code> getter returns the number of dogs created:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Dogs defined: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Dog<span class="token punctuation">.</span><span class="token constant">COUNT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Dogs defined: 0</span>

<span class="token keyword">const</span> don <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'Don'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Dogs defined: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Dog<span class="token punctuation">.</span><span class="token constant">COUNT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Dogs defined: 1</span>

<span class="token keyword">const</span> kim <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'Kim'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Dogs defined: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Dog<span class="token punctuation">.</span><span class="token constant">COUNT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Dogs defined: 2</span>
</code></pre>

<p>For more information, refer to <a href="https://www.sitepoint.com/object-oriented-javascript-deep-dive-es6-classes/" target="_blank">Object-oriented JavaScript: A Deep Dive into ES6 Classes</a>.</p>

<h2 id="esnextclassfields">ESnext Class Fields</h2>

<p>The class fields proposal allows properties to be initialized at the top of a class:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>

  a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre>

<p>This is equivalent to:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>

<p>Initializers are executed before any constructor runs (<em>presuming a constructor is still necessary</em>).</p>

<h3 id="staticclassfields">Static Class Fields</h3>

<p>Class fields permit static properties to be declared within the <code>class</code>. For example:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>

  x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> z <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> MyClass<span class="token punctuation">.</span>z <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre>

<p>The inelegant ES6 equivalent:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

MyClass<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> MyClass<span class="token punctuation">.</span>z <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre>

<h3 id="privateclassfields">Private Class Fields</h3>

<p>All properties in ES6 classes are public by default and can be examined or modified outside the class. In the <code>Animal</code> example above, thereâ€™s nothing to prevent the <code>food</code> property being changed without calling the <code>eats</code> setter:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">'anonymous'</span><span class="token punctuation">,</span> legs <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> noise <span class="token operator">=</span> <span class="token string">'nothing'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'animal'</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>legs <span class="token operator">=</span> legs<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>noise <span class="token operator">=</span> noise<span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token keyword">set</span> <span class="token function">eats</span><span class="token punctuation">(</span>food<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>food <span class="token operator">=</span> food<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> <span class="token function">dinner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> eats </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>food <span class="token operator">||</span> <span class="token string">'nothing'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> for dinner.`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">const</span> rex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">'Rex'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'woof'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rex<span class="token punctuation">.</span>eats <span class="token operator">=</span> <span class="token string">'anything'</span><span class="token punctuation">;</span>      <span class="token comment">// standard setter</span>
rex<span class="token punctuation">.</span>food <span class="token operator">=</span> <span class="token string">'tofu'</span><span class="token punctuation">;</span>          <span class="token comment">// bypass the eats setter altogether</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> rex<span class="token punctuation">.</span>dinner <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Rex eats tofu for dinner.</span>
</code></pre>

<p>Other languages permit <code>private</code> properties to be declared. Thatâ€™s not possible in ES6, although developers can work around it using an underscore convention (<code>_propertyName</code>), <a href="https://curiosity-driven.org/private-properties-in-javascript" target="_blank">closures, symbols, or WeakMaps</a>.</p>

<p>In ESnext, private class fields are defined using a hash <code>#</code> prefix:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>

  a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>          <span class="token comment">// .a is public</span>
  #b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>         <span class="token comment">// .#b is private</span>
  <span class="token keyword">static</span> #c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token comment">// .#c is private and static</span>

  <span class="token function">incB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>#b<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

m<span class="token punctuation">.</span><span class="token function">incB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// runs OK</span>
m<span class="token punctuation">.</span>#b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// error - private property cannot be modified outside class</span>
</code></pre>

<p>Note that thereâ€™s no way to define private methods, getters and setters, although a <a href="https://github.com/tc39/proposal-private-methods" target="_blank">TC39 stage 2: draft proposal</a> suggests using a hash <code>#</code> prefix on names. For example:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>

  <span class="token comment">// private property</span>
  #x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token comment">// private method (can only be called within the class)</span>
  #<span class="token function">incX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>#x<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// private setter (can only be called within the class)</span>
  <span class="token keyword">set</span> #<span class="token function">setX</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>#x <span class="token operator">=</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// private getter (can only be called within the class)</span>
  <span class="token keyword">get</span> #<span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>

<h2 id="immediatebenefitcleanerreactcode">Immediate Benefit: Cleaner React Code!</h2>

<p>React components often have methods tied to DOM events. To ensure <code>this</code> resolves to the component, itâ€™s necessary to <code>bind</code> every method accordingly. For example:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    state <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// bind all methods</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>incCount <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>incCount<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">incCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>ps <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">:</span> ps<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>incCount<span class="token punctuation">}</span><span class="token operator">&gt;</span>add one<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>

<p>If <code>incCount</code> is defined as a class field, it can be set to a function using an ES6 <code>=&gt;</code> fat arrow, which automatically binds it to the defining object. The <code>state</code> can also be declared as a class field so no constructor is required:</p>

<pre class=" language-javascript"><code class="javascript  language-javascript"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>

  state <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">incCount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>ps <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">:</span> ps<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>incCount<span class="token punctuation">}</span><span class="token operator">&gt;</span>add one<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>

<h2 id="usingclassfieldstoday">Using Class Fields Today</h2>

<p>Class fields are not currently supported in browsers or Node.js. However, itâ€™s possible to <a href="https://babeljs.io/docs/plugins/transform-class-properties/" target="_blank">transpile the syntax using Babel</a>, which is enabled by default when using <a href="https://github.com/facebook/create-react-app" target="_blank">Create React App</a>. Alternatively, Babel can be installed and configured using the following terminal commands:</p>

<pre class=" language-bash"><code class="bash  language-bash"><span class="token function">mkdir</span> class-properties
<span class="token function">cd</span> class-properties
<span class="token function">npm</span> init -y
<span class="token function">npm</span> <span class="token function">install</span> --save-dev babel-cli babel-plugin-transform-class-properties
<span class="token keyword">echo</span> <span class="token string">'{ "plugins": ["transform-class-properties"] }'</span> <span class="token operator">&gt;</span> .babelrc
</code></pre>

<p>Add a <code>build</code> command to the <code>scripts</code> section of <code>package.json</code>:</p>

<pre class=" language-bash"><code class="bash  language-bash"><span class="token string">"scripts"</span><span class="token keyword">:</span> <span class="token punctuation">{</span>
  <span class="token string">"build"</span><span class="token keyword">:</span> <span class="token string">"babel in.js -o out.js"</span>
<span class="token punctuation">}</span>,
</code></pre>

<p>Then run with <code>npm run build</code> to transpile the ESnext file <code>in.js</code> to a cross-browser-compatible <code>out.js</code>.</p>

<p>Babel support for <a href="https://github.com/babel/proposals/issues/22" target="_blank">private methods, getters and setters has been proposed</a>.</p>

<h2 id="classfieldsanimprovement">Class Fields: an Improvement?</h2>

<p>ES6 class definitions were simplistic. Class fields should aid readability and enable some interesting options. I donâ€™t particularly like using a hash <code>#</code> to denote private members, but unexpected behaviors and performance issues would be incurred without it (refer to <a href="https://jamie.build/javascripts-new-private-class-fields.html" target="_blank">JavaScriptâ€™s new #private class fields</a> for a detailed explanation).</p>

<p>Perhaps it goes without saying, but Iâ€™m going to say it anyway: <em>the concepts discussed in this article are subject to change and may never be implemented!</em> That said, JavaScript class fields have practical benefits and interest is rising. Itâ€™s a safe bet.</p>


<div class="chapter-end"></div>
</div>


</div><div id="reeedrConfirmationModal" class="sp-modal modal-background l-h-100 l-w-100 l-d-n"><div id="sp-modal-content-wrapper" class="modal-content l-d-f l-jc-cen l-ai-cen l-fd-col t-bg-white l-w-80 reeedr-modal l-p-fix l-pa0 undefined "><div class="l-w-100"><div class="reeedr-modal-heading l-d-f l-ai-cen l-pt3 l-w-100"><div class="reeedr-modal-heading-content l-ph2 l-w-100 l-d-f l-jc-cen l-ai-cen l-w-100"><img class="modal-image" src="./SitePoint Premium_files/bookmark-delete.svg"><h5 class="l-mb0 l-ml-3">Delete Bookmark?</h5></div></div><div class="reeedr-modal-content l-d-f l-jc-sb l-ai-cen l-fd-col l-fd-row--3col l-pa3 l-w-100 "><button class="Button cancel">Cancel</button><button class="Button delete">Delete</button></div></div></div></div><div id="reeedrMessageModal" class="sp-modal modal-background l-h-100 l-w-100 l-d-n"><div id="sp-modal-content-wrapper" class="modal-content l-d-f l-jc-cen l-ai-cen l-fd-col t-bg-white l-w-80 reeedr-modal l-p-fix l-pa0 undefined "><div class="l-w-100"><div class="reeedr-modal-heading l-d-f l-ai-cen l-pt3 l-w-100"><div class="reeedr-modal-heading-content l-ph2 l-w-100 l-d-f l-ai-cen l-w-100"><img class="modal-image" src="./SitePoint Premium_files/bookmark-success.svg"><h5 class="l-mb0 l-ml4">Success!</h5></div></div><div class="reeedr-modal-content l-d-f l-jc-cen l-ai-cen l-fd-col l-fd-row--3col l-pa2 l-w-100 "><span class="l-ma0 l-d-f l-ai-cen l-jc-cen f-minor"></span></div></div></div></div><div class="reeedr-footer hide"><div class="reeedr-footer-content-wrapper"><p> Copyright 2018 SitePoint</p></div></div><div id="spinnerModal" class="sp-modal modal-background l-h-100 l-w-100 l-d-n"><div id="sp-modal-content-wrapper" class="modal-content l-d-f l-jc-cen l-ai-cen l-fd-col t-bg-white l-w-80 reeedr-modal l-p-fix l-pa0 undefined transparent"><img class="reeedr-loading" src="./SitePoint Premium_files/spinner-icon.svg"><span class="loading-text f-c-white">LOADING...</span></div></div></div></reeedr>
<div aria-labelledby="Download" class="reveal-modal small modal--standard modal--download" id="modal-download" role="dialog" tabindex="-1">
<a aria-hidden="true" class="close-reveal-modal" data-dismiss="modal" type="button">Ã—</a>
<div class="content"></div>
</div>



<!-- / post_footer: (used for modals etc so that their positioning is unaffected by the content) -->

<script src="./SitePoint Premium_files/app-2a1f3315896a39e3a345494a735dba06d442000e0b397bcd37b6a0d5c7bbbd9b.js.download"></script>
<script src="./SitePoint Premium_files/application-11dec1d67978673083e98bcd7981aebaa972605b02c65b404930342908b20c25.js.download"></script>
<!-- / JS included in javascript_body provides functions and frameworks -->
<script src="./SitePoint Premium_files/download-9128868a08f3364faa4fa1f771c9b4cd1753a469ae961e95763c93af46285e34.js.download"></script>

<!-- / JS included javascript_app_data is directly executed by the page -->

<!-- / loader.exec: any delayed JS from a page body is now run -->
<script>
  loader.exec();
</script>
<!-- / until respond.js is working in production (where styles are served cross-domain), make the top bar menu icon clicks work when window is larger than breakpoint (see foundation.topbar.js breakpoint()) -->
<!--[if lt IE 9]>
<script> $('html').addClass('lt-ie9')</script>
<![endif]-->
<script type="text/javascript">
  adroll_adv_id = "DJI3I3WGJBGL7PDJEDAYHV";
  adroll_pix_id = "4RKMV6N56FGA7ANPGL4FQW";
  (function () {
    var _onload = function(){
      if (document.readyState && !/loaded|complete/.test(document.readyState)){setTimeout(_onload, 10);return}
      if (!window.__adroll_loaded){__adroll_loaded=true;setTimeout(_onload, 50);return}
      var scr = document.createElement("script");
      var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
      scr.setAttribute('async', 'true');
      scr.type = "text/javascript";
      scr.src = host + "/j/roundtrip.js";
      ((document.getElementsByTagName('head') || [null])[0] ||
          document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
    };
    if (window.addEventListener) {window.addEventListener('load', _onload, false);}
    else {window.attachEvent('onload', _onload)}
  }());
</script>

<script type="text/javascript">
adroll_adv_id = "O2SYZ7SVNZGRNBIZ3ZOVWC";
adroll_pix_id = "LTH5SH3N6NGW3P2SG7ERWU";
(function () {
var oldonload = window.onload;
window.onload = function(){
   __adroll_loaded=true;
   var scr = document.createElement("script");
   var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
   scr.setAttribute('async', 'true');
   scr.type = "text/javascript";
   scr.src = host + "/j/roundtrip.js";
   ((document.getElementsByTagName('head') || [null])[0] ||
    document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
   if(oldonload){oldonload()}};
}());
</script>


<script type="text/javascript" id="">(function(f,c,d,e,a,b){a=c.createElement(d);b=c.getElementsByTagName(d)[0];a.async=1;a.src=e;a.dataset.sumoSiteId="64b8e500e3524000ecfa2000d01e2100033e83009398f000ab804c005e0e4300";b.parentNode.insertBefore(a,b)})(window,document,"script","//load.sumo.com/");</script><iframe id="sumome-jquery-iframe" title="Sumo Hidden Content" style="display: none;" src="./SitePoint Premium_files/saved_resource.html"></iframe><div id="chmln-dom" style="position: static;"><div id="chmln" data-powered-by="https://trychameleon.com/how"></div><style id="chmln-stylesheet" type="text/css">#chmln *{font-family:Helvetica,Arial,sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent;font-weight:inherit}#chmln article,#chmln aside,#chmln details,#chmln figcaption,#chmln figure,#chmln footer,#chmln header,#chmln hgroup,#chmln main,#chmln menu,#chmln nav,#chmln section,#chmln summary{display:block}#chmln [flex],#chmln div,#chmln input,#chmln label,#chmln main,#chmln section,#chmln select{position:static;display:block;-webkit-box-flex:initial;-ms-flex:initial;flex:initial;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;height:auto;width:auto}#chmln audio,#chmln canvas,#chmln progress,#chmln video{display:inline-block;vertical-align:baseline}#chmln audio:not([controls]){display:none;height:0}#chmln [hidden],#chmln template{display:none}#chmln a{background-color:transparent}#chmln a:active,#chmln a:hover{outline:0}#chmln abbr[title]{border-bottom:1px dotted}#chmln b,#chmln strong{font-weight:bold}#chmln dfn{font-style:italic}#chmln h1{font-size:2em;padding:10px 0}#chmln h2{font-size:1.5em;padding:8px 0}#chmln h3{font-size:1.33em;padding:6px 0}#chmln h4{font-size:1.17em;padding:4px 0}#chmln h5{font-size:0.83em;padding:2px 0}#chmln h6{font-size:0.67em}#chmln h1,#chmln h2,#chmln h3,#chmln h4,#chmln h5,#chmln h6{line-height:1.5em !important;text-shadow:inherit;text-decoration:none;box-shadow:none;color:inherit}#chmln mark{background:#ff0;color:#000}#chmln small{font-size:80%}#chmln sub,#chmln sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}#chmln sup{top:-0.5em}#chmln sub{bottom:-0.25em}#chmln img{border:0}#chmln svg:not(:root){overflow:hidden}#chmln figure{margin:1em 40px}#chmln hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}#chmln pre{overflow:auto}#chmln code,#chmln kbd,#chmln pre,#chmln samp{font-family:monospace,monospace;font-size:1em}#chmln button,#chmln input,#chmln optgroup,#chmln select,#chmln textarea{color:inherit;font:inherit;margin:0;height:auto;width:auto}#chmln button{overflow:visible}#chmln button,#chmln select{text-transform:none}#chmln button,#chmln html input[type="button"],#chmln input[type="reset"],#chmln input[type="submit"]{-webkit-appearance:button;cursor:pointer}#chmln button[disabled],#chmln html input[disabled]{cursor:default}#chmln button::-moz-focus-inner,#chmln input::-moz-focus-inner{border:0;padding:0}#chmln input{line-height:normal}#chmln input[type="checkbox"],#chmln input[type="radio"]{box-sizing:border-box;padding:0}#chmln input[type="number"]::-webkit-inner-spin-button,#chmln input[type="number"]::-webkit-outer-spin-button{height:auto}#chmln input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}#chmln input[type="search"]::-webkit-search-cancel-button,#chmln input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}#chmln fieldset{border:1px solid #c0c0c0;margin:0 2px;padding:0.35em 0.625em 0.75em}#chmln legend{border:0;padding:0}#chmln textarea{overflow:auto;height:auto;width:auto}#chmln optgroup{font-weight:bold}#chmln table{border-collapse:collapse;border-spacing:0}#chmln td,#chmln th{padding:0}#chmln ul,#chmln ul li{list-style-type:disc}#chmln ol,#chmln ol li{list-style-type:decimal}#chmln ul ul,#chmln ol ul{list-style-type:circle;margin-left:15px}#chmln ol ol,#chmln ul ol{list-style-type:lower-latin;margin-left:15px}#chmln .chmln-modal,#chmln .chmln-infotip,#chmln .chmln-edit-modal .chmln-step-positioning-container{display:-ms-flexbox;display:flex;position:fixed;z-index:2147483647}#chmln .chmln-modal .chmln-inner,#chmln .chmln-infotip .chmln-inner,#chmln .chmln-lightbox .chmln-inner,#chmln .chmln-hotspot .chmln-inner{background-color:#fff;color:#283554;position:relative;display:flex;flex-direction:column;font-size:13px;line-height:1.75em;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;border-radius:10px;-webkit-app-region:no-drag}#chmln .chmln-modal .chmln-inner .chmln-body,#chmln .chmln-infotip .chmln-inner .chmln-body,#chmln .chmln-lightbox .chmln-inner .chmln-body,#chmln .chmln-hotspot .chmln-inner .chmln-body{overflow-y:auto;text-align:left !important}#chmln .chmln-modal .chmln-inner>.chmln-header,#chmln .chmln-infotip .chmln-inner>.chmln-header,#chmln .chmln-lightbox .chmln-inner>.chmln-header,#chmln .chmln-hotspot .chmln-inner>.chmln-header{display:flex;display:-ms-flexbox;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;-webkit-border-radius:10px 10px 0 0;-moz-border-radius:10px 10px 0 0;-ms-border-radius:10px 10px 0 0;border-radius:10px 10px 0 0;background-color:#fff;color:#515E7D;font-weight:bold;font-size:1.1em !important;padding:18px 18px 18px 24px}#chmln .chmln-modal .chmln-inner>.chmln-header .chmln-name,#chmln .chmln-infotip .chmln-inner>.chmln-header .chmln-name,#chmln .chmln-lightbox .chmln-inner>.chmln-header .chmln-name,#chmln .chmln-hotspot .chmln-inner>.chmln-header .chmln-name{font-family:Helvetica,Arial,sans-serif}#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-body,#chmln .chmln-infotip .chmln-inner>.chmln-body,#chmln .chmln-lightbox .chmln-inner>.chmln-body,#chmln .chmln-hotspot .chmln-inner>.chmln-body,#chmln .chmln-edit-modal .chmln-inner .chmln-body{font-size:100%;line-height:100%;word-wrap:break-word;color:#283554;font-family:Helvetica,Arial,sans-serif;padding:16px 24px 0 24px;overflow-y:auto;max-height:8.75em}#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-body p,#chmln .chmln-infotip .chmln-inner>.chmln-body p,#chmln .chmln-lightbox .chmln-inner>.chmln-body p,#chmln .chmln-hotspot .chmln-inner>.chmln-body p,#chmln .chmln-edit-modal .chmln-inner .chmln-body p,#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-body a,#chmln .chmln-infotip .chmln-inner>.chmln-body a,#chmln .chmln-lightbox .chmln-inner>.chmln-body a,#chmln .chmln-hotspot .chmln-inner>.chmln-body a,#chmln .chmln-edit-modal .chmln-inner .chmln-body a,#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-body strong,#chmln .chmln-infotip .chmln-inner>.chmln-body strong,#chmln .chmln-lightbox .chmln-inner>.chmln-body strong,#chmln .chmln-hotspot .chmln-inner>.chmln-body strong,#chmln .chmln-edit-modal .chmln-inner .chmln-body strong,#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-body em,#chmln .chmln-infotip .chmln-inner>.chmln-body em,#chmln .chmln-lightbox .chmln-inner>.chmln-body em,#chmln .chmln-hotspot .chmln-inner>.chmln-body em,#chmln .chmln-edit-modal .chmln-inner .chmln-body em,#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-body h1,#chmln .chmln-infotip .chmln-inner>.chmln-body h1,#chmln .chmln-lightbox .chmln-inner>.chmln-body h1,#chmln .chmln-hotspot .chmln-inner>.chmln-body h1,#chmln .chmln-edit-modal .chmln-inner .chmln-body h1,#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-body h2,#chmln .chmln-infotip .chmln-inner>.chmln-body h2,#chmln .chmln-lightbox .chmln-inner>.chmln-body h2,#chmln .chmln-hotspot .chmln-inner>.chmln-body h2,#chmln .chmln-edit-modal .chmln-inner .chmln-body h2,#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-body h3,#chmln .chmln-infotip .chmln-inner>.chmln-body h3,#chmln .chmln-lightbox .chmln-inner>.chmln-body h3,#chmln .chmln-hotspot .chmln-inner>.chmln-body h3,#chmln .chmln-edit-modal .chmln-inner .chmln-body h3,#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-body h4,#chmln .chmln-infotip .chmln-inner>.chmln-body h4,#chmln .chmln-lightbox .chmln-inner>.chmln-body h4,#chmln .chmln-hotspot .chmln-inner>.chmln-body h4,#chmln .chmln-edit-modal .chmln-inner .chmln-body h4,#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-body h5,#chmln .chmln-infotip .chmln-inner>.chmln-body h5,#chmln .chmln-lightbox .chmln-inner>.chmln-body h5,#chmln .chmln-hotspot .chmln-inner>.chmln-body h5,#chmln .chmln-edit-modal .chmln-inner .chmln-body h5,#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-body h6,#chmln .chmln-infotip .chmln-inner>.chmln-body h6,#chmln .chmln-lightbox .chmln-inner>.chmln-body h6,#chmln .chmln-hotspot .chmln-inner>.chmln-body h6,#chmln .chmln-edit-modal .chmln-inner .chmln-body h6{font-family:inherit;color:inherit;letter-spacing:inherit}#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-body ul,#chmln .chmln-infotip .chmln-inner>.chmln-body ul,#chmln .chmln-lightbox .chmln-inner>.chmln-body ul,#chmln .chmln-hotspot .chmln-inner>.chmln-body ul,#chmln .chmln-edit-modal .chmln-inner .chmln-body ul,#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-body ol,#chmln .chmln-infotip .chmln-inner>.chmln-body ol,#chmln .chmln-lightbox .chmln-inner>.chmln-body ol,#chmln .chmln-hotspot .chmln-inner>.chmln-body ol,#chmln .chmln-edit-modal .chmln-inner .chmln-body ol{margin-left:1em;padding-left:1em}#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-body a,#chmln .chmln-infotip .chmln-inner>.chmln-body a,#chmln .chmln-lightbox .chmln-inner>.chmln-body a,#chmln .chmln-hotspot .chmln-inner>.chmln-body a,#chmln .chmln-edit-modal .chmln-inner .chmln-body a{text-decoration:underline}#chmln .chmln-modal .chmln-inner>.chmln-cta,#chmln .chmln-modal .chmln-inner>.chmln-hero,#chmln .chmln-infotip .chmln-inner>.chmln-cta,#chmln .chmln-infotip .chmln-inner>.chmln-hero,#chmln .chmln-lightbox .chmln-inner>.chmln-cta,#chmln .chmln-lightbox .chmln-inner>.chmln-hero,#chmln .chmln-hotspot .chmln-inner>.chmln-cta,#chmln .chmln-hotspot .chmln-inner>.chmln-hero{background-color:#fff;text-align:right;padding:1.0833em 24px 24px;box-sizing:border-box;-webkit-border-radius:0 0 10px 10px;-moz-border-radius:0 0 10px 10px;-ms-border-radius:0 0 10px 10px;border-radius:0 0 10px 10px}#chmln .chmln-modal .chmln-inner>.chmln-cta button+button,#chmln .chmln-modal .chmln-inner>.chmln-hero button+button,#chmln .chmln-infotip .chmln-inner>.chmln-cta button+button,#chmln .chmln-infotip .chmln-inner>.chmln-hero button+button,#chmln .chmln-lightbox .chmln-inner>.chmln-cta button+button,#chmln .chmln-lightbox .chmln-inner>.chmln-hero button+button,#chmln .chmln-hotspot .chmln-inner>.chmln-cta button+button,#chmln .chmln-hotspot .chmln-inner>.chmln-hero button+button{margin-left:12px}#chmln .chmln-modal .chmln-inner>.chmln-cta button,#chmln .chmln-modal .chmln-inner>.chmln-hero button,#chmln .chmln-infotip .chmln-inner>.chmln-cta button,#chmln .chmln-infotip .chmln-inner>.chmln-hero button,#chmln .chmln-lightbox .chmln-inner>.chmln-cta button,#chmln .chmln-lightbox .chmln-inner>.chmln-hero button,#chmln .chmln-hotspot .chmln-inner>.chmln-cta button,#chmln .chmln-hotspot .chmln-inner>.chmln-hero button{border:none;color:#fff;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;border-radius:10px;font-family:Helvetica,Arial,sans-serif;position:relative;background-color:#283554;font-size:1em;letter-spacing:inherit;min-height:33px;padding:0.3em 1.25em;order:1}#chmln .chmln-modal .chmln-inner>.chmln-cta button .chmln-btn-cover,#chmln .chmln-modal .chmln-inner>.chmln-hero button .chmln-btn-cover,#chmln .chmln-infotip .chmln-inner>.chmln-cta button .chmln-btn-cover,#chmln .chmln-infotip .chmln-inner>.chmln-hero button .chmln-btn-cover,#chmln .chmln-lightbox .chmln-inner>.chmln-cta button .chmln-btn-cover,#chmln .chmln-lightbox .chmln-inner>.chmln-hero button .chmln-btn-cover,#chmln .chmln-hotspot .chmln-inner>.chmln-cta button .chmln-btn-cover,#chmln .chmln-hotspot .chmln-inner>.chmln-hero button .chmln-btn-cover{-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;border-radius:10px;background:#000;content:'';height:100%;width:100%;top:0;left:0;opacity:0;position:absolute}#chmln .chmln-modal .chmln-inner>.chmln-cta button:hover .chmln-btn-cover,#chmln .chmln-modal .chmln-inner>.chmln-hero button:hover .chmln-btn-cover,#chmln .chmln-infotip .chmln-inner>.chmln-cta button:hover .chmln-btn-cover,#chmln .chmln-infotip .chmln-inner>.chmln-hero button:hover .chmln-btn-cover,#chmln .chmln-lightbox .chmln-inner>.chmln-cta button:hover .chmln-btn-cover,#chmln .chmln-lightbox .chmln-inner>.chmln-hero button:hover .chmln-btn-cover,#chmln .chmln-hotspot .chmln-inner>.chmln-cta button:hover .chmln-btn-cover,#chmln .chmln-hotspot .chmln-inner>.chmln-hero button:hover .chmln-btn-cover{opacity:0.2}#chmln .chmln-modal .chmln-inner .chmln-close svg.chmln-close-icon,#chmln .chmln-infotip .chmln-inner .chmln-close svg.chmln-close-icon,#chmln .chmln-lightbox .chmln-inner .chmln-close svg.chmln-close-icon,#chmln .chmln-hotspot .chmln-inner .chmln-close svg.chmln-close-icon,#chmln .chmln-edit-modal .chmln-inner .chmln-close svg.chmln-close-icon{color:#515E7D;border:none;height:0.8333em;width:0.8333em;margin-left:1.16em;background-size:cover}@keyframes drop-pulse{0%{-webkit-transform:scale(0.5);-moz-transform:scale(0.5);transform:scale(0.5);-webkit-box-shadow:0 0 0 0px #fff;-moz-box-shadow:0 0 0 0px #fff;box-shadow:0 0 0 0px #fff}50%{-webkit-transform:scale(1);-moz-transform:scale(1);transform:scale(1);-webkit-box-shadow:0 0 0 4px rgba(104,154,203,0);-moz-box-shadow:0 0 0 4px rgba(104,154,203,0);box-shadow:0 0 0 4px rgba(104,154,203,0)}100%{-webkit-transform:scale(0.5);-moz-transform:scale(0.5);transform:scale(0.5);-webkit-box-shadow:0 0 0 0px rgba(255,255,255,0);-moz-box-shadow:0 0 0 0px rgba(255,255,255,0);box-shadow:0 0 0 0px rgba(255,255,255,0)}}#chmln ::-webkit-scrollbar{width:12px;height:18px}#chmln ::-webkit-scrollbar-thumb{height:6px;border:3px solid transparent;background-clip:padding-box;-webkit-border-radius:7px;background-color:rgba(0,0,0,0.15)}#chmln ::-webkit-scrollbar-thumb:hover{background-color:rgba(0,0,0,0.2)}#chmln .chmln-launcher-body{-ms-overflow-style:none;overflow:-moz-scrollbars-none}#chmln .chmln-launcher-body::-webkit-scrollbar{display:none;width:0 !important}#chmln .chmln-edit-modal.chmln-branding-position-bottom_right .chmln-branding-positioning-container{justify-content:flex-end;align-items:flex-end}#chmln .chmln-edit-modal.chmln-branding-position-bottom_left .chmln-branding-positioning-container{justify-content:flex-start;align-items:flex-end}#chmln .chmln-edit-modal.chmln-branding-position-top_right .chmln-branding-positioning-container{justify-content:flex-end;align-items:flex-start}#chmln .chmln-edit-modal.chmln-branding-position-top_left .chmln-branding-positioning-container{justify-content:flex-start;align-items:flex-start}#chmln .chmln-edit-modal .chmln-branding-positioning-container{display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;top:0;right:0;left:0;bottom:0;position:fixed;padding:10px 15px 10px 10px;pointer-events:none;z-index:2147482643}#chmln .chmln-edit-modal .chmln-branding{display:flex;align-items:center;background-color:#FFF;padding:5px 16px;opacity:0.5;border-radius:7px;box-shadow:0 0 3px rgba(87,70,95,0.5);pointer-events:auto;cursor:pointer;transition-property:opacity;transition-duration:200ms}#chmln .chmln-edit-modal .chmln-branding,#chmln .chmln-edit-modal .chmln-branding div{font-size:16px}#chmln .chmln-edit-modal .chmln-branding,#chmln .chmln-edit-modal .chmln-branding:hover,#chmln .chmln-edit-modal .chmln-branding:visited,#chmln .chmln-edit-modal .chmln-branding:active{text-decoration:none;color:#57465f}#chmln .chmln-edit-modal .chmln-branding:hover{opacity:1.0}#chmln .chmln-edit-modal .chmln-branding .chmln-branding-icon{width:12px;height:18px;display:block;margin-left:12px}#chmln .chmln-edit-modal .chmln-branding .chmln-branding-icon svg{width:100%;height:auto}#chmln .chmln-edit-modal .chmln-branding .chmln-branding-icon svg path{fill:#81c261}#chmln{font-family:Helvetica,Arial,sans-serif !important;font-size:13px !important;line-height:1.75em !important;letter-spacing:normal !important;position:static !important}#chmln div{position:static}.chmln-hidden{display:none !important}#chmln-dom #chmln-step-preview-element{display:none;position:absolute;left:30px;width:120px;height:30px;border:2px dashed #86ba58;border-radius:0;font-style:italic;background-color:rgba(255,255,255,0.5);color:#716280;align-items:center;justify-content:center}#chmln-dom .chmln-step-preview-container{position:fixed;top:0;bottom:0;left:590px;right:0;display:flex;align-items:center;justify-content:center;pointer-events:none}#chmln-dom .chmln-step-preview-container.chmln-step-preview-top{top:100px;left:0}#chmln-dom .chmln-step-preview-container.chmln-step-preview-top #chmln-step-preview-element{left:30%}#chmln-dom .chmln-step-preview-container .chmln-step-preview-container-left,#chmln-dom .chmln-step-preview-container .chmln-step-preview-container-right{position:relative;height:100%;flex-grow:1;flex-basis:0;display:flex}#chmln-dom .chmln-step-preview-container .chmln-step-preview-container-left{z-index:1}#chmln-dom .chmln-step-preview-container .chmln-step-preview-container-right{z-index:2;flex-direction:column;justify-content:center}#chmln-dom .chmln-step-preview-container .chmln-step-preview-container-top,#chmln-dom .chmln-step-preview-container .chmln-step-preview-container-bottom{position:relative;flex-grow:1;flex-basis:0;width:100%}#chmln-dom .chmln-step-preview-container .chmln-step-preview-container-bottom #chmln-step-preview-element{z-index:2147482643}#chmln-dom .chmln-step-preview-container #chmln-step-sample .chmln-step-positioning-container,#chmln-dom .chmln-step-preview-container #chmln-step-sample2 .chmln-step-positioning-container,#chmln-dom .chmln-step-preview-container #chmln-step-sample3 .chmln-step-positioning-container{position:absolute;left:0}#chmln-dom .chmln-step-preview-container #chmln-step-sample .chmln-highlight{position:fixed;left:590px}#chmln-dom .chmln-step-preview-container #chmln-step-sample .chmln-inner{left:10%}#chmln img.chmln-emojify{width:1.5em;height:1.5em;display:inline-block;margin-top:-0.1em;margin-bottom:-0.4em;background-size:contain}#chmln .chmln-cta{display:flex;justify-content:space-between;flex-direction:row-reverse;align-items:center}#chmln .chmln-cta div{order:2}#chmln .chmln-hero{padding:34px 1em 0 1em !important}#chmln .chmln-hero button{margin:0 auto;display:flex;padding:0.65em 1.55em !important;font-size:1.5em !important}#chmln .chmln-modal{-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;top:0;right:0;left:0;bottom:0}#chmln .chmln-modal .chmln-inner{max-width:530px;min-width:350px;max-height:100vh}#chmln .chmln-modal .chmln-inner>.chmln-media-body{overflow-x:hidden;overflow-y:auto}#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-step-media{background-color:#fff;max-width:530px;max-height:299px;overflow:hidden;text-align:center}#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-step-media.chmln-step-media-video{background:#000000}#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-step-media>.chmln-video{max-height:300px;height:100%;width:100%}#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-step-media>.chmln-image{max-width:530px;max-height:299px;height:auto;width:auto;margin:auto;flex-shrink:0}#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-step-media-sized{position:relative;height:0;text-align:center;margin:0 auto}#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-step-media-sized>.chmln-image{max-width:530px}#chmln .chmln-modal .chmln-inner>.chmln-media-body>.chmln-body{max-height:100%}#chmln .chmln-infotip{background-color:transparent;-ms-flex-pack:end;align-items:flex-end;-ms-flex-align:end;justify-content:flex-end;top:auto;right:300px;left:auto;bottom:0;pointer-events:none}#chmln .chmln-infotip .chmln-inner{margin:18px;max-width:350px;min-width:225px;-webkit-box-shadow:0px 0px 6px rgba(0,0,0,0.15);-moz-box-shadow:0px 0px 6px rgba(0,0,0,0.15);box-shadow:0px 0px 6px rgba(0,0,0,0.15);pointer-events:auto}#chmln .chmln-infotip .chmln-inner>.chmln-body{max-height:300px}#chmln .chmln-lightbox{background-color:transparent;z-index:2147482642;position:static}#chmln .chmln-lightbox .chmln-inner{position:absolute;left:-5000vh;top:-5000vw;max-width:350px;min-width:225px;pointer-events:auto;z-index:2147482642}#chmln .chmln-lightbox .chmln-inner>.chmln-body{max-height:300px}#chmln .chmln-lightbox-highlight{display:none;position:fixed;top:0;bottom:0;left:0;right:0;pointer-events:none;background:transparent;z-index:2147482642}#chmln .chmln-lightbox-highlight.chmln-lightbox-highlight-no-click .chmln-lightbox-row:nth-of-type(2) .chmln-lightbox-cell:nth-of-type(2){pointer-events:auto}#chmln .chmln-lightbox-highlight .chmln-lightbox-row{display:flex;justify-content:space-between}#chmln .chmln-lightbox-highlight .chmln-lightbox-row .chmln-lightbox-cell{flex-grow:1;pointer-events:auto;height:inherit}#chmln .chmln-lightbox-highlight .chmln-lightbox-row.chmln-lightbox-opening-row .chmln-lightbox-cell{flex-grow:0;flex-shrink:0}#chmln .chmln-lightbox-highlight .chmln-lightbox-row.chmln-lightbox-opening-row .chmln-lightbox-cell:nth-of-type(3){flex-grow:1;flex-shrink:1}#chmln .chmln-lightbox-highlight .chmln-lightbox-row.chmln-lightbox-opening-row .chmln-lightbox-cell.chmln-lightbox-opening{pointer-events:none;border-radius:5px;background-color:transparent}#chmln .chmln-hotspot{background-color:transparent;z-index:2147482642;position:static}#chmln .chmln-hotspot .chmln-inner{position:absolute;left:-5000vh;top:-5000vw;max-width:350px;min-width:225px;-webkit-box-shadow:0px 0px 6px rgba(0,0,0,0.15);-moz-box-shadow:0px 0px 6px rgba(0,0,0,0.15);box-shadow:0px 0px 6px rgba(0,0,0,0.15);z-index:2147482642}#chmln .chmln-hotspot .chmln-inner>.chmln-body{max-height:300px}#chmln .chmln-hotspot-highlight,#chmln .chmln-hotspot-trigger{position:absolute;top:-5000em;left:-5000em;cursor:pointer;overflow:visible;z-index:2147482642;pointer-events:auto;min-height:2px;min-width:2px}#chmln .chmln-hotspot-image[src$='.svg']{min-height:17px;min-width:17px}#chmln .chmln-hotspot-trigger-label_new svg,#chmln .chmln-hotspot-trigger-label_beta svg,#chmln .chmln-hotspot-trigger-label_update svg,#chmln .chmln-hotspot-trigger-label_upgrade svg{height:18px}#chmln .chmln-hotspot-trigger-icon_add svg,#chmln .chmln-hotspot-trigger-icon_alert svg,#chmln .chmln-hotspot-trigger-icon_notification svg,#chmln .chmln-hotspot-trigger-icon_help svg,#chmln .chmln-hotspot-trigger-icon_info svg,#chmln .chmln-hotspot-trigger-iconmore svg,#chmln .chmln-hotspot-trigger-icon_pin svg,#chmln .chmln-hotspot-trigger-icon_more svg{height:30px}#chmln .chmln-hotspot-trigger-icon_badge svg{height:12px}#chmln .chmln-hotspot-spot{content:" ";background:#86ba58;border-color:#86ba58;-webkit-border-radius:50%;-moz-border-radius:50%;-ms-border-radius:50%;border-radius:50%;width:20px;height:20px;animation:drop-pulse 1.2s infinite}#chmln .chmln-hotspot-spot:before{content:' ';border-width:2px;border-style:solid;border-color:inherit;position:absolute;left:-4px;top:-4px;right:-4px;bottom:-4px;-webkit-border-radius:50%;-moz-border-radius:50%;-ms-border-radius:50%;border-radius:50%;opacity:0.75}@media (min-width: 600px){#chmln>.chmln-modal .chmln-inner{margin:100px}}#chmln .chmln-edit-modal .chmln-step-positioning-container{-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;top:0;right:0;left:0;bottom:0;position:absolute;padding:20px 35px 20px 20px}#chmln .chmln-edit-modal.chmln-template-step:not(.chmln-top-bar-open) .chmln-step-positioning-container{left:590px}#chmln .chmln-edit-modal.chmln-full-width .chmln-step-positioning-container{padding:0}#chmln .chmln-edit-modal.chmln-modal-trigger-element_match:not(.chmln-partially-triggered){display:none}#chmln .chmln-edit-modal:not(.chmln-highlight) .chmln-step-positioning-container{pointer-events:none}#chmln .chmln-edit-modal.chmln-has-trigger:not(.chmln-triggered) .chmln-step-positioning-container{pointer-events:none}#chmln .chmln-edit-modal.chmln-has-trigger:not(.chmln-triggered) .chmln-inner,#chmln .chmln-edit-modal.chmln-has-trigger:not(.chmln-triggered) .chmln-hotspot-highlight,#chmln .chmln-edit-modal.chmln-has-trigger:not(.chmln-triggered) .chmln-lightbox-highlight{display:none}#chmln .chmln-edit-modal.chmln-modal-has-cover.chmln-dismiss-position-inside_left .chmln-inner .chmln-close,#chmln .chmln-edit-modal.chmln-modal-has-cover.chmln-dismiss-position-inside_right .chmln-inner .chmln-close{top:18px;z-index:3;margin:0}#chmln .chmln-edit-modal.chmln-modal-has-cover.chmln-dismiss-position-inside_right .chmln-inner .chmln-close{right:18px;left:auto}#chmln .chmln-edit-modal.chmln-modal-has-cover.chmln-dismiss-position-inside_left .chmln-inner .chmln-close{left:18px;right:auto}#chmln .chmln-edit-modal.chmln-dismiss-position-inside_left .chmln-inner .chmln-close,#chmln .chmln-edit-modal.chmln-dismiss-position-inside_right .chmln-inner .chmln-close,#chmln .chmln-edit-modal.chmln-dismiss-position-center_right .chmln-inner .chmln-close,#chmln .chmln-edit-modal.chmln-dismiss-position-center_left .chmln-inner .chmln-close{background:transparent;padding:0;box-shadow:none}#chmln .chmln-edit-modal.chmln-dismiss-position-inside_left .chmln-inner .chmln-close,#chmln .chmln-edit-modal.chmln-dismiss-position-inside_left .chmln-inner .chmln-close.chmln-close-text,#chmln .chmln-edit-modal.chmln-dismiss-position-inside_right .chmln-inner .chmln-close,#chmln .chmln-edit-modal.chmln-dismiss-position-inside_right .chmln-inner .chmln-close.chmln-close-text,#chmln .chmln-edit-modal.chmln-dismiss-position-center_right .chmln-inner .chmln-close,#chmln .chmln-edit-modal.chmln-dismiss-position-center_right .chmln-inner .chmln-close.chmln-close-text,#chmln .chmln-edit-modal.chmln-dismiss-position-center_left .chmln-inner .chmln-close,#chmln .chmln-edit-modal.chmln-dismiss-position-center_left .chmln-inner .chmln-close.chmln-close-text{opacity:1}#chmln .chmln-edit-modal.chmln-dismiss-position-center_right .chmln-inner .chmln-close,#chmln .chmln-edit-modal.chmln-dismiss-position-center_left .chmln-inner .chmln-close{position:static}#chmln .chmln-edit-modal.chmln-dismiss-position-center_left .chmln-inner .chmln-close{order:-1}#chmln .chmln-edit-modal.chmln-dismiss-position-inside_left.chmln-has-dismiss:not(.chmln-modal-has-cover) .chmln-inner .chmln-close,#chmln .chmln-edit-modal.chmln-dismiss-position-inside_right.chmln-has-dismiss:not(.chmln-modal-has-cover) .chmln-inner .chmln-close{position:static}#chmln .chmln-edit-modal.chmln-dismiss-position-inside_left.chmln-has-dismiss:not(.chmln-modal-has-cover) .chmln-inner .chmln-header,#chmln .chmln-edit-modal.chmln-dismiss-position-inside_right.chmln-has-dismiss:not(.chmln-modal-has-cover) .chmln-inner .chmln-header{width:auto;align-items:flex-start;box-sizing:border-box;padding:18px 0 0 0;background:transparent}#chmln .chmln-edit-modal.chmln-dismiss-position-inside_left.chmln-has-dismiss:not(.chmln-modal-has-cover):not(.chmln-floating-dismiss) .chmln-inner .chmln-body-container,#chmln .chmln-edit-modal.chmln-dismiss-position-inside_right.chmln-has-dismiss:not(.chmln-modal-has-cover):not(.chmln-floating-dismiss) .chmln-inner .chmln-body-container{margin-top:4px}#chmln .chmln-edit-modal.chmln-dismiss-position-inside_left.chmln-has-dismiss:not(.chmln-modal-has-cover) .chmln-inner .chmln-header{justify-content:flex-start;padding-left:18px;padding-right:0}#chmln .chmln-edit-modal.chmln-dismiss-position-inside_right.chmln-has-dismiss:not(.chmln-modal-has-cover) .chmln-inner .chmln-header{justify-content:flex-end;padding-left:0;padding-right:18px}#chmln .chmln-edit-modal.chmln-dismiss-position-outside_left .chmln-inner .chmln-header,#chmln .chmln-edit-modal.chmln-dismiss-position-outside_right .chmln-inner .chmln-header{padding:0}#chmln .chmln-edit-modal.chmln-dismiss-position-outside_left .chmln-inner .chmln-close,#chmln .chmln-edit-modal.chmln-dismiss-position-outside_right .chmln-inner .chmln-close{box-shadow:0 0 6px rgba(0,0,0,0.3);opacity:0.5;transition-property:opacity;transition-duration:200ms;min-width:30px}#chmln .chmln-edit-modal.chmln-dismiss-position-outside_left .chmln-inner .chmln-close:hover,#chmln .chmln-edit-modal.chmln-dismiss-position-outside_right .chmln-inner .chmln-close:hover{opacity:1}#chmln .chmln-edit-modal.chmln-dismiss-position-outside_left .chmln-inner .chmln-close.chmln-close-text,#chmln .chmln-edit-modal.chmln-dismiss-position-outside_right .chmln-inner .chmln-close.chmln-close-text{padding:6px 8px;min-width:0px}#chmln .chmln-edit-modal.chmln-dismiss-position-outside_left .chmln-inner .chmln-close.chmln-close-text.chmln-edit-close,#chmln .chmln-edit-modal.chmln-dismiss-position-outside_right .chmln-inner .chmln-close.chmln-close-text.chmln-edit-close{padding:0}#chmln .chmln-edit-modal.chmln-dismiss-position-outside_left .chmln-inner .chmln-close.chmln-close-text.chmln-edit-close input,#chmln .chmln-edit-modal.chmln-dismiss-position-outside_right .chmln-inner .chmln-close.chmln-close-text.chmln-edit-close input{padding:6px 8px}#chmln .chmln-edit-modal.chmln-dismiss-position-outside_left .chmln-inner .chmln-close{right:100%;right:calc(100% + 5px);left:auto}#chmln .chmln-edit-modal.chmln-dismiss-position-outside_right .chmln-inner .chmln-close{left:100%;left:calc(100% + 5px);right:auto}#chmln .chmln-edit-modal:not(.chmln-modal-has-body).chmln-modal-has-region-center_right .chmln-cta-region.chmln-cta-center_right{flex-grow:1}#chmln .chmln-edit-modal:not(.chmln-modal-has-body):not(.chmln-modal-has-region-center_left):not(.chmln-modal-has-region-center_right) .chmln-body-container{margin:0}#chmln .chmln-edit-modal:not(.chmln-modal-has-body):not(.chmln-modal-has-region-center_left):not(.chmln-modal-has-region-center_right).chmln-modal-has-region-bottom_left .chmln-footer,#chmln .chmln-edit-modal:not(.chmln-modal-has-body):not(.chmln-modal-has-region-center_left):not(.chmln-modal-has-region-center_right).chmln-modal-has-region-bottom_right .chmln-footer,#chmln .chmln-edit-modal:not(.chmln-modal-has-body):not(.chmln-modal-has-region-center_left):not(.chmln-modal-has-region-center_right).chmln-modal-has-region-bottom_center .chmln-footer{margin-top:18px}#chmln .chmln-edit-modal.chmln-tooltip-step .chmln-body-container{margin:8px 12px}#chmln .chmln-edit-modal.chmln-tooltip-step .chmln-pointer-highlight{height:12px;width:12px}#chmln .chmln-edit-modal.chmln-modal-has-body.chmln-floating-dismiss.chmln-dismiss-type-button:not(.chmln-modal-has-cover).chmln-dismiss-position-inside_left .chmln-close,#chmln .chmln-edit-modal.chmln-modal-has-body.chmln-floating-dismiss.chmln-dismiss-type-button:not(.chmln-modal-has-cover).chmln-dismiss-position-inside_right .chmln-close{margin:0;padding:5px}#chmln .chmln-edit-modal.chmln-modal-has-body.chmln-floating-dismiss.chmln-dismiss-type-button:not(.chmln-modal-has-cover).chmln-dismiss-position-inside_left.chmln-dismiss-position-inside_left .chmln-close,#chmln .chmln-edit-modal.chmln-modal-has-body.chmln-floating-dismiss.chmln-dismiss-type-button:not(.chmln-modal-has-cover).chmln-dismiss-position-inside_right.chmln-dismiss-position-inside_left .chmln-close{float:left;padding-left:0;padding-right:10px}#chmln .chmln-edit-modal.chmln-modal-has-body.chmln-floating-dismiss.chmln-dismiss-type-button:not(.chmln-modal-has-cover).chmln-dismiss-position-inside_left.chmln-dismiss-position-inside_right .chmln-close,#chmln .chmln-edit-modal.chmln-modal-has-body.chmln-floating-dismiss.chmln-dismiss-type-button:not(.chmln-modal-has-cover).chmln-dismiss-position-inside_right.chmln-dismiss-position-inside_right .chmln-close{float:right;padding-right:0;padding-left:10px}#chmln .chmln-edit-modal.chmln-modal-has-body .chmln-inner .chmln-iframe-container{margin-top:0}#chmln .chmln-edit-modal.chmln-modal-has-body .chmln-inner .chmln-footer .chmln-progress,#chmln .chmln-edit-modal.chmln-modal-has-body .chmln-inner .chmln-footer .chmln-action{margin-top:0}#chmln .chmln-edit-modal.chmln-progress-type-text .chmln-inner .chmln-progress{border-radius:0}#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen .chmln-step-positioning-container{position:fixed;pointer-events:none}#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen.chmln-top-bar-open .chmln-inner{max-height:calc($max-step-height - $top-bar-height)}#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen.chmln-top-bar-open .chmln-step-positioning-container,#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen.chmln-top-bar-open .chmln-enter-animation-canvas-container{padding-top:120px}#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen.chmln-top-bar-open.chmln-full-width .chmln-step-positioning-container,#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen.chmln-top-bar-open.chmln-full-width .chmln-enter-animation-canvas-container{padding-top:100px}#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen.chmln-modal-position-top_left .chmln-step-positioning-container{justify-content:flex-start;align-items:flex-start}#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen.chmln-modal-position-top_right .chmln-step-positioning-container{justify-content:flex-end;align-items:flex-start}#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen.chmln-modal-position-top_center .chmln-step-positioning-container{justify-content:center;align-items:flex-start}#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen.chmln-modal-position-left_center .chmln-step-positioning-container{justify-content:flex-start;align-items:center}#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen.chmln-modal-position-right_center .chmln-step-positioning-container{justify-content:flex-end;align-items:center}#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen.chmln-modal-position-bottom_left .chmln-step-positioning-container{justify-content:flex-start;align-items:flex-end}#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen.chmln-modal-position-bottom_right .chmln-step-positioning-container{justify-content:flex-end;align-items:flex-end}#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen.chmln-modal-position-bottom_center .chmln-step-positioning-container{justify-content:center;align-items:flex-end}#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen.chmln-modal-position-center .chmln-step-positioning-container{justify-content:center;align-items:center}#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen.chmln-modal-position-top_right.chmln-dismiss-position-outside_right .chmln-inner .chmln-close,#chmln .chmln-edit-modal.chmln-modal-positioning-relative_to_screen.chmln-modal-position-bottom_right.chmln-dismiss-position-outside_right .chmln-inner .chmln-close,#chmln .chmln-edit-modal.chmln-modal-positioning-snap_to_element.chmln-positioned-left.chmln-dismiss-position-outside_right .chmln-inner .chmln-close,#chmln .chmln-edit-modal.chmln-modal-positioning-snap_to_trigger.chmln-positioned-left.chmln-dismiss-position-outside_right .chmln-inner .chmln-close{left:100%;left:calc(100% + 5px);right:auto}#chmln .chmln-edit-modal.chmln-modal-positioning-snap_to_element .chmln-step-positioning-container,#chmln .chmln-edit-modal.chmln-modal-positioning-snap_to_trigger .chmln-step-positioning-container{pointer-events:none;right:auto;bottom:auto;width:0;height:0;overflow:visible;position:static;padding:0}#chmln .chmln-edit-modal.chmln-modal-positioning-snap_to_element .chmln-inner,#chmln .chmln-edit-modal.chmln-modal-positioning-snap_to_trigger .chmln-inner{left:-5000vh;top:-5000vw;pointer-events:auto}#chmln .chmln-edit-modal .chmln-enter-animation-canvas-container{position:fixed;background:transparent;top:0;left:0;right:0;bottom:0;z-index:2147482643;pointer-events:none}#chmln .chmln-edit-modal .chmln-enter-animation-canvas{position:fixed;top:0;left:0;height:100%;width:100%}#chmln .chmln-edit-modal .chmln-inner{position:relative;display:block;max-width:100vw;max-height:87vh;z-index:2147482643;font-size:15px;line-height:1.75em;pointer-events:auto;box-shadow:0 0 6px rgba(0,0,0,0.3)}#chmln .chmln-edit-modal .chmln-inner .chmln-inner-edit-overlay{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;background:transparent}#chmln .chmln-edit-modal .chmln-inner>.chmln-header{width:100%;display:flex;align-items:center;justify-content:flex-end;padding:0 3px 0 0;overflow:visible;position:relative}#chmln .chmln-edit-modal .chmln-inner .chmln-progress{padding:0;margin:0 0 0 18px;display:flex;align-items:center;flex-wrap:nowrap;border-radius:13px;font-size:13px;line-height:1.75em;order:0}#chmln .chmln-edit-modal .chmln-inner .chmln-progress.chmln-edit-placeholder .chmln-progress-dot,#chmln .chmln-edit-modal .chmln-inner .chmln-progress.chmln-edit-placeholder .chmln-progress-dot.chmln-progress-dot-active{background-color:#F9F6FA}#chmln .chmln-edit-modal .chmln-inner .chmln-progress .chmln-progress-dot{border-radius:50%;background-color:#E2DDE5;margin:2px;width:10px;height:10px}#chmln .chmln-edit-modal .chmln-inner .chmln-progress .chmln-progress-dot.chmln-progress-dot-active{background-color:#56455C}#chmln .chmln-edit-modal .chmln-inner .chmln-progress .chmln-progress-text{color:#515E7D;white-space:nowrap}#chmln .chmln-edit-modal .chmln-inner>.chmln-media-body{flex-grow:1;overflow:hidden}#chmln .chmln-edit-modal .chmln-inner>.chmln-media-body>.chmln-step-media{text-align:center;max-height:100%;position:relative;overflow:hidden}#chmln .chmln-edit-modal .chmln-inner>.chmln-media-body>.chmln-step-media.chmln-step-media-video{background:#000000}#chmln .chmln-edit-modal .chmln-inner>.chmln-media-body>.chmln-step-media>.chmln-video{height:100%;width:100%}#chmln .chmln-edit-modal .chmln-inner>.chmln-media-body>.chmln-step-media iframe{display:block;max-width:100%;margin:0 auto}#chmln .chmln-edit-modal .chmln-inner>.chmln-media-body>.chmln-step-media>.chmln-image{display:block;height:auto;width:100%;margin:auto;flex-shrink:0}#chmln .chmln-edit-modal .chmln-inner .chmln-body{flex-grow:1;font-size:1em;line-height:1.75em;padding:0;margin:0;border-radius:0;overflow-y:auto;max-height:none;min-height:1em;position:relative}#chmln .chmln-edit-modal .chmln-inner .chmln-body h1,#chmln .chmln-edit-modal .chmln-inner .chmln-body h2,#chmln .chmln-edit-modal .chmln-inner .chmln-body h3,#chmln .chmln-edit-modal .chmln-inner .chmln-body h4,#chmln .chmln-edit-modal .chmln-inner .chmln-body h5{padding:0}#chmln .chmln-edit-modal .chmln-inner .chmln-body p{line-height:1.75em}#chmln .chmln-edit-modal .chmln-inner .chmln-body.chmln-body-editing{overflow-y:hidden}#chmln .chmln-edit-modal .chmln-inner .chmln-body.chmln-body-editing .chmln-body-content{visibility:hidden}#chmln .chmln-edit-modal .chmln-inner hr{height:1px;opacity:0.2}#chmln .chmln-edit-modal .chmln-inner blockquote{border-left:4px solid;margin:0.5em 10px;padding:0.5em 10px}#chmln .chmln-edit-modal .chmln-inner .chmln-close.chmln-close-text.chmln-edit-close{padding:0}#chmln .chmln-edit-modal .chmln-inner .chmln-close.chmln-close-text.chmln-edit-close input{background:transparent;border-radius:inherit;text-decoration:underline;line-height:1em;padding:3px}#chmln .chmln-edit-modal .chmln-inner .chmln-close{display:flex;align-items:center;justify-content:center;padding:8px;margin:3px 0;position:absolute;right:-40px;top:-3px;border-radius:50%}#chmln .chmln-edit-modal .chmln-inner .chmln-close.chmln-close-text{border-radius:4px;background:transparent;opacity:0.8;line-height:1em;padding:3px 4px}#chmln .chmln-edit-modal .chmln-inner .chmln-close.chmln-edit-placeholder .chmln-icon-fill{fill:#BAB5BD}#chmln .chmln-edit-modal .chmln-inner .chmln-close svg.chmln-close-icon{margin:0;width:14px;height:14px}#chmln .chmln-edit-modal .chmln-footer{flex-grow:1;display:flex;align-items:center;flex-wrap:wrap;padding:0;margin:0}#chmln .chmln-edit-modal .chmln-body-container{margin:18px;display:flex;align-items:center;justify-content:flex-start;flex-wrap:nowrap}#chmln .chmln-edit-modal .chmln-body-container .chmln-body{flex-grow:1}#chmln .chmln-edit-modal .chmln-body-container .chmln-cta-region{display:flex;align-items:center}#chmln .chmln-edit-modal .chmln-body-container .chmln-cta-center_right,#chmln .chmln-edit-modal .chmln-body-container .chmln-cta-center_left{margin:0;flex-wrap:nowrap}#chmln .chmln-edit-modal .chmln-body-container .chmln-cta-center_right{justify-content:flex-end}#chmln .chmln-edit-modal .chmln-body-container .chmln-cta-center_right .chmln-close,#chmln .chmln-edit-modal .chmln-body-container .chmln-cta-center_right .chmln-action{margin:0 0 0 18px}#chmln .chmln-edit-modal .chmln-body-container .chmln-cta-center_right .chmln-close:last-child,#chmln .chmln-edit-modal .chmln-body-container .chmln-cta-center_right .chmln-action:last-child{margin-right:0}#chmln .chmln-edit-modal .chmln-body-container .chmln-cta-center_left{justify-content:flex-start}#chmln .chmln-edit-modal .chmln-body-container .chmln-cta-center_left .chmln-close,#chmln .chmln-edit-modal .chmln-body-container .chmln-cta-center_left .chmln-action{margin:0 18px 0 0}#chmln .chmln-edit-modal .chmln-body-container .chmln-cta-center_left .chmln-close:first-child,#chmln .chmln-edit-modal .chmln-body-container .chmln-cta-center_left .chmln-action:first-child{margin-left:0}#chmln .chmln-edit-modal .chmln-cta{flex-direction:row;justify-content:flex-end;flex-grow:1;flex-wrap:nowrap;align-items:center;padding:18px;padding-top:0}#chmln .chmln-edit-modal .chmln-cta .chmln-cta-region{flex-grow:1;flex-basis:0;display:flex;align-items:center}#chmln .chmln-edit-modal .chmln-cta .chmln-cta-region *:first-child{margin-left:0}#chmln .chmln-edit-modal .chmln-cta .chmln-cta-bottom_left{justify-content:flex-start}#chmln .chmln-edit-modal .chmln-cta .chmln-cta-bottom_center{justify-content:center}#chmln .chmln-edit-modal .chmln-cta .chmln-cta-bottom_right{justify-content:flex-end}#chmln .chmln-edit-modal .chmln-action{margin:0 0 0 18px;order:0;font-size:0.933334em;line-height:1.75em;padding:5px 9px 3px 9px;border:2px solid transparent;text-align:center;border-radius:3px;white-space:nowrap}#chmln .chmln-edit-modal.chmln-body-alignment-left .chmln-body,#chmln .chmln-edit-modal.chmln-body-alignment-left .chmln-edit-body{text-align:left}#chmln .chmln-edit-modal.chmln-body-alignment-right .chmln-body,#chmln .chmln-edit-modal.chmln-body-alignment-right .chmln-edit-body{text-align:right}#chmln .chmln-edit-modal.chmln-body-alignment-center .chmln-body,#chmln .chmln-edit-modal.chmln-body-alignment-center .chmln-edit-body{text-align:center}#chmln .chmln-edit-modal.chmln-modal-size-small .chmln-inner{width:160px}#chmln .chmln-edit-modal.chmln-modal-size-small .chmln-body{margin:10px}#chmln .chmln-edit-modal.chmln-modal-size-small .chmln-step-media iframe{width:160px;height:90px}#chmln .chmln-edit-modal.chmln-modal-size-medium .chmln-inner{width:370px}#chmln .chmln-edit-modal.chmln-modal-size-medium .chmln-step-media iframe{width:370px;height:208px}#chmln .chmln-edit-modal.chmln-modal-size-large .chmln-inner{width:1000px}#chmln .chmln-edit-modal.chmln-modal-size-large .chmln-step-media iframe{width:1000px;height:562px}#chmln .chmln-edit-modal .chmln-iframe-container{margin:18px}#chmln .chmln-edit-modal .chmln-iframe-container .chmln-iframe-embed{width:100%}#chmln .chmln-edit-modal .chmln-highlight{pointer-events:auto;position:absolute;top:0;bottom:0;left:0;right:0;z-index:2147482642}#chmln .chmln-edit-modal .chmln-pointer-highlight{position:absolute;height:16px;width:16px;border:0 none;margin:0;padding:0;background-color:white;z-index:-1}#chmln .chmln-edit-modal .chmln-pointer-highlight.chmln-pointer-side-left{box-shadow:-1px 1px 2px rgba(0,0,0,0.15);transform:translate(50%,0) rotate(45deg) skew(-10deg,-10deg);border-bottom-left-radius:3px}#chmln .chmln-edit-modal .chmln-pointer-highlight.chmln-pointer-side-right{box-shadow:1px -1px 2px rgba(0,0,0,0.15);transform:translate(-50%,0) rotate(45deg) skew(-10deg,-10deg);border-top-right-radius:3px}#chmln .chmln-edit-modal .chmln-pointer-highlight.chmln-pointer-side-top{box-shadow:-1px -1px 2px rgba(0,0,0,0.15);transform:translate(50%,50%) rotate(45deg) skew(10deg,10deg);border-top-left-radius:3px}#chmln .chmln-edit-modal .chmln-pointer-highlight.chmln-pointer-side-bottom{box-shadow:1px 1px 2px rgba(0,0,0,0.15);transform:translate(50%,-50%) rotate(45deg) skew(10deg,10deg);border-bottom-right-radius:3px}#chmln .chmln-edit-modal .chmln-pointer-highlight.chmln-pointer-side-none{display:none}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-top-editing-highlight,#chmln .chmln-edit-modal.chmln-edit-mode .chmln-top-editable-highlight:hover{box-shadow:0 0 0 2px #a364b7 !important}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-top-editable-highlight{cursor:pointer}#chmln .chmln-edit-modal.chmln-edit-mode input,#chmln .chmln-edit-modal.chmln-edit-mode textarea{box-shadow:inset 0 0 3px rgba(0,0,0,0.6)}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-inner{cursor:pointer}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-inner .chmln-edit-placeholder{color:#BAB5BD;cursor:pointer}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-inner .chmln-edit-placeholder.chmln-action-placeholder{text-decoration:underline;font-style:italic}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-iframe-container{position:relative}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-iframe-container .chmln-iframe-overlay{cursor:pointer;position:absolute;top:0;right:0;bottom:0;left:0;padding:0;margin:0}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-iframe-container.chmln-iframe-editing .chmln-iframe-embed{visibility:hidden}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-iframe-container.chmln-iframe-editing .chmln-iframe-overlay{pointer-events:none}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-iframe-container.chmln-iframe-editing [name="iframe_embed_code"]{position:absolute;top:0;right:0;bottom:0;left:0}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-action:not(.chmln-edit-action):hover{text-decoration:underline}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-action input{box-shadow:none;border:0 none;text-decoration:underline;height:1.75em}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-edit-body,#chmln .chmln-edit-modal.chmln-edit-mode .chmln-edit-embed{width:calc(100% - 4px);min-height:56px;margin:2px;box-sizing:border-box;padding:5px}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-step-media .chmln-step-media-edit-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:transparent;z-index:2}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-step-media .chmln-step-media-edit-overlay.chmln-top-editing-highlight,#chmln .chmln-edit-modal.chmln-edit-mode .chmln-step-media .chmln-step-media-edit-overlay.chmln-top-editable-highlight:hover{box-shadow:inset 0 0 0 2px #a364b7 !important}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-media-placeholder{color:#666;background-color:#FAF6FA;padding:30px;font-weight:bold;border:2px dashed #E3DCE6;display:flex;align-items:center;justify-content:center}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-media-placeholder svg{width:48px}#chmln .chmln-edit-modal.chmln-edit-mode .chmln-media-placeholder svg .chmln-icon-fill{fill:#E3DCE6}@-webkit-keyframes chmln-pulse{from{-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}50%{-webkit-transform:scale3d(1.05,1.05,1.05);transform:scale3d(1.05,1.05,1.05)}to{-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}}@keyframes chmln-pulse{from{-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}50%{-webkit-transform:scale3d(1.05,1.05,1.05);transform:scale3d(1.05,1.05,1.05)}to{-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}}.chmln-pulse{-webkit-animation-name:chmln-pulse;animation-name:chmln-pulse}@-webkit-keyframes chmln-shake{from,to{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}10%,30%,50%,70%,90%{-webkit-transform:translate3d(-10px,0,0);transform:translate3d(-10px,0,0)}20%,40%,60%,80%{-webkit-transform:translate3d(10px,0,0);transform:translate3d(10px,0,0)}}@keyframes chmln-shake{from,to{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}10%,30%,50%,70%,90%{-webkit-transform:translate3d(-10px,0,0);transform:translate3d(-10px,0,0)}20%,40%,60%,80%{-webkit-transform:translate3d(10px,0,0);transform:translate3d(10px,0,0)}}.chmln-shake{-webkit-animation-name:chmln-shake;animation-name:chmln-shake}@-webkit-keyframes chmln-fade_in{from{opacity:0}to{opacity:1}}@keyframes chmln-fade_in{from{opacity:0}to{opacity:1}}.chmln-fade_in{-webkit-animation-name:chmln-fade_in;animation-name:chmln-fade_in}@-webkit-keyframes chmln-fade_in_down{from{opacity:0;-webkit-transform:translate3d(0,-33%,0);transform:translate3d(0,-33%,0)}to{opacity:1;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}}@keyframes chmln-fade_in_down{from{opacity:0;-webkit-transform:translate3d(0,-33%,0);transform:translate3d(0,-33%,0)}to{opacity:1;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}}.chmln-fade_in_down{-webkit-animation-name:chmln-fade_in_down;animation-name:chmln-fade_in_down}@-webkit-keyframes chmln-fade_in_left{from{opacity:0;-webkit-transform:translate3d(-33%,0,0);transform:translate3d(-33%,0,0)}to{opacity:1;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}}@keyframes chmln-fade_in_left{from{opacity:0;-webkit-transform:translate3d(-33%,0,0);transform:translate3d(-33%,0,0)}to{opacity:1;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}}.chmln-fade_in_left{-webkit-animation-name:chmln-fade_in_left;animation-name:chmln-fade_in_left}@-webkit-keyframes chmln-fade_in_right{from{opacity:0;-webkit-transform:translate3d(33%,0,0);transform:translate3d(33%,0,0)}to{opacity:1;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}}@keyframes chmln-fade_in_right{from{opacity:0;-webkit-transform:translate3d(33%,0,0);transform:translate3d(33%,0,0)}to{opacity:1;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}}.chmln-fade_in_right{-webkit-animation-name:chmln-fade_in_right;animation-name:chmln-fade_in_right}@-webkit-keyframes chmln-fade_in_up{from{opacity:0;-webkit-transform:translate3d(0,33%,0);transform:translate3d(0,33%,0)}to{opacity:1;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}}@keyframes chmln-fade_in_up{from{opacity:0;-webkit-transform:translate3d(0,33%,0);transform:translate3d(0,33%,0)}to{opacity:1;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}}.chmln-fade_in_up{-webkit-animation-name:chmln-fade_in_up;animation-name:chmln-fade_in_up}@-webkit-keyframes chmln-fade_out{from{opacity:1}to{opacity:0}}@keyframes chmln-fade_out{from{opacity:1}to{opacity:0}}.chmln-fade_out{-webkit-animation-name:chmln-fade_out;animation-name:chmln-fade_out}.chmln-animated{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}@media (prefers-reduced-motion){.chmln-animated{-webkit-animation:unset !important;animation:unset !important;-webkit-transition:none !important;transition:none !important}}.chmln-animated.chmln-fade_in,.chmln-animated.chmln-fade_out{-webkit-animation-duration:750ms;animation-duration:750ms}.chmln-animated.chmln-animated-0750{-webkit-animation-duration:750ms;animation-duration:750ms}.chmln-animated.chmln-animated-0500{-webkit-animation-duration:500ms;animation-duration:500ms}.chmln-animated.chmln-animated-0250{-webkit-animation-duration:250ms;animation-duration:250ms}.chmln-animated.chmln-animated-0100{-webkit-animation-duration:100ms;animation-duration:100ms}</style></div><div id="ads"></div><iframe name="_hjRemoteVarsFrame" title="_hjRemoteVarsFrame" id="_hjRemoteVarsFrame" src="./SitePoint Premium_files/rcj-da10bd4908deb9e19dfde013ec3fe4ff.html" style="display: none !important; width: 1px !important; height: 1px !important; opacity: 0 !important; pointer-events: none !important;"></iframe><div><div id="_hj_feedback_container">                <style type="text/css">                    /*reset css*/                    ._hj-f5b2a1eb-9b07_widget, ._hj-f5b2a1eb-9b07_widget * {                        line-height: normal;                        font-family: Arial, sans-serif, Tahoma !important;                        text-transform: initial !important;                        letter-spacing: normal !important;                    }                    ._hj-f5b2a1eb-9b07_widget, ._hj-f5b2a1eb-9b07_widget div {                        height: auto;                    }                    ._hj-f5b2a1eb-9b07_widget div,                    ._hj-f5b2a1eb-9b07_widget span,                    ._hj-f5b2a1eb-9b07_widget p,                    ._hj-f5b2a1eb-9b07_widget a,                    ._hj-f5b2a1eb-9b07_widget img,                    ._hj-f5b2a1eb-9b07_widget strong,                    ._hj-f5b2a1eb-9b07_widget form,                    ._hj-f5b2a1eb-9b07_widget label {                        border: 0;                        outline: 0;                        font-size: 100%;                        vertical-align: baseline;                        background: transparent;                        margin: 0;                        padding: 0;                        float: none !important;                    }                    ._hj-f5b2a1eb-9b07_widget span {color:inherit}                    ._hj-f5b2a1eb-9b07_widget ol,                    ._hj-f5b2a1eb-9b07_widget ul,                    ._hj-f5b2a1eb-9b07_widget li {                        list-style-type:none !important;                        margin: 0 !important;                        padding: 0 !important;                     }                    ._hj-f5b2a1eb-9b07_widget li:before,                    ._hj-f5b2a1eb-9b07_widget li:after {                        content: none !important;                    }                    ._hj-f5b2a1eb-9b07_widget hr {                        display:block;                        height:1px;                        border:0;                        border-top:1px                        solid #ccc;                        margin:1em 0;                        padding:0;                    }                    ._hj-f5b2a1eb-9b07_widget input[type=submit],                    ._hj-f5b2a1eb-9b07_widget input[type=button],                    ._hj-f5b2a1eb-9b07_widget button {                        margin: 0;                        padding:0;                        float: none !important;                    }                    ._hj-f5b2a1eb-9b07_widget input,                    ._hj-f5b2a1eb-9b07_widget select,                    ._hj-f5b2a1eb-9b07_widget a img {                        vertical-align:middle;                    }                    ._hj-f5b2a1eb-9b07_widget *:after, ._hj-f5b2a1eb-9b07_widget *::before {                        -webkit-box-sizing: initial;                        -moz-box-sizing: initial;                        box-sizing: initial;                    }                    /*******************                     * GENERIC                    ********************/                    @font-face {                        font-family: "hotjar";                        src: url("https://static.hotjar.com/static/client/modules/assets/font-hotjar_5.eot?r9zir0");                        src: url("https://static.hotjar.com/static/client/modules/assets/font-hotjar_5.eot?r9zir0#iefix") format("embedded-opentype"),                             url("https://static.hotjar.com/static/client/modules/assets/font-hotjar_5.woff2?r9zir0") format("woff2"),                             url("https://static.hotjar.com/static/client/modules/assets/font-hotjar_5.ttf?r9zir0") format("truetype"),                             url("https://static.hotjar.com/static/client/modules/assets/font-hotjar_5.woff?r9zir0") format("woff"),                             url("https://static.hotjar.com/static/client/modules/assets/font-hotjar_5.svg?r9zir0#hotjar") format("svg");                        font-weight: normal;                        font-style: normal;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon {                        speak: none !important;                        font-style: normal !important;                        font-weight: normal !important;                        font-variant: normal !important;                        text-transform: none !important;                        overflow-wrap: normal !important;                        word-break: normal !important;                        word-wrap: normal !important;                        white-space: nowrap !important;                        line-height: normal !important;                        -webkit-font-smoothing: antialiased !important;                        -moz-osx-font-smoothing: grayscale !important;                    }                                        div._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon,                    div._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon:before,                    div._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon:after,                    div._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon *,                    div._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon *:before,                    div._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon *:after {                        font-family: "hotjar" !important;                        display: inline-block !important;                        direction: ltr !important;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon:before {                        color: inherit !important;                    }                                        ._hj-f5b2a1eb-9b07_icon-left:before     {content: "\e805";}                    ._hj-f5b2a1eb-9b07_icon-down:before     {content: "\e800";}                    ._hj-f5b2a1eb-9b07_icon-up:before       {content: "\e801";}                    ._hj-f5b2a1eb-9b07_icon-right:before    {content: "\e802";}                    ._hj-f5b2a1eb-9b07_icon-x:before        {content: "\e803";}                    ._hj-f5b2a1eb-9b07_icon-ok:before       {content: "\e804";}                    ._hj-f5b2a1eb-9b07_icon-hotjar:before   {content: "\e806";}                    ._hj-f5b2a1eb-9b07_icon-select-element:before   {content: "\e91a";}                                        /*generic css*/                    body._hj-f5b2a1eb-9b07_fullscreen_page {                        height: 100% !important;                        width: 100% !important;                    }                                        body._hj-f5b2a1eb-9b07_position_fixed {                        position: fixed;                        -webkit-overflow-scrolling: touch;                    }                                        ._hj-f5b2a1eb-9b07_lower_zindex:not(._hj-f5b2a1eb-9b07_widget) {                        z-index: 2147483600 !important;                    }                    ._hj-f5b2a1eb-9b07_widget {                        font-size:13px !important;                        position: fixed;                        z-index: 2147483640;                        bottom: -400px;                        right: 100px;                        width: 300px;                        -webkit-border-radius: 5px 5px 0 0;                        -moz-border-radius: 5px 5px 0 0;                        border-radius: 5px 5px 0 0;                        -webkit-transform: translateZ(0) !important;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_position_left {                        right: auto;                        left: 100px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_rounded_corners {                        -webkit-border-radius: 3px;                        -moz-border-radius: 3px;                        border-radius: 3px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_shadow {                        -webkit-box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.15);                        -moz-box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.15);                        box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.15);                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_transition {                        -webkit-transition: all .2s ease-in-out;                        -moz-transition: all .2s ease-in-out;                        -o-transition: all .2s ease-in-out;                        -ms-transition: all .2s ease-in-out;                        transition: all .2s ease-in-out;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_transition_duration_0 {                        -webkit-transition-duration: 0s;                        -moz-transition-duration: 0s;                        -o-transition-duration: 0s;                        -ms-transition-duration: 0s;                        transition-duration: 0s;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_pull_left {                        float: left !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_pull_right {                        float: right !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_clear_both {display: block !important; clear: both !important;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_hidden {display: none !important;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_link_no_underline,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_link_no_underline:hover {                        text-decoration: none !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_wordwrap {                        word-break: break-word;                        word-wrap: break-word;                    }                    /*common css*/                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_centered {                        right:50%;                        margin-right: -150px;                        left: auto;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_state {display: none;}                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_icon {                        background-repeat: no-repeat;                        width: 16px;                        height: 16px;                        display: -moz-inline-stack;                        display: inline-block !important;                        zoom: 1;                        *display: inline !important;                        vertical-align: top;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_open_close {                        text-align: center;                        position: absolute;                        top: -18px;                        right: 20px;                        width: 40px;                        height: 18px;                        padding-top: 2px;                        cursor: pointer;                        -webkit-border-radius: 5px 5px 0 0;                        -moz-border-radius: 5px 5px 0 0;                        border-radius: 5px 5px 0 0;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_open_close ._hj-f5b2a1eb-9b07_widget_icon {                        background-position: -32px 0;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_open_close::before {                        content: "";                        position: absolute;                        left: -4px;                        right: -4px;                        bottom: -8px;                        height: 8px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_hidden_handle {                        display:none;                        height: 4px;                        cursor:pointer;                        -webkit-border-radius: 5px 5px 0 0;                        -moz-border-radius: 5px 5px 0 0;                        border-radius: 5px 5px 0 0;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_title {                        font-weight: bold;                        text-align: center;                        padding: 12px !important;                        margin: 0;                        line-height: 17px !important;                        min-height: 17px;                        word-break: break-word;                        word-wrap: break-word;                        cursor: pointer;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_initiator {                        display: none;                        padding: 0 12px 12px 12px;                        text-align: center;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_initiator button {                        padding-left: 20px;                        padding-right: 20px;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_clear,                     ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_primary {                        cursor: pointer;                        text-decoration: none !important;                        font-size: 13px !important;                        font-weight: bold !important;                        padding: 7px 10px !important;                        border: 0 !important;                        outline: 0 !important;                        height: initial !important;                        min-height: initial !important;                        display: -moz-inline-stack;                        display: inline-block;                        *display: inline;                        vertical-align: top;                        width: auto !important;                        min-width: initial !important;                        zoom: 1;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn:after,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_clear:after,                     ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_primary:after {                        content:none !important;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_primary {                        background: #00C764 !important;                        color: white;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_primary:hover,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_primary:focus,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_primary:active {                        background: #00a251 !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_clear {                        background: transparent !important;                        font-weight: normal !important;                        text-decoration: underline !important;                        color:  !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_clear:hover,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_clear:focus,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_clear:active {                        background: transparent !important;                        color:  !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled:hover,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled:focus,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled:active {                        cursor: default;                        -webkit-box-shadow: none;                        -moz-box-shadow: none;                        box-shadow: none;                    }                                        /*content*/                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content {padding:0 12px;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content_overflow {                        max-height: 280px;                        overflow-y: auto;                        overflow-x: hidden;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_short ._hj-f5b2a1eb-9b07_widget_content {                        padding:0 11px 0 12px;                        max-height: 120px;                        overflow-y: auto;                        overflow-x: hidden;                    }                                        /*open ended*/                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_input_field {                        font-family: Arial, sans-serif, Tahoma;                        font-size: 14px;                        color: #333 !important;                        padding: 6px !important;                        text-indent: 0 !important;                        height: 30px;                        width: 100%;                        min-width: 100%;                        margin: 0 0 12px 0;                        background: white;                        border: 1px solid  !important;                        -webkit-box-sizing: border-box;                        -moz-box-sizing: border-box;                        box-sizing: border-box;                        outline: none !important;                        max-width: none !important;                        float: none;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_input_field:focus {                        border: 1px solid #00a251;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content textarea._hj-f5b2a1eb-9b07_input_field {                        resize: none; height: 100px;                    }                                        /*close ended*/                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_button_radio_checkbox {                        position: relative;                        min-height: 45px;                        text-align:left !important;                        height:auto !important;                        height: 45px;                        -webkit-box-sizing: border-box;                        -moz-box-sizing: border-box;                        box-sizing: border-box;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_button_radio_checkbox span._hj-f5b2a1eb-9b07_widget_icon {                        -webkit-border-radius: 30px;                        -moz-border-radius: 30px;                        border-radius: 30px;                        border: 2px solid #AAA;                        width: 22px;                        height: 22px;                        display: block;                        position: absolute;                        left: 12px;                        top: 50%;                        margin-top: -14px;                        background-position: -64px -100px;                        -webkit-box-sizing: content-box;                        -moz-box-sizing: content-box;                        box-sizing: content-box;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content                        ._hj-f5b2a1eb-9b07_button_radio_checkbox span._hj-f5b2a1eb-9b07_radio_checkbox_text {                        text-align: left !important;                        padding: 14px 20px 14px 50px;                        position: relative;                        display: block;                        word-break: break-word;                        word-wrap: break-word;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_button_radio_checkbox_full {                        margin-left:-12px;                        margin-right: -12px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content                        ._hj-f5b2a1eb-9b07_button_radio_checkbox._hj-f5b2a1eb-9b07_button_radio_checkbox_active span {                        border-color: white;                        background-position: -97px 4px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_button_checkbox span._hj-f5b2a1eb-9b07_widget_icon {                        -webkit-border-radius: 4px;                        -moz-border-radius: 4px;                        border-radius: 4px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_double_control {                        margin: 0 0 12px 0;                        width: 100%;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_double_control ._hj-f5b2a1eb-9b07_double_first {                        min-width:49% !important;                        width:49% !important;                        float:left !important;                        margin-bottom: 0;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_double_control ._hj-f5b2a1eb-9b07_double_second {                        min-width:49% !important;                        width:49% !important;                        float:left !important;                        margin-bottom: 0;                        margin-left:2%;                    }                                        /* footer*/                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer {width: 100%;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left {                        padding: 21px 0 0 12px; font-size: 11px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left a,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left a:hover,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left a:focus,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left a:active {                        text-decoration: underline;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left span {                        background-position: -16px 0; margin-right: 4px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right {padding: 12px 12px 12px 0;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right button {padding-right: 5px;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right button span {                        background-position: -64px 0;                        margin-left: 8px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right button._hj-f5b2a1eb-9b07_btn_disabled span {                        background-position: -48px 0;                    }                                        /*state: hidden*/                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_hidden ._hj-f5b2a1eb-9b07_widget_open_close                        ._hj-f5b2a1eb-9b07_widget_icon {background-position: 0 0;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_hidden ._hj-f5b2a1eb-9b07_widget_title {display: none;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_hidden ._hj-f5b2a1eb-9b07_widget_hidden_handle {display: block;}                                        /*state: collapsed */                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_collapsed ._hj-f5b2a1eb-9b07_widget_initiator {display: block;}                                        /*state: open*/                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_open ._hj-f5b2a1eb-9b07_widget_state_open {display: block;}                                        /*state: thankyou*/                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_thankyou ._hj-f5b2a1eb-9b07_widget_state_thankyou,                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_thankyou_consent ._hj-f5b2a1eb-9b07_widget_state_thankyou_consent {display: block;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_thankyou ._hj-f5b2a1eb-9b07_widget_open_close,                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_thankyou_consent ._hj-f5b2a1eb-9b07_widget_open_close {display: none;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_thankyou ._hj-f5b2a1eb-9b07_widget_title,                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_thankyou_consent ._hj-f5b2a1eb-9b07_widget_title {display: none;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_thankyou ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right ._hj-f5b2a1eb-9b07_btn span,                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_widget_thankyou_consent ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right ._hj-f5b2a1eb-9b07_btn span {                        background-position: -80px 0;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_thankyou_message {text-align: center; padding: 20px; margin: 0;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_thankyou_message button {margin-top: 12px; padding: 7px 20px !important;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_thankyou_message ._hj-f5b2a1eb-9b07_consent_message_title {                        display: block;                        font-weight: bold;                        font-size: 14px;                        margin-bottom: 16px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_thankyou_message ._hj-f5b2a1eb-9b07_consent_message_text,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_thankyou_message ._hj-f5b2a1eb-9b07_consent_message_text a {                    color:  !important;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_thankyou_message ._hj-f5b2a1eb-9b07_consent_actions button {                        font-size: 18px !important;                        margin: 20px 5px 0 5px;                        padding: 7px 10px !important;                        width: 50px !important;                    }                    /* theme css */                    ._hj-f5b2a1eb-9b07_widget {                        background:  !important;                        color:  !important;                    }                    ._hj-f5b2a1eb-9b07_widget a, ._hj-f5b2a1eb-9b07_widget a:link, ._hj-f5b2a1eb-9b07_widget a:hover, ._hj-f5b2a1eb-9b07_widget a:active {                        color:  !important;                    }                    ._hj-f5b2a1eb-9b07_widget p {color:  !important;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_open_close::before {                        background:  !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_icon {                        background-image:                             url(https://static.hotjar.com/static/client/modules/assets/widget_icons_light.png) !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_open_close {background:  !important;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_hidden_handle {                        background:  !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn {                        background:  !important;                        color:  !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn:hover, ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn:focus,  ._hj-f5b2a1eb-9b07_btn:active {                        background: #666 !important;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_input_field {                        border: 1px solid  !important;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_button_radio_checkbox {                        border-bottom: 1px solid  !important;                        border-top: 1px solid  !important;                        background:  !important;                        cursor: pointer !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_button_radio_checkbox_last {border-bottom:0 !important;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_button_radio_checkbox:hover {                        background:  !important;                        color: ;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_button_radio_checkbox._hj-f5b2a1eb-9b07_button_radio_checkbox_active,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_button_radio_checkbox._hj-f5b2a1eb-9b07_button_radio_checkbox_active:hover {                        background:  !important;                        color: white !important;                        cursor: default;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch {                        position: relative;                        display: inline-block;                        width: 46px;                        height: 28px;                        vertical-align: middle;                        margin: -3px 8px 0 0;                    }                                        ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_switch {                        margin: -3px 0 0 8px;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch > input {                        cursor: pointer;                        display: block !important;                        width: 46px;                        height: 28px;                        position: absolute;                        left: 0;                        right: 0;                        z-index: 2;                        opacity: 0;                        margin: 0;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch > input + label {                        cursor: pointer;                        position: absolute;                        top: 0;                        left: 0;                        right: 0;                        bottom: 0;                        background: rgba(0,0,0,1);                        border: 2px solid rgba(255,255,255,.3);                        border-radius: 100px;                        -webkit-transition: 400ms all;                           -moz-transition: 400ms all;                                transition: 400ms all;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch > input:checked + label {                        background: rgba(0,0,0,.3);                        border-color: transparent;                        -webkit-transition: 250ms all;                           -moz-transition: 250ms all;                                transition: 250ms all;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch > input + label:before {                        content: "";                        transition: 300ms all;                        position: absolute;                        left: 0;                        top: 0;                        display: block;                        width: 24px;                        height: 24px;                        border-radius: 40px;                        background-color: #ffffff;                        background-position: center center;                        background-repeat: no-repeat;                        background-size: 5px;                        -webkit-box-shadow: 0 0 12px 0 rgba(0,0,0,.06), 0 0 0 0 rgba(0,0,0,.06), 0 6px 10px 0 rgba(0,0,0,.15), 0 0 2px 0 rgba(0,0,0,.07), 0 4px 6px 0 rgba(0,0,0,.06), 0 1px 1px 0 rgba(0,0,0,.11);                        -moz-box-shadow: 0 0 12px 0 rgba(0,0,0,.06), 0 0 0 0 rgba(0,0,0,.06), 0 6px 10px 0 rgba(0,0,0,.15), 0 0 2px 0 rgba(0,0,0,.07), 0 4px 6px 0 rgba(0,0,0,.06), 0 1px 1px 0 rgba(0,0,0,.11);                        box-shadow: 0 0 12px 0 rgba(0,0,0,.06), 0 0 0 0 rgba(0,0,0,.06), 0 6px 10px 0 rgba(0,0,0,.15), 0 0 2px 0 rgba(0,0,0,.07), 0 4px 6px 0 rgba(0,0,0,.06), 0 1px 1px 0 rgba(0,0,0,.11);                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch > input + label > span {                        position: absolute;                        z-index: 3;                        color: #f4364c;                        background-color: transparent !important;                        border: 0 !important;                        width: 13px !important;                        height: 14px !important;                        left: 6px;                        top: 5px;                        margin: 0 !important;                        opacity: 0;                        font-size: 14px;                        pointer-events: none !important;                        -webkit-transition: 250ms all;                           -moz-transition: 250ms all;                                transition: 250ms all;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch > input:checked + label:before {                        left: 18px;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch > input:checked + label > span {                        left: 24px;                        opacity: 1;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_switch > input:checked + label > span:after {                        content: initial !important;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer {                        border-top: 1px solid  !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left a,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left a:hover {                        color:  !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled:hover,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled:focus,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled:active {                        color:  !important;                        background:  !important;                    }                                        /*light theme css*/                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_skin_light, ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_skin_light ._hj-f5b2a1eb-9b07_widget_open_close {                        -webkit-box-shadow: 0 0 7px 0 rgba(0, 0, 0, 0.3) !important;                        -moz-box-shadow: 0 0 7px 0 rgba(0, 0, 0, 0.3) !important;                        box-shadow: 0 0 7px 0 rgba(0, 0, 0, 0.3) !important;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_skin_light ._hj-f5b2a1eb-9b07_widget_icon {                        background-image:                             url(https://static.hotjar.com/static/client/modules/assets/widget_icons_light.png) !important;                    }                                        /*dark theme css*/                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_skin_dark, ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_skin_dark ._hj-f5b2a1eb-9b07_widget_open_close {                        -webkit-box-shadow: 0 0 7px 0 rgba(0, 0, 0, 0.6) !important;                        -moz-box-shadow: 0 0 7px 0 rgba(0, 0, 0, 0.6) !important;                        box-shadow: 0 0 7px 0 rgba(0, 0, 0, 0.6) !important;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_skin_dark ._hj-f5b2a1eb-9b07_widget_icon {                        background-image:                             url(https://static.hotjar.com/static/client/modules/assets/widget_icons_dark.png) !important;                    }                                        /*right-to-left css*/                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl, ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl * {direction: rtl !important;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left {direction: ltr !important;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right button {padding-right: 10px;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right button span {margin-left: 0;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl._hj-f5b2a1eb-9b07_widget_open ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right button span {                        display: none;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_button_radio_checkbox {                        text-align:right !important;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_button_radio_checkbox                        span._hj-f5b2a1eb-9b07_widget_icon {                        left: auto;                        right: 12px;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_button_radio_checkbox                        span._hj-f5b2a1eb-9b07_radio_checkbox_text {                        text-align:right !important;                        padding: 14px 50px 14px 20px;                    }                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_double_control ._hj-f5b2a1eb-9b07_double_first {                        float:right;                        margin-left:2%;}                    ._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl ._hj-f5b2a1eb-9b07_double_control ._hj-f5b2a1eb-9b07_double_second {                        float:left;                        margin-left:0;}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_thankyou_message ._hj-f5b2a1eb-9b07_more_info_link { text-decoration: underline !important; }                                        /* legal footer */                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_legal {                        border-top: 0 !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_legal ._hj-f5b2a1eb-9b07_pull_left {                        padding: 0px 0px 12px 12px;                        font-size: 11px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_legal ._hj-f5b2a1eb-9b07_pull_right {                        padding: 0px 12px 12px 0px;                        font-size: 11px;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_legal ._hj-f5b2a1eb-9b07_pull_right a {                        color:  !important;                    }                    #_hj-f5b2a1eb-9b07_feedback[data-state="consent"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_widget_legal ._hj-f5b2a1eb-9b07_pull_left,                     #_hj-f5b2a1eb-9b07_feedback[data-state="consent"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_widget_legal ._hj-f5b2a1eb-9b07_pull_right a {                        color: #333 !important;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_legal ._hj-f5b2a1eb-9b07_pull_left a,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_legal ._hj-f5b2a1eb-9b07_pull_left a:hover,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_legal ._hj-f5b2a1eb-9b07_pull_left a:focus,                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_legal ._hj-f5b2a1eb-9b07_pull_left a:active {                        text-decoration: underline !important;                    }                    </style><style type="text/css">                    /* Faces (emotion) */                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon_emotion_default *:before {                        color: #3c3c3c;                        margin-left: -1.3984375em;                    }                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon_emotion_default .path1:before {                        content: "\e900";                        color: #ffd902;                        margin: 0;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon_emotion_default._hj-f5b2a1eb-9b07_bottom_position_launcher *:before{color: #ffffff}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon_emotion_default._hj-f5b2a1eb-9b07_bottom_position_launcher .path1:before {color: #f4364c}                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon_emotion_default[data-emotion-score="0"] .path2:before    {content: "\e901";}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon_emotion_default[data-emotion-score="1"] .path2:before    {content: "\e903";}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon_emotion_default[data-emotion-score="2"] .path2:before    {content: "\e905";}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon_emotion_default[data-emotion-score="3"] .path2:before    {content: "\e907";}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon_emotion_default[data-emotion-score="4"] .path2:before    {content: "\e909";}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon_emotion_default[data-emotion-score="wink"] .path2:before {content: "\e90b";}                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon_emotion_smiley {                        color: #f4364c;                        font-size: 34px;                    }                                        ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon_emotion_smiley[data-emotion-score="0"]:before {content: "\e91b";}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon_emotion_smiley[data-emotion-score="1"]:before {content: "\e91f";}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon_emotion_smiley[data-emotion-score="2"]:before {content: "\e91e";}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon_emotion_smiley[data-emotion-score="3"]:before {content: "\e91c";}                    ._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon_emotion_smiley[data-emotion-score="4"]:before {content: "\e91d";}                                        /* Only load the images when needed.*/                                                                                                    /*******************                     * MAIN CONTAINER                    ********************/                    #_hj-f5b2a1eb-9b07_feedback {                        bottom: 0;                        right: 0;                    }                                        #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl {                        direction: ltr !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="bottom_left"],                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_left"] {                        bottom: 0;                        left: 0;                        right: auto;                    }                                        /*******************                     * MINIMIZED STATE                    ********************/                    #_hj-f5b2a1eb-9b07_feedback #_hj-f5b2a1eb-9b07_feedback_minimized {                        display: none;                        opacity: .96;                        height: 60px;                        position: fixed;                        direction: ltr !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback #_hj-f5b2a1eb-9b07_feedback_minimized:hover {                        opacity: 1;                    }                                        /* BOTTOM LEFT AND BOTTOM RIGHT */                    #_hj-f5b2a1eb-9b07_feedback ._hj-f5b2a1eb-9b07_hotjar_buddy {                        position: absolute;                        right: 0;                        bottom: 0;                        height: 50px;                        width: 52px;                        font-size: 37px;                        cursor: pointer;                    }                                        #_hj-f5b2a1eb-9b07_feedback ._hj-f5b2a1eb-9b07_hotjar_buddy > span {                        position: relative;                        z-index: 2;                    }                                        #_hj-f5b2a1eb-9b07_feedback #_hj-f5b2a1eb-9b07_feedback_minimized ._hj-f5b2a1eb-9b07_hotjar_buddy:after {                        content: "";                        position: absolute;                        z-index: 1;                        top: 17px;                        left: 25px;                        background: rgba(0, 0, 0, .48);                        width: 6px;                        height: 1px;                        -webkit-box-shadow: 0 2px 18px 18px rgba(0, 0, 0, .48);                        -moz-box-shadow: 0 2px 18px 18px rgba(0, 0, 0, .48);                        box-shadow: 0 2px 18px 18px rgba(0, 0, 0, .48);                        -webkit-transition: all .2s ease-in-out;                        -moz-transition: all .2s ease-in-out;                        -o-transition: all .2s ease-in-out;                        -ms-transition: all .2s ease-in-out;                        transition: all .2s ease-in-out;                    }                                        #_hj-f5b2a1eb-9b07_feedback #_hj-f5b2a1eb-9b07_feedback_minimized:hover ._hj-f5b2a1eb-9b07_hotjar_buddy:after {                        -webkit-box-shadow: 0 2px 18px 18px rgba(0, 0, 0, .65);                        -moz-box-shadow: 0 2px 18px 18px rgba(0, 0, 0, .65);                        box-shadow: 0 2px 18px 18px rgba(0, 0, 0, .65);                    }                                        #_hj-f5b2a1eb-9b07_feedback ._hj-f5b2a1eb-9b07_feedback_minimized_message {                        opacity: 0;                        pointer-events: none;                        position: absolute;                        bottom: 11px;                        padding: 12px 15px;                        width: 180px;                        text-align: center;                        font-size: 12px !important;                        cursor: pointer;                        background: #ffffff;                        -webkit-box-shadow: 0 2px 18px 0 rgba(0,0,0,.3);                        -moz-box-shadow: 0 2px 18px 0 rgba(0,0,0,.3);                        box-shadow: 0 2px 18px 0 rgba(0,0,0,.3);                        -webkit-box-sizing: border-box;                        -moz-box-sizing: border-box;                        box-sizing: border-box;                    }                                        #_hj-f5b2a1eb-9b07_feedback ._hj-f5b2a1eb-9b07_feedback_minimized_message:before {                        content: "";                        width: 1px;                        height: 1px;                        position: absolute;                        bottom: 13px;                        border-top: 6px solid transparent;                        border-bottom: 6px solid transparent;                    }                                        #_hj-f5b2a1eb-9b07_feedback ._hj-f5b2a1eb-9b07_feedback_minimized_message ._hj-f5b2a1eb-9b07_feedback_minimized_message_close {                        opacity: 0;                        position: absolute;                        top: -9px;                        right: -9px;                        width: 21px;                        height: 21px;                        -webkit-border-radius: 50%;                        -moz-border-radius: 50%;                        border-radius: 50%;                        font-size: 11px;                        line-height: 21px !important;                        text-align: center;                        cursor: pointer;                        background-color: #f4364c;                        color: #ffffff;                    }                    #_hj-f5b2a1eb-9b07_feedback #_hj-f5b2a1eb-9b07_feedback_minimized_message:hover ._hj-f5b2a1eb-9b07_feedback_minimized_message_close {                        opacity: 1;                    }                                        #_hj-f5b2a1eb-9b07_feedback ._hj-f5b2a1eb-9b07_feedback_minimized_message span {                        display: none !important;                        color: #333333 !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback ._hj-f5b2a1eb-9b07_feedback_minimized_message[data-message="initial"] > #_hj-f5b2a1eb-9b07_feedback_minimized_text_initial,                    #_hj-f5b2a1eb-9b07_feedback ._hj-f5b2a1eb-9b07_feedback_minimized_message[data-message="thankyou"] > #_hj-f5b2a1eb-9b07_feedback_minimized_text_thankyou {                        display: block !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback #_hj-f5b2a1eb-9b07_feedback_minimized:hover ._hj-f5b2a1eb-9b07_feedback_minimized_message {                        -webkit-box-shadow: 0 2px 24px 0 rgba(0,0,0,.33);                        -moz-box-shadow: 0 2px 24px 0 rgba(0,0,0,.33);                        box-shadow: 0 2px 24px 0 rgba(0,0,0,.33);                    }                                        /* MIDDLE LEFT + MIDDLE RIGHT */                    #_hj-f5b2a1eb-9b07_feedback ._hj-f5b2a1eb-9b07_feedback_minimized_label {                        position: relative;                        width: 40px;                        padding: 12px 14px 12px 12px;                        background: #f4364c;                        cursor: pointer;                        -webkit-transition: -webkit-box-shadow 0.1s ease-in-out;                        -moz-transition: -moz-box-shadow 0.1s ease-in-out;                        -o-transition: -o-box-shadow 0.1s ease-in-out;                        -ms-transition: -ms-box-shadow 0.1s ease-in-out;                        transition: box-shadow 0.1s ease-in-out;                        -webkit-box-sizing: border-box !important;                        -moz-box-sizing: border-box !important;                        box-sizing: border-box !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback ._hj-f5b2a1eb-9b07_feedback_minimized_label:hover {                        -webkit-box-shadow: 0 0 35px 2px rgba(0,0,0,.24);                        -moz-box-shadow: 0 0 35px 2px rgba(0,0,0,.24);                        box-shadow: 0 0 35px 2px rgba(0,0,0,.24);                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_left"] ._hj-f5b2a1eb-9b07_feedback_minimized_label {                        left: -2px;                        border-radius: 0 3px 3px 0;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_left"] ._hj-f5b2a1eb-9b07_feedback_minimized_label:hover {                        left: 0;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_right"] ._hj-f5b2a1eb-9b07_feedback_minimized_label {                        right: -2px;                        border-radius: 3px 0 0 3px;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_right"] ._hj-f5b2a1eb-9b07_feedback_minimized_label:hover {                        right: 0;                    }                                        #_hj-f5b2a1eb-9b07_feedback ._hj-f5b2a1eb-9b07_feedback_minimized_label ._hj-f5b2a1eb-9b07_feedback_minimized_label_text {                        color: #ffffff;                        display: inline-block !important;                        overflow-wrap: normal !important;                        word-break: normal !important;                        word-wrap: normal !important;                        white-space: nowrap !important;                        filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2);                        cursor: pointer;                        -webkit-writing-mode: vertical-lr;                        -moz-writing-mode: vertical-lr;                        -ms-writing-mode: tb-rl;                        -o-writing-mode: vertical-lr;                        writing-mode: vertical-lr;                        -webkit-transform: rotate(180deg);                        -moz-transform: rotate(180deg);                        -ms-transform: rotate(180deg);                        -o-transform: rotate(180deg);                        transform: rotate(180deg);                    }                                        /* Orientational text in certain languages needs further customization as it would otherwise read "upside down". */                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_ja ._hj-f5b2a1eb-9b07_feedback_minimized_label {                        padding-top: 86px;                    }                                        #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_zh ._hj-f5b2a1eb-9b07_feedback_minimized_label {                        padding-top: 26px;                    }                                        #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_ja ._hj-f5b2a1eb-9b07_feedback_minimized_label ._hj-f5b2a1eb-9b07_feedback_minimized_label_text,                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_zh ._hj-f5b2a1eb-9b07_feedback_minimized_label ._hj-f5b2a1eb-9b07_feedback_minimized_label_text {                        display: block !important;                        -webkit-writing-mode: initial;                        -moz-writing-mode: initial;                        -ms-writing-mode: initial;                        -o-writing-mode: initial;                        writing-mode: initial;                        -webkit-transform: rotate(270deg);                        -moz-transform: rotate(270deg);                        -ms-transform: rotate(270deg);                        -o-transform: rotate(270deg);                        transform: rotate(270deg);                    }                                        #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_zh_TW ._hj-f5b2a1eb-9b07_feedback_minimized_label ._hj-f5b2a1eb-9b07_feedback_minimized_label_text {                        -webkit-transform: none;                        -moz-transform: none;                        -ms-transform: none;                        -o-transform: none;                        transform: none;                    }                                        #_hj-f5b2a1eb-9b07_feedback ._hj-f5b2a1eb-9b07_feedback_minimized_label ._hj-f5b2a1eb-9b07_icon_emotion_default {                        display: inline-block !important;                        margin: 10px 0 0 -3px;                        font-size: 14px;                    }                                        #_hj-f5b2a1eb-9b07_feedback ._hj-f5b2a1eb-9b07_feedback_minimized_label ._hj-f5b2a1eb-9b07_icon_emotion_default .path1:before { color: #ffffff !important; }                    #_hj-f5b2a1eb-9b07_feedback ._hj-f5b2a1eb-9b07_feedback_minimized_label ._hj-f5b2a1eb-9b07_icon_emotion_default .path2:before { color: #f4364c !important; }                                        #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="bottom_right"] #_hj-f5b2a1eb-9b07_feedback_minimized { bottom: 20px; right: 30px; }                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="bottom_right"] ._hj-f5b2a1eb-9b07_feedback_minimized_label {display: none !important;}                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="bottom_right"] ._hj-f5b2a1eb-9b07_hotjar_buddy {right: 0;}                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="bottom_right"] #_hj-f5b2a1eb-9b07_feedback_open_close,                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="bottom_right"] #_hj-f5b2a1eb-9b07_feedback_open { right: 30px; }                                        #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="bottom_left"] #_hj-f5b2a1eb-9b07_feedback_minimized { bottom: 20px; left: 30px; }                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="bottom_left"] ._hj-f5b2a1eb-9b07_feedback_minimized_label {display: none !important;}                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="bottom_left"] ._hj-f5b2a1eb-9b07_hotjar_buddy {left: 0;}                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="bottom_left"] #_hj-f5b2a1eb-9b07_feedback_open_close,                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="bottom_left"] #_hj-f5b2a1eb-9b07_feedback_open { left: 37px; }                                        #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="bottom_right"] ._hj-f5b2a1eb-9b07_feedback_minimized_message {right: 62px;}                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="bottom_right"] ._hj-f5b2a1eb-9b07_feedback_minimized_message:before,                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_right"] ._hj-f5b2a1eb-9b07_feedback_minimized_message:before {right: -7px; border-left: 7px solid white;}                                        #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="bottom_left"] ._hj-f5b2a1eb-9b07_feedback_minimized_message {left: 62px;}                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="bottom_left"] ._hj-f5b2a1eb-9b07_feedback_minimized_message:before,                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_left"] ._hj-f5b2a1eb-9b07_feedback_minimized_message:before {left: -7px; border-right: 7px solid white;}                                        #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_left"] #_hj-f5b2a1eb-9b07_feedback_open_close,                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_right"] #_hj-f5b2a1eb-9b07_feedback_open_close { display: none; }                                        #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_left"] #_hj-f5b2a1eb-9b07_feedback_open_close_phone,                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_right"] #_hj-f5b2a1eb-9b07_feedback_open_close_phone { display: block; }                                        #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_left"] #_hj-f5b2a1eb-9b07_feedback_open,                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_left"] #_hj-f5b2a1eb-9b07_feedback_open.fade,                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_right"] #_hj-f5b2a1eb-9b07_feedback_open,                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_right"] #_hj-f5b2a1eb-9b07_feedback_open.fade { bottom: 385px; }                                        #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_left"] ._hj-f5b2a1eb-9b07_hotjar_buddy,                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_right"] ._hj-f5b2a1eb-9b07_hotjar_buddy { display: none !important; }                                        #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_left"] ._hj-f5b2a1eb-9b07_feedback_minimized_message,                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_right"] ._hj-f5b2a1eb-9b07_feedback_minimized_message {top: 50%; bottom: auto;}                                        #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_left"] #_hj-f5b2a1eb-9b07_feedback_minimized { bottom: 485px; left: 0; }                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_left"] ._hj-f5b2a1eb-9b07_feedback_minimized_message {left: 52px;}                                        #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_right"] #_hj-f5b2a1eb-9b07_feedback_minimized { bottom: 485px; right: 0; }                    #_hj-f5b2a1eb-9b07_feedback[data-minimized-position="middle_right"] ._hj-f5b2a1eb-9b07_feedback_minimized_message {right: 52px;}                                        /************************                     * OPEN STATE                    *************************/                    #_hj-f5b2a1eb-9b07_feedback_open_close {                        opacity: 0;                        pointer-events: none;                        position: fixed;                        z-index: 10;                        bottom: 33px;                        width: 44px;                        height: 37px;                        font-size: 20px;                        text-align: center !important;                        cursor: pointer;                        background-color: #f4364c !important;                        color: #ffffff !important;                        padding-left: 1px;                        -webkit-border-radius: 5px;                        -moz-border-radius: 5px;                        border-radius: 5px;                        -webkit-box-shadow: 0 2px 10px 1px rgba(0,0,0,.18);                        -moz-box-shadow: 0 2px 10px 1px rgba(0,0,0,.18);                        box-shadow: 0 2px 10px 1px rgba(0,0,0,.18);                    }                                        #_hj-f5b2a1eb-9b07_feedback_open_close_phone {                        display: none;                        font-size: 18px;                        text-align: center;                        cursor: pointer;                        background-color: #f4364c;                        color: #ffffff;                        width: 36px;                        height: 36px;                        z-index: 11;                        right: 20px;                        top: -17px;                        position: absolute;                        border-radius: 50%;                    }                                        #_hj-f5b2a1eb-9b07_feedback_open_close span,                    #_hj-f5b2a1eb-9b07_feedback_open_close_phone span {                        line-height: 36px !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback #_hj-f5b2a1eb-9b07_feedback_open {                        opacity: 0;                        pointer-events: none;                        position: absolute;                        z-index: 10;                        width: 320px;                        bottom: 84px;                        right: 30px;                        background: #ffffff;                        -webkit-box-shadow: 0 6px 100px 0 rgba(0,0,0,.35)!important;                        -moz-box-shadow: 0 6px 100px 0 rgba(0,0,0,.35)!important;                        box-shadow: 0 6px 100px 0 rgba(0,0,0,.35)!important;                    }                                        #_hj-f5b2a1eb-9b07_feedback #_hj-f5b2a1eb-9b07_feedback_open.fade {                        opacity: 1;                        bottom: 92px;                        pointer-events: all;                    }                                        #_hj-f5b2a1eb-9b07_feedback #_hj-f5b2a1eb-9b07_feedback_open [data-state] {                        display: none;                    }                                        /* Widget content (emotion + comment + email) */                    #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_emotion_content {margin-top: 30px; margin-bottom: 50px;}                    #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_emotion_content._hj-f5b2a1eb-9b07_emotion_type_star { margin-bottom: 40px;}                    #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_emotion_content ._hj-f5b2a1eb-9b07_emotion_option {position: relative; float: left !important; bottom: -50px; opacity: 0; width: 20%; text-align: center; font-size: 26px; cursor: pointer;}                    #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_emotion_content ._hj-f5b2a1eb-9b07_emotion_option.fade {bottom: 0; opacity: 1; font-size: 30px;}                    #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_emotion_content ._hj-f5b2a1eb-9b07_emotion_option.fadeTransition {                        -webkit-transition: all .3s cubic-bezier(0.175, 0.885, 0.320, 1);                        -webkit-transition: all .3s cubic-bezier(0.175, 0.885, 0.320, 1.350);                           -moz-transition: all .3s cubic-bezier(0.175, 0.885, 0.320, 1.350);                             -o-transition: all .3s cubic-bezier(0.175, 0.885, 0.320, 1.350);                                transition: all .3s cubic-bezier(0.175, 0.885, 0.320, 1.350);                    }                    #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_emotion_content [data-emotion-option="1"].fadeTransition {                        -webkit-transition-delay: .1s;                        -moz-transition-delay: .1s;                        -o-transition-delay: .1s;                        -ms-transition-delay: .1s;                        transition-delay: .1s;                    }                    #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_emotion_content [data-emotion-option="2"].fadeTransition {                        -webkit-transition-delay: .175s;                        -moz-transition-delay: .175s;                        -o-transition-delay: .175s;                        -ms-transition-delay: .175s;                        transition-delay: .175s;                    }                    #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_emotion_content [data-emotion-option="3"].fadeTransition {                        -webkit-transition-delay: .250s;                        -moz-transition-delay: .250s;                        -o-transition-delay: .250s;                        -ms-transition-delay: .250s;                        transition-delay: .250s;                    }                    #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_emotion_content [data-emotion-option="4"].fadeTransition {                        -webkit-transition-delay: .325s;                        -moz-transition-delay: .325s;                        -o-transition-delay: .325s;                        -ms-transition-delay: .325s;                        transition-delay: .325s;                    }                                        #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_emotion_content ._hj-f5b2a1eb-9b07_emotion_text {                        position: absolute;                        font-size: 12px;                        color: #999;                        text-align: center;                        top: 47px;                        left: 0;                        right: 0;                        opacity: 0;                    }                                        #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_emotion_content._hj-f5b2a1eb-9b07_emotion_type_default ._hj-f5b2a1eb-9b07_emotion_text {                        padding-left: 6px;                    }                                        #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_emotion_content._hj-f5b2a1eb-9b07_emotion_type_star ._hj-f5b2a1eb-9b07_emotion_text {                        display: none;                    }                                        #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1 ._hj-f5b2a1eb-9b07_emotion_content:hover ._hj-f5b2a1eb-9b07_emotion_option {opacity: .5}                    #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1 ._hj-f5b2a1eb-9b07_emotion_content ._hj-f5b2a1eb-9b07_emotion_option:hover {opacity: 1;}                    #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1 ._hj-f5b2a1eb-9b07_emotion_content ._hj-f5b2a1eb-9b07_emotion_option:hover ._hj-f5b2a1eb-9b07_emotion_text {opacity: 1; top: 42px;}                                        #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1 ._hj-f5b2a1eb-9b07_emotion_comment_holder {position: relative; display: none;}                    #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1 ._hj-f5b2a1eb-9b07_emotion_comment_holder:before {content: ""; width: 1px; height: 1px; position: absolute; left: auto; top: -6px; border-left: 4px solid transparent; border-right: 4px solid transparent; border-bottom: 5px solid rgba(0,0,0,.1);}                    #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen] ._hj-f5b2a1eb-9b07_emotion_comment_holder {display: block;}                    #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen] ._hj-f5b2a1eb-9b07_emotion_text {display: none;}                    #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen] ._hj-f5b2a1eb-9b07_icon_emotion_default {font-size: 26px;}                    #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen="0"] ._hj-f5b2a1eb-9b07_emotion_comment_holder:before {left: 8.5%;}                    #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen="1"] ._hj-f5b2a1eb-9b07_emotion_comment_holder:before {left: 28.5%;}                    #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen="2"] ._hj-f5b2a1eb-9b07_emotion_comment_holder:before {left: 48.5%;}                    #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen="3"] ._hj-f5b2a1eb-9b07_emotion_comment_holder:before {left: 68.5%;}                    #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen="4"] ._hj-f5b2a1eb-9b07_emotion_comment_holder:before {left: 88.5%;}                                        #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen] ._hj-f5b2a1eb-9b07_emotion_option {opacity: .5}                    #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen] ._hj-f5b2a1eb-9b07_emotion_option ._hj-f5b2a1eb-9b07_icon_emotion_smiley,                     #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen] ._hj-f5b2a1eb-9b07_emotion_option ._hj-f5b2a1eb-9b07_icon_emotion_default .path1:before {color: #cccccc;}                                        #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen] ._hj-f5b2a1eb-9b07_emotion_type_star ._hj-f5b2a1eb-9b07_emotion_option,                    #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen] ._hj-f5b2a1eb-9b07_emotion_option[data-emotion-active] {opacity: 1}                    #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen] ._hj-f5b2a1eb-9b07_emotion_option[data-emotion-active] ._hj-f5b2a1eb-9b07_icon_emotion_smiley {color: #f4364c;}                    #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen] ._hj-f5b2a1eb-9b07_emotion_option[data-emotion-active] ._hj-f5b2a1eb-9b07_icon_emotion_default {font-size: 26px;}                    #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen] ._hj-f5b2a1eb-9b07_emotion_option[data-emotion-active] ._hj-f5b2a1eb-9b07_icon_emotion_default .path1:before {color: #ffd902;}                                        #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_toolset_actions {                        margin: -3px -12px 12px -12px; background: #eaeaeb !important; padding: 10px 20px;                    }                                        #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_toolset_actions > div {                        font-size: 22px; opacity: .75; cursor: pointer; display: inline-block; position: relative;                    }                                        #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_toolset_actions > div._hj-f5b2a1eb-9b07_toolset_action_active {                        color: #f4364c; opacity: 1;                    }                                        #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_toolset_actions > div:hover {                        opacity: 1;                    }                                        #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_toolset_actions > div > ._hj-f5b2a1eb-9b07_toolset_tooltip {                        background: black; color: white; font-size: 12px; padding: 8px 12px; border-radius: 3px; position: absolute; left: 40px; top: -4px; width: 195px; opacity: 0; pointer-events: none;                    }                                        #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_toolset_actions > div > ._hj-f5b2a1eb-9b07_toolset_tooltip:before {                        content: "";                        width: 1px;                        height: 1px;                        position: absolute;                        left: -6px;                        top: 10px;                        border-top: 4px solid transparent;                        border-bottom: 4px solid transparent;                        border-right: 5px solid black;                    }                                        #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_toolset_actions > div > ._hj-f5b2a1eb-9b07_toolset_tooltip {                        left: auto; right: 40px; top: -4px;                    }                                        #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget._hj-f5b2a1eb-9b07_rtl #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_toolset_actions > div > ._hj-f5b2a1eb-9b07_toolset_tooltip:before {                        left: auto;                        right: -6px;                        border-right: 0;                        border-left: 5px solid black;                    }                                        #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_toolset_actions > div:hover > ._hj-f5b2a1eb-9b07_toolset_tooltip {                        opacity: 1;                    }                                        /* Overlay + dimmers + highlighters */                    #_hj-f5b2a1eb-9b07_feedback ._hj-f5b2a1eb-9b07_feedback_content_dimmer {                        opacity: 0;                        background: black;                        position: fixed;                        z-index: -1;                        -webkit-transition: opacity .2s ease-in-out;                        -moz-transition: opacity .2s ease-in-out;                        -o-transition: opacity .2s ease-in-out;                        -ms-transition: opacity .2s ease-in-out;                        transition: opacity .2s ease-in-out;                    }                                        #_hj-f5b2a1eb-9b07_feedback_content_highlighter {                        display: none;                        border: 4px dashed #ffd902;                        -webkit-border-radius: 3px;                        -moz-border-radius: 3px;                        border-radius: 3px;                        position: fixed;                        z-index: -1;                        -webkit-box-sizing: initial !important;                        -moz-box-sizing: initial !important;                        box-sizing: initial !important;                        -webkit-transition: border .2s linear;                        -moz-transition: border .2s ease-in-out;                        -o-transition: border .2s ease-in-out;                        -ms-transition: border .2s ease-in-out;                        transition: border .2s ease-in-out;                    }                                        #_hj-f5b2a1eb-9b07_feedback_content_highlighter #_hj-f5b2a1eb-9b07_feedback_content_highlighter_close {                        display: none;                        font-size: 12px;                        text-align: center;                        cursor: pointer;                        background-color: #f4364c;                        color: #ffffff;                        z-index: 11;                        right: -12px;                        top: -13px;                        position: absolute;                        border-radius: 50%;                        padding: 5px 7px 3px 7px;                    }                                        /* SCREENSHOT + ELEMENT SELECTION */                    /* Page highlight - ENABLED */                    #_hj-f5b2a1eb-9b07_feedback_page_highlight {                        position: fixed;                        pointer-events: none;                        top: 0;                        right: 0;                        bottom: 0;                        left: 0;                        z-index: 5;                    }                                        #_hj-f5b2a1eb-9b07_feedback_page_highlight > ._hj-f5b2a1eb-9b07_feedback_page_highlight_line {                        opacity: 0;                        position: absolute;                        background: #f4364c                    }                    #_hj-f5b2a1eb-9b07_feedback_page_highlight > #_hj-f5b2a1eb-9b07_feedback_page_highlight_line_top {top: 0; left: 0; right: 0; height: 4px;}                    #_hj-f5b2a1eb-9b07_feedback_page_highlight > #_hj-f5b2a1eb-9b07_feedback_page_highlight_line_right {top: 0; bottom: 0; right: 0; width: 4px;}                    #_hj-f5b2a1eb-9b07_feedback_page_highlight > #_hj-f5b2a1eb-9b07_feedback_page_highlight_line_bottom {bottom: 0; left: 0; right: 0; height: 4px;}                    #_hj-f5b2a1eb-9b07_feedback_page_highlight > #_hj-f5b2a1eb-9b07_feedback_page_highlight_line_left {top: 0; left: 0; bottom: 0; width: 4px;}                                        /* Page highlight - TOP MESSAGE */                    #_hj-f5b2a1eb-9b07_feedback_page_highlight > #_hj-f5b2a1eb-9b07_feedback_top_message_select {                        opacity: 0;                        position: fixed;                        top: -4px;                        left: 50%;                        width: 260px;                        margin-left: -130px;                        padding: 23px 0 19px 0;                        text-align: center;                        font-size: 13px;                        -webkit-border-radius: 0 0 10px 10px;                        -moz-border-radius: 0 0 10px 10px;                        border-radius: 0 0 10px 10px;                        background-color: #ffd902;                        color: #3c3c3c;                        -webkit-box-shadow: 0 2px 25px 3px rgba(0,0,0,.3);                        -moz-box-shadow: 0 2px 25px 3px rgba(0,0,0,.3);                        box-shadow: 0 2px 25px 3px rgba(0,0,0,.3);                    }                                        #_hj-f5b2a1eb-9b07_feedback_page_highlight > #_hj-f5b2a1eb-9b07_feedback_top_message_select {                    }                                        #_hj-f5b2a1eb-9b07_feedback_page_highlight > #_hj-f5b2a1eb-9b07_feedback_top_message_select:before,                    #_hj-f5b2a1eb-9b07_feedback_page_highlight > #_hj-f5b2a1eb-9b07_feedback_top_message_select:after {                        content:"";                        display: block;                        width: 55px;                        height: 50px;                        background-color:                        #f4364c;                        position: absolute;                        top: 0;                        z-index: -1;                    }                                        #_hj-f5b2a1eb-9b07_feedback_page_highlight > #_hj-f5b2a1eb-9b07_feedback_top_message_select:before {                        left: -9px;                        -webkit-transform: skewX(20deg);                        -moz-transform: skewX(20deg);                        -ms-transform: skewX(20deg);                        transform: skewX(20deg);                    }                                        #_hj-f5b2a1eb-9b07_feedback_page_highlight > #_hj-f5b2a1eb-9b07_feedback_top_message_select:after {                        right: -9px;                        -webkit-transform: skewX(-20deg);                        -moz-transform: skewX(-20deg);                        -ms-transform: skewX(-20deg);                        transform: skewX(-20deg);                    }                                        #_hj-f5b2a1eb-9b07_feedback_page_highlight > #_hj-f5b2a1eb-9b07_feedback_top_message_select #_hj-f5b2a1eb-9b07_feedback_top_message_select_close {                        position: absolute;                        right: 13px;                        top: 21px;                        color: #3c3c3c;                        text-decoration: none;                        cursor: pointer;                        height: 19px;                        width: 19px;                        padding: 3px 0 0 1px;                        border-radius: 50%;                        background: transparent;                        -webkit-box-sizing: border-box !important;                        -moz-box-sizing: border-box !important;                        box-sizing: border-box !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback_page_highlight > #_hj-f5b2a1eb-9b07_feedback_top_message_select #_hj-f5b2a1eb-9b07_feedback_top_message_select_close:hover {                        background: rgba(0,0,0,.2);                    }                                        /************************                     * OLD WIDGETS CSS OVERRIDES                    *************************/                                        [data-hotjar-cursor-pointer],                    [data-hotjar-cursor-pointer] * {cursor: pointer !important;}                                        #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget,                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget *,                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_widget_input_field {                        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget p {                        color: #333333 !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_primary,                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_primary:hover,                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_primary:focus,                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_primary:active {background: #f4364c !important; color: #ffffff !important; font-weight: normal !important;}                                        #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_clear {color: #aaaaaa !important;}                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_clear:hover,                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_clear:focus,                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_clear:active {color: #666666 !important;}                                        #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled,                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled:hover,                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled:focus,                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_btn_disabled:active {background: #cccccc !important; color: #333333 !important; }                                        #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_title {padding: 30px !important; cursor: default; font-size: 17px; font-weight: normal; line-height: normal !important;}                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_title a {color: inherit !important; text-decoration: underline !important;}                                        #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content ._hj-f5b2a1eb-9b07_input_field {border: 0 !important; background: #eaeaeb !important; color: #454A55 !important; padding: 12px 20px !important; margin-left: -12px; margin-right: -12px; margin-bottom: 10px; width: 320px; -webkit-box-shadow: none !important; -moz-box-shadow: none !important; box-shadow: none !important;}                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content textarea._hj-f5b2a1eb-9b07_input_field {height: 105px !important; line-height: 18px !important; margin-bottom: 0;}                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_content input._hj-f5b2a1eb-9b07_input_field {height: 46px; !important; text-align: center;}                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_icon-select-element:before {color: #454A55 !important;}                                        #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer {border-top: 0!important;}                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left {padding: 9px 0 20px 20px; color: #333333;}                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left a {color: #333333;}                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left span {color: #f4364c;}                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right {display: none; padding-top: 0; border-top: 0!important;}                    #_hj-f5b2a1eb-9b07_feedback._hj-f5b2a1eb-9b07_widget ._hj-f5b2a1eb-9b07_widget_footer._hj-f5b2a1eb-9b07_widget_legal ._hj-f5b2a1eb-9b07_pull_right {display: block; padding-top: 0; border-top: 0!important;}                                        /************************                     * STATE MODIFICATIONS                    *************************/                    #_hj-f5b2a1eb-9b07_feedback[data-state="minimized"] {width: 80px;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="minimized"] #_hj-f5b2a1eb-9b07_feedback_minimized {display: block;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="minimized"][data-show-message] {width: 280px;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="minimized"][data-show-message] ._hj-f5b2a1eb-9b07_feedback_minimized_message {pointer-events: all; opacity: 1;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="minimized"][data-minimized-position="bottom_right"][data-show-message] ._hj-f5b2a1eb-9b07_feedback_minimized_message    {right: 70px;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="minimized"][data-minimized-position="bottom_left"][data-show-message] ._hj-f5b2a1eb-9b07_feedback_minimized_message     {left: 70px;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="minimized"][data-minimized-position="middle_right"][data-show-message] ._hj-f5b2a1eb-9b07_feedback_minimized_message    {right: 60px;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="minimized"][data-minimized-position="middle_left"][data-show-message] ._hj-f5b2a1eb-9b07_feedback_minimized_message     {left: 60px;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="minimized"] ._hj-f5b2a1eb-9b07_feedback_content_dimmer,                    #_hj-f5b2a1eb-9b07_feedback[data-state="minimized"] #_hj-f5b2a1eb-9b07_feedback_content_highlighter {display: none;}                                        #_hj-f5b2a1eb-9b07_feedback[data-state="emotion"] {width: 320px;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="emotion"] #_hj-f5b2a1eb-9b07_feedback_open_close {opacity: 1; pointer-events: all;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="emotion"] #_hj-f5b2a1eb-9b07_feedback_open [data-state="emotion"] {display: block;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="emotion"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left {padding-top: 0;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="emotion"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_btn_clear {display: none;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="emotion"] #_hj-f5b2a1eb-9b07_state-1 p._hj-f5b2a1eb-9b07_widget_title {padding-top: 40px !important; padding-bottom: 0 !important;}                                        #_hj-f5b2a1eb-9b07_feedback[data-state="comment"] #_hj-f5b2a1eb-9b07_feedback_open_close {opacity: 1; pointer-events: all;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="comment"] #_hj-f5b2a1eb-9b07_feedback_open [data-state="emotion"] {display: block;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="comment"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_emotion_content {margin-bottom: 15px;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="comment"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right {display: block;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="comment"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_btn_clear {display: none;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="comment"] #_hj-f5b2a1eb-9b07_state-1 p._hj-f5b2a1eb-9b07_widget_title {display: none;}                                        #_hj-f5b2a1eb-9b07_feedback[data-state="email"] #_hj-f5b2a1eb-9b07_feedback_open [data-state="email"] {display: block;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="email"] #_hj-f5b2a1eb-9b07_feedback_open_close {opacity: 1; pointer-events: all;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="email"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left {display: none;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="email"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right {display: block;}                                        #_hj-f5b2a1eb-9b07_feedback[data-state="consent"] #_hj-f5b2a1eb-9b07_feedback_open [data-state="consent"] {display: block;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="consent"] #_hj-f5b2a1eb-9b07_feedback_open [data-state="consent"] ._hj-f5b2a1eb-9b07_consent_message_text {text-align: center; padding: 0 14px; color: #666666 !important;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="consent"] #_hj-f5b2a1eb-9b07_feedback_open [data-state="consent"] ._hj-f5b2a1eb-9b07_consent_message_text a {color: #666666 !important;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="consent"] #_hj-f5b2a1eb-9b07_feedback_open [data-state="consent"] ._hj-f5b2a1eb-9b07_consent_actions {margin-bottom: 30px; text-align: center;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="consent"] #_hj-f5b2a1eb-9b07_feedback_open [data-state="consent"] ._hj-f5b2a1eb-9b07_consent_actions button {font-size: 18px !important; margin: 20px 5px 0 5px !important; padding: 7px 10px !important; width: 50px !important;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="consent"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left {display: none;}                    #_hj-f5b2a1eb-9b07_feedback[data-state="consent"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_more_info_link,                    #_hj-f5b2a1eb-9b07_feedback[data-state="consent"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_more_info_link:hover,                    #_hj-f5b2a1eb-9b07_feedback[data-state="consent"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_more_info_link:focus,                    #_hj-f5b2a1eb-9b07_feedback[data-state="consent"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_more_info_link:visited,                    #_hj-f5b2a1eb-9b07_feedback[data-state="consent"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_more_info_link:active {                        color: #333 !important;                        text-decoration: underline;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-screenshot] {top: 0; bottom: 0; left: 0; right: 0; width: 100% !important;}                                        #_hj-f5b2a1eb-9b07_feedback[data-screenshot="element"] {pointer-events: none;}                    #_hj-f5b2a1eb-9b07_feedback[data-screenshot="element"] #_hj-f5b2a1eb-9b07_feedback_top_message_select #_hj-f5b2a1eb-9b07_feedback_top_message_select_close {pointer-events: all;}                    #_hj-f5b2a1eb-9b07_feedback[data-screenshot="element"] #_hj-f5b2a1eb-9b07_feedback_open_close {display: none !important;}                    #_hj-f5b2a1eb-9b07_feedback[data-screenshot="element"] #_hj-f5b2a1eb-9b07_feedback_open {display: none !important;}                    #_hj-f5b2a1eb-9b07_feedback[data-screenshot="element"] ._hj-f5b2a1eb-9b07_feedback_content_dimmer {opacity: .45;}                    #_hj-f5b2a1eb-9b07_feedback[data-screenshot="element"] #_hj-f5b2a1eb-9b07_feedback_content_highlighter {display: block;}                    #_hj-f5b2a1eb-9b07_feedback[data-screenshot="element"] #_hj-f5b2a1eb-9b07_feedback_page_highlight > #_hj-f5b2a1eb-9b07_feedback_top_message_select {opacity: 1;}                    #_hj-f5b2a1eb-9b07_feedback[data-screenshot="element"] #_hj-f5b2a1eb-9b07_feedback_page_highlight > ._hj-f5b2a1eb-9b07_feedback_page_highlight_line {opacity: 1;}                    #_hj-f5b2a1eb-9b07_feedback[data-screenshot="element"] #_hj-f5b2a1eb-9b07_feedback_page_highlight > #_hj-f5b2a1eb-9b07_feedback_top_message_select:before,                    #_hj-f5b2a1eb-9b07_feedback[data-screenshot="element"] #_hj-f5b2a1eb-9b07_feedback_page_highlight > #_hj-f5b2a1eb-9b07_feedback_top_message_select:after {background: #ffd902 !important;}                    #_hj-f5b2a1eb-9b07_feedback[data-screenshot="element"] #_hj-f5b2a1eb-9b07_feedback_page_highlight > ._hj-f5b2a1eb-9b07_feedback_page_highlight_line {background: #ffd902 !important;}                                        #_hj-f5b2a1eb-9b07_feedback[data-screenshot="elementSelected"] ._hj-f5b2a1eb-9b07_feedback_content_dimmer {opacity: .45;}                    #_hj-f5b2a1eb-9b07_feedback[data-screenshot="elementSelected"] #_hj-f5b2a1eb-9b07_feedback_content_highlighter {display: block; pointer-events: all; cursor: pointer; border-style: solid; border-color: #f4364c !important;}                    #_hj-f5b2a1eb-9b07_feedback[data-screenshot="elementSelected"] #_hj-f5b2a1eb-9b07_feedback_content_highlighter:before {content: "Change"; position: absolute; background: #f4364c; color: #ffffff; bottom: -32px; right: -4px; padding: 8px 12px; border-radius: 0 0 3px 3px; font-size: 12px;}                    #_hj-f5b2a1eb-9b07_feedback[data-screenshot="elementSelected"] #_hj-f5b2a1eb-9b07_feedback_content_highlighter_close {display: block;}                                        /************************                     * DEVICE ADAPTATIONS                    *************************/                                        #_hj-f5b2a1eb-9b07_feedback[data-device="desktop"] [data-show-for="phone"],                    #_hj-f5b2a1eb-9b07_feedback[data-device="desktop"] [data-show-for="tablet"],                    #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"] [data-show-for="desktop"],                    #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"] [data-show-for="phone"],                    #_hj-f5b2a1eb-9b07_feedback[data-device="phone"] [data-show-for="desktop"],                    #_hj-f5b2a1eb-9b07_feedback[data-device="phone"] [data-show-for="tablet"],                    #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"] [data-show-for="desktop"],                    #_hj-f5b2a1eb-9b07_feedback[data-viewmode="desktop"] [data-show-for="touch"] {                        display: none !important;                    }                                        /************************                     * DESKTOP VIEWMODE ADAPTATIONS                     *************************/                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="desktop"][data-minimized-position="middle_left"] #_hj-f5b2a1eb-9b07_feedback_minimized { bottom: 485px; left: 0; }                    #_hj-f5b2a1eb-9b07_feedback[data-viewmode="desktop"][data-minimized-position="middle_left"] ._hj-f5b2a1eb-9b07_feedback_minimized_message {left: 52px;}                    #_hj-f5b2a1eb-9b07_feedback[data-viewmode="desktop"][data-minimized-position="middle_left"] #_hj-f5b2a1eb-9b07_feedback_open      { left: 22px; }                    #_hj-f5b2a1eb-9b07_feedback[data-viewmode="desktop"][data-minimized-position="middle_left"] #_hj-f5b2a1eb-9b07_feedback_open.fade { left: 37px; }                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="desktop"][data-minimized-position="middle_right"] #_hj-f5b2a1eb-9b07_feedback_minimized { bottom: 485px; right: 0; }                    #_hj-f5b2a1eb-9b07_feedback[data-viewmode="desktop"][data-minimized-position="middle_right"] ._hj-f5b2a1eb-9b07_feedback_minimized_message {right: 52px;}                    #_hj-f5b2a1eb-9b07_feedback[data-viewmode="desktop"][data-minimized-position="middle_right"] #_hj-f5b2a1eb-9b07_feedback_open      { right: 15px; }                    #_hj-f5b2a1eb-9b07_feedback[data-viewmode="desktop"][data-minimized-position="middle_right"] #_hj-f5b2a1eb-9b07_feedback_open.fade { right: 30px; }                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="desktop"] #_hj-f5b2a1eb-9b07_feedback_open_close_phone {                        font-size: 15px;                        width: 27px;                        height: 27px;                        top: -13px;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="desktop"] #_hj-f5b2a1eb-9b07_feedback_open_close_phone span {                        line-height: 27px !important;                    }                                        /************************                     * TOUCH VIEWMODE ADAPTATIONS (Tablets / Phones)                    *************************/                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="emotion"],                     #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="comment"],                     #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="email"],                    #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="consent"] {                        top: 0;                        bottom: 0;                        left: 0;                        right: 0;                        width: 100%;                        height: 100%;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"] ._hj-f5b2a1eb-9b07_feedback_minimized_message ._hj-f5b2a1eb-9b07_feedback_minimized_message_close {                        opacity: 1 !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"] #_hj-f5b2a1eb-9b07_feedback_open_close {                        display: none;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"] #_hj-f5b2a1eb-9b07_feedback_open_close_phone {                        display: block;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"] ._hj-f5b2a1eb-9b07_widget_content textarea._hj-f5b2a1eb-9b07_input_field,                     #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"] ._hj-f5b2a1eb-9b07_widget_content input._hj-f5b2a1eb-9b07_input_field {                        font-size: 17px !important;                        margin: 0;                        width: 100%;                        border-radius: 4px 4px 0 0;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"] ._hj-f5b2a1eb-9b07_widget_content textarea._hj-f5b2a1eb-9b07_input_field {                        line-height: 1.4em !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"] ._hj-f5b2a1eb-9b07_widget_content input._hj-f5b2a1eb-9b07_input_field {                        line-height: normal !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="comment"] #_hj-f5b2a1eb-9b07_feedback_open,                     #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="email"] #_hj-f5b2a1eb-9b07_feedback_open,                     #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="consent"] #_hj-f5b2a1eb-9b07_feedback_open {                        top: 0;                        right: 0;                        bottom: 0;                        left: 0;                        margin-left: 0 !important;                        border-radius: 0;                        width: 100%;                        height: 100%;                        overflow: auto;                        -webkit-transition-duration: 0s;                        -moz-transition-duration: 0s;                        transition-duration: 0s;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_toolset_actions {                        margin: -4px 0 0 0; border-radius: 0 0 4px 4px;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="comment"] ._hj-f5b2a1eb-9b07_widget_title,                    #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="email"] ._hj-f5b2a1eb-9b07_widget_title,                    #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="consent"] ._hj-f5b2a1eb-9b07_widget_title {                        display: block !important;                        padding: 35px 50px !important;                        font-size: 18px;                        border-bottom: 1px solid #eaeaeb;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="comment"] ._hj-f5b2a1eb-9b07_widget_content,                    #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="email"] ._hj-f5b2a1eb-9b07_widget_content,                    #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="consent"] ._hj-f5b2a1eb-9b07_widget_content {                        padding: 30px;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="comment"] #_hj-f5b2a1eb-9b07_feedback_open_close_phone,                     #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="email"] #_hj-f5b2a1eb-9b07_feedback_open_close_phone,                    #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="consent"] #_hj-f5b2a1eb-9b07_feedback_open_close_phone {                        top: 10px;                        background: transparent;                        color: #333333;                        right: 10px;                        font-size: 22px;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"][data-state="consent"] ._hj-f5b2a1eb-9b07_consent_message_text {                        font-size: 16px;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="touch"] #_hj-f5b2a1eb-9b07_feedback_page_highlight > #_hj-f5b2a1eb-9b07_feedback_top_message_select #_hj-f5b2a1eb-9b07_feedback_top_message_select_close {                        top: 16px;                        right: 5px;                        height: 27px;                        width: 27px;                        padding: 4px 0 0 2px;                        font-size: 18px;                    }                                        /************************                     * TABLET SPECIFIC                    *************************/                                        #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"] #_hj-f5b2a1eb-9b07_feedback_open {                        bottom: 0;                        left: 50%;                        width: 380px;                        margin-left: -190px;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"][data-state="emotion"] #_hj-f5b2a1eb-9b07_feedback_open {                        bottom: 20px;                    }                    #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"][data-state="comment"] ._hj-f5b2a1eb-9b07_widget_title,                    #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"][data-state="email"] ._hj-f5b2a1eb-9b07_widget_title,                    #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"][data-state="consent"] ._hj-f5b2a1eb-9b07_widget_title {                        font-size: 26px;                        padding: 40px 50px !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"][data-state="comment"] ._hj-f5b2a1eb-9b07_widget_content,                    #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"][data-state="email"] ._hj-f5b2a1eb-9b07_widget_content,                    #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"][data-state="consent"] ._hj-f5b2a1eb-9b07_widget_content {                        padding: 40px 60px;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"][data-state="comment"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_emotion_content {                        height: 58px;                        margin-top: 10px;                        margin-bottom: 40px;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"] #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen] [data-emotion-option] ._hj-f5b2a1eb-9b07_icon {                        height: 40px;                        min-width: 40px;                        font-size: 40px;                        background-size: 40px;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_emotion_comment_holder:before {                        display: none !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"] ._hj-f5b2a1eb-9b07_widget_content textarea._hj-f5b2a1eb-9b07_input_field {                        height: 180px !important;                        font-size: 22px !important;                        padding: 20px !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"] ._hj-f5b2a1eb-9b07_widget_content input._hj-f5b2a1eb-9b07_input_field {                        height: 80px !important;                        font-size: 22px !important;                        padding: 20px !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"] ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left {                        font-size: 14px;                        padding: 22px 0 20px 8%;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"] ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right {                        padding: 0 8% 30px 0;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="tablet"] ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right button {                        font-size: 22px !important;                        padding: 14px 28px !important;                    }                                        /************************                     * PHONE SPECIFIC                    *************************/                                        #_hj-f5b2a1eb-9b07_feedback[data-device="phone"] #_hj-f5b2a1eb-9b07_feedback_open {                        bottom: 0;                        left: 20px;                        right: 20px;                        width: auto;                        margin-left: 0;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="phone"][data-state="emotion"] #_hj-f5b2a1eb-9b07_feedback_open {                        bottom: 20px;                    }                                        @media (min-width:421px) {                        #_hj-f5b2a1eb-9b07_feedback[data-viewmode="phone"][data-state="emotion"] #_hj-f5b2a1eb-9b07_feedback_open {                            left: 50%;                            width: 300px;                            margin-left: -150px;                        }                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="phone"][data-state="comment"] #_hj-f5b2a1eb-9b07_feedback_open ._hj-f5b2a1eb-9b07_emotion_content {                        margin-top: 10px;                        margin-bottom: 50px;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="phone"] ._hj-f5b2a1eb-9b07_widget_content textarea._hj-f5b2a1eb-9b07_input_field {                        height: 110px !important;                        padding: 15px !important;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="phone"] #_hj-f5b2a1eb-9b07_feedback_open #_hj-f5b2a1eb-9b07_state-1[data-emotion-chosen] [data-emotion-active] ._hj-f5b2a1eb-9b07_emotion_text {                        display: block !important;                        opacity: 1;                        top: 34px;                        line-height: 12px;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="phone"] ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_left {                        padding: 18px 0 20px 30px;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="phone"] ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right {                        padding: 0 30px 30px 0;                    }                                        #_hj-f5b2a1eb-9b07_feedback[data-device="phone"] ._hj-f5b2a1eb-9b07_widget_footer ._hj-f5b2a1eb-9b07_pull_right button {                        font-size: 18px !important;                        padding: 12px 20px !important;                    }                                    </style><div id="_hj-f5b2a1eb-9b07_feedback" class="_hj-f5b2a1eb-9b07_widget _hj-f5b2a1eb-9b07_ltr _hj-f5b2a1eb-9b07_en" data-state="minimized" data-minimized-position="middle_right" data-device="desktop" data-viewmode="desktop">                                        <!-- Minimized State -->                    <div id="_hj-f5b2a1eb-9b07_feedback_minimized">                        <div class="_hj-f5b2a1eb-9b07_feedback_minimized_label">                            <div class="_hj-f5b2a1eb-9b07_feedback_minimized_label_text">                                Feedback                            </div>                                                            <div class="_hj-f5b2a1eb-9b07_icon _hj-f5b2a1eb-9b07_icon_emotion_default" data-emotion-score="3">                                    <span class="path1"></span><span class="path2"></span>                                </div>                                                    </div>                        <div class="_hj-f5b2a1eb-9b07_hotjar_buddy _hj-f5b2a1eb-9b07_icon _hj-f5b2a1eb-9b07_icon_emotion_default _hj-f5b2a1eb-9b07_bottom_position_launcher" data-emotion-score="3">                            <span class="path1"></span><span class="path2"></span>                        </div>                        <div id="_hj-f5b2a1eb-9b07_feedback_minimized_message" class="_hj-f5b2a1eb-9b07_feedback_minimized_message _hj-f5b2a1eb-9b07_transition _hj-f5b2a1eb-9b07_rounded_corners">                            <a class="_hj-f5b2a1eb-9b07_feedback_minimized_message_close _hj-f5b2a1eb-9b07_link_no_underline _hj-f5b2a1eb-9b07_icon _hj-f5b2a1eb-9b07_icon-x _hj-f5b2a1eb-9b07_transition"></a>                            <span id="_hj-f5b2a1eb-9b07_feedback_minimized_text_initial" class="_hj-f5b2a1eb-9b07_wordwrap">Help us improve by sharing your feedback.</span>                            <span id="_hj-f5b2a1eb-9b07_feedback_minimized_text_thankyou" class="_hj-f5b2a1eb-9b07_wordwrap">Thank you for sharing your feedback with us!</span>                        </div>                    </div>                                        <!-- Opened State -->                    <a id="_hj-f5b2a1eb-9b07_feedback_open_close">                        <span class="_hj-f5b2a1eb-9b07_link_no_underline _hj-f5b2a1eb-9b07_icon _hj-f5b2a1eb-9b07_icon-x"></span>                    </a>                    <div id="_hj-f5b2a1eb-9b07_feedback_open" class="_hj-f5b2a1eb-9b07_rounded_corners _hj-f5b2a1eb-9b07_transition">                        <a id="_hj-f5b2a1eb-9b07_feedback_open_close_phone">                            <span class="_hj-f5b2a1eb-9b07_link_no_underline _hj-f5b2a1eb-9b07_icon _hj-f5b2a1eb-9b07_icon-x"></span>                        </a>                        <!-- STEP 1: EMOTION -->                        <div id="_hj-f5b2a1eb-9b07_state-1" data-state="emotion">                            <p class="_hj-f5b2a1eb-9b07_widget_title">How would you rate your experience?</p>                            <div class="_hj-f5b2a1eb-9b07_widget_content">                                <div class="_hj-f5b2a1eb-9b07_emotion_content _hj-f5b2a1eb-9b07_emotion_type_default">                                    <div class="_hj-f5b2a1eb-9b07_emotion_option" data-bind="emotion" data-emotion-option="0">                                                                                    <span class="_hj-f5b2a1eb-9b07_icon _hj-f5b2a1eb-9b07_icon_emotion_default" data-emotion-score="0">                                                                                                    <span class="path1"></span><span class="path2"></span>                                                                                            </span>                                                                                                                        <span class="_hj-f5b2a1eb-9b07_emotion_text _hj-f5b2a1eb-9b07_transition">Hate</span>                                    </div>                                    <div class="_hj-f5b2a1eb-9b07_emotion_option" data-bind="emotion" data-emotion-option="1">                                                                                    <span class="_hj-f5b2a1eb-9b07_icon _hj-f5b2a1eb-9b07_icon_emotion_default" data-emotion-score="1">                                                                                                    <span class="path1"></span><span class="path2"></span>                                                                                            </span>                                                                                                                        <span class="_hj-f5b2a1eb-9b07_emotion_text _hj-f5b2a1eb-9b07_transition">Dislike</span>                                    </div>                                    <div class="_hj-f5b2a1eb-9b07_emotion_option" data-bind="emotion" data-emotion-option="2">                                                                                    <span class="_hj-f5b2a1eb-9b07_icon _hj-f5b2a1eb-9b07_icon_emotion_default" data-emotion-score="2">                                                                                                    <span class="path1"></span><span class="path2"></span>                                                                                            </span>                                                                                                                            <span class="_hj-f5b2a1eb-9b07_emotion_text _hj-f5b2a1eb-9b07_transition">Neutral</span>                                    </div>                                    <div class="_hj-f5b2a1eb-9b07_emotion_option" data-bind="emotion" data-emotion-option="3">                                                                                    <span class="_hj-f5b2a1eb-9b07_icon _hj-f5b2a1eb-9b07_icon_emotion_default" data-emotion-score="3">                                                                                                    <span class="path1"></span><span class="path2"></span>                                                                                            </span>                                                                                                                        <span class="_hj-f5b2a1eb-9b07_emotion_text _hj-f5b2a1eb-9b07_transition">Like</span>                                    </div>                                    <div class="_hj-f5b2a1eb-9b07_emotion_option" data-bind="emotion" data-emotion-option="4">                                                                                    <span class="_hj-f5b2a1eb-9b07_icon _hj-f5b2a1eb-9b07_icon_emotion_default" data-emotion-score="4">                                                                                                    <span class="path1"></span><span class="path2"></span>                                                                                            </span>                                                                                                                        <span class="_hj-f5b2a1eb-9b07_emotion_text _hj-f5b2a1eb-9b07_transition">Love</span>                                    </div>                                    <div class="_hj-f5b2a1eb-9b07_clear_both"></div>                                </div>                                                                <div class="_hj-f5b2a1eb-9b07_emotion_comment_holder">                                    <textarea maxlength="1000" class="_hj-f5b2a1eb-9b07_input_field" id="_hj-f5b2a1eb-9b07_emotion_comment" name="_hj-f5b2a1eb-9b07_emotion_comment" placeholder="Tell us about your experience..." rows="3" data-bind="comment"></textarea>                                    <div class="_hj-f5b2a1eb-9b07_toolset_actions">                                                                                <div id="_hj-f5b2a1eb-9b07_toolset_action_select" class="_hj-f5b2a1eb-9b07_transition">                                            <span class="_hj-f5b2a1eb-9b07_icon _hj-f5b2a1eb-9b07_icon-select-element"></span>                                            <div class="_hj-f5b2a1eb-9b07_toolset_tooltip _hj-f5b2a1eb-9b07_transition">Select an element on the page.</div>                                        </div>                                                                            </div>                                </div>                                                            </div>                        </div>                                                <!-- STEP 2: EMAIL -->                        <div id="_hj-f5b2a1eb-9b07_state-2" data-state="email">                            <p class="_hj-f5b2a1eb-9b07_widget_title">Enter your email address if you would like to receive a follow up.</p>                            <div class="_hj-f5b2a1eb-9b07_widget_content">                                <input maxlength="255" class="_hj-f5b2a1eb-9b07_input_field" type="email" id="_hj-f5b2a1eb-9b07_email" name="_hj-f5b2a1eb-9b07_email" placeholder="email@domain.com" data-bind="email">                             </div>                        </div>                        <!-- STEP 3: THANK YOU AND CONSENT -->                        <div id="_hj-f5b2a1eb-9b07_state-3" data-state="consent">                            <p class="_hj-f5b2a1eb-9b07_widget_title">Thank you for sharing your feedback with us!</p>                            <div class="_hj-f5b2a1eb-9b07_widget_content">                                <p class="_hj-f5b2a1eb-9b07_consent_message_text">Connecting your feedback with data related to your visits (device-specific, usage data, cookies, behavior and interactions) will help us improve faster. Do you give us your consent to do so for your previous and future visits?&nbsp;<a class="_hj-f5b2a1eb-9b07_more_info_link" href="http://www.hotjarconsent.com/" target="_blank">More information</a></p>                                <div class="_hj-f5b2a1eb-9b07_consent_actions">                                    <button class="_hj-f5b2a1eb-9b07_btn_primary _hj-f5b2a1eb-9b07_rounded_corners" data-consent="false" type="button">                                        <i class="_hj-f5b2a1eb-9b07_icon _hj-f5b2a1eb-9b07_icon-x"></i>                                    </button>                                    <button class="_hj-f5b2a1eb-9b07_btn_primary _hj-f5b2a1eb-9b07_rounded_corners" data-consent="true" type="button">                                        <i class="_hj-f5b2a1eb-9b07_icon _hj-f5b2a1eb-9b07_icon-ok"></i>                                    </button>                                 </div>                                                             </div>                        </div>                                                <!-- FOOTER -->                        <div class="_hj-f5b2a1eb-9b07_widget_footer">                                                            <div id="_hj-f5b2a1eb-9b07_hotjar_branding" class="_hj-f5b2a1eb-9b07_pull_left">                                    <span class="_hj-f5b2a1eb-9b07_link_no_underline _hj-f5b2a1eb-9b07_icon _hj-f5b2a1eb-9b07_icon-hotjar"></span>                                    Not using <a href="https://www.hotjar.com/incoming-feedback?utm_source=client&amp;utm_medium=incoming_feedback&amp;utm_campaign=insights" target="_blank">Hotjar</a> yet?                                </div>                                                        <div class="_hj-f5b2a1eb-9b07_pull_right">                                <button type="button" id="_hj-f5b2a1eb-9b07_action_skip" class="_hj-f5b2a1eb-9b07_btn_clear _hj-f5b2a1eb-9b07_rounded_corners _hj-f5b2a1eb-9b07_transition">Skip</button>                                <button type="button" id="_hj-f5b2a1eb-9b07_action_submit" class="_hj-f5b2a1eb-9b07_btn_primary _hj-f5b2a1eb-9b07_rounded_corners _hj-f5b2a1eb-9b07_transition _hj-f5b2a1eb-9b07_shadow _hj-f5b2a1eb-9b07_btn_disabled">Send</button>                            </div>                            <div class="_hj-f5b2a1eb-9b07_clear_both"></div>                        </div>                    </div>                                        <!-- PAGE HIGHLIGHTER -->                    <div id="_hj-f5b2a1eb-9b07_feedback_page_highlight" class="_hj-f5b2a1eb-9b07_feedback_selection_ignore">                        <div class="_hj-f5b2a1eb-9b07_feedback_page_highlight_line _hj-f5b2a1eb-9b07_transition" id="_hj-f5b2a1eb-9b07_feedback_page_highlight_line_top"></div>                        <div class="_hj-f5b2a1eb-9b07_feedback_page_highlight_line _hj-f5b2a1eb-9b07_transition" id="_hj-f5b2a1eb-9b07_feedback_page_highlight_line_right"></div>                        <div class="_hj-f5b2a1eb-9b07_feedback_page_highlight_line _hj-f5b2a1eb-9b07_transition" id="_hj-f5b2a1eb-9b07_feedback_page_highlight_line_bottom"></div>                        <div class="_hj-f5b2a1eb-9b07_feedback_page_highlight_line _hj-f5b2a1eb-9b07_transition" id="_hj-f5b2a1eb-9b07_feedback_page_highlight_line_left"></div>                                                <div id="_hj-f5b2a1eb-9b07_feedback_top_message_select">                            Select an element on the page.                            <a id="_hj-f5b2a1eb-9b07_feedback_top_message_select_close" class="_hj-f5b2a1eb-9b07_feedback_selection_ignore _hj-f5b2a1eb-9b07_transition">                                <span class="_hj-f5b2a1eb-9b07_icon _hj-f5b2a1eb-9b07_icon-x _hj-f5b2a1eb-9b07_feedback_selection_ignore"></span>                            </a>                        </div>                                            </div>                                        <!-- DIMMERS (OVERLAY) + ELEMENT HIGHLIGHTER -->                    <div class="_hj-f5b2a1eb-9b07_feedback_content_dimmer" id="_hj-f5b2a1eb-9b07_feedback_content_dimmer_top" data-show-for="desktop"></div>                    <div class="_hj-f5b2a1eb-9b07_feedback_content_dimmer" id="_hj-f5b2a1eb-9b07_feedback_content_dimmer_right" data-show-for="desktop"></div>                    <div class="_hj-f5b2a1eb-9b07_feedback_content_dimmer" id="_hj-f5b2a1eb-9b07_feedback_content_dimmer_bottom" data-show-for="desktop"></div>                    <div class="_hj-f5b2a1eb-9b07_feedback_content_dimmer" id="_hj-f5b2a1eb-9b07_feedback_content_dimmer_left" data-show-for="desktop"></div>                    <div id="_hj-f5b2a1eb-9b07_feedback_content_highlighter" data-show-for="desktop">                        <a id="_hj-f5b2a1eb-9b07_feedback_content_highlighter_close">                            <span class="_hj-f5b2a1eb-9b07_icon _hj-f5b2a1eb-9b07_icon-x _hj-f5b2a1eb-9b07_feedback_selection_ignore"></span>                        </a>                    </div>                                    </div></div></div><a href="javascript:void(0);" title="Sumo" style="background-color: rgb(0, 115, 183); border-radius: 3px 0px 0px 3px; box-shadow: rgba(0, 0, 0, 0.2) 0px 4px 10px; position: fixed; z-index: 2147483647; padding: 0px; width: 44px; height: 40px; text-indent: -10000px; opacity: 1; display: none !important;"><span style="position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden;">Sumo</span><span style="display:block;width:40px;height:40px;background:white;margin-left:4px;-webkit-border-radius: 3px 0 0 3px;-moz-border-radius: 3px 0 0 3px;-ms-border-radius: 3px 0 0 3px;-o-border-radius: 3px 0 0 3px;border-radius: 3px 0 0 3px;background-repeat:no-repeat;background-position:8px 8px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZDQ2MjI4YS03NWY2LTRkZTQtOGJjYy1hODc1NjRkMjYxYTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDQ3MUVFMDFFMjVDMTFFNjlFQjhBRjdGODU5MDJBMDUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDQ3MUVFMDBFMjVDMTFFNjlFQjhBRjdGODU5MDJBMDUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxZDQ2MjI4YS03NWY2LTRkZTQtOGJjYy1hODc1NjRkMjYxYTUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MWQ0NjIyOGEtNzVmNi00ZGU0LThiY2MtYTg3NTY0ZDI2MWE1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+8JtvywAAAKhQTFRFzOPxSJvLA3W4Mo7FBna5w97u8vj7EHy8a67VhbzdsdTpVaLPh73d9/v9C3m6QZfJbq/WXKbR3u32JIfB3ez1KorDir/eBHW4+/3+rtPoZarUG4K/LIvDDnu7ocvkf7nbdrTY9fr8E328WKPQO5PITJ3MPpXJstXptdbq+Pv9cbHXaq3VU6HOkMLgnMnjDHq62uv1/P3+6/T53Oz1cLDX/f7+AHO3////ptOZ5QAAADh0Uk5T/////////////////////////////////////////////////////////////////////////wA7XBHKAAAAmUlEQVR42sSRRxLCMAxFRSq9907ovebr/jdDMWYGxmZL3sIqbyFbJv4B/VlkVlerKALTD3G46Mx3AOR1UZ/TsDxW6W0gfYRNVfTCFu2AWpAMgMItMW+zQJU2UjWI29D0+e5KWNPMk+A9Om+B/UgOJyCuwMJCrpuziYkIsglfRByZ/XM3eXnBFEu1kpMpjq9dxQYp/OAXTwEGAB7Rc1xVnPemAAAAAElFTkSuQmCC);"></span></a><iframe style="display: none;" src="./SitePoint Premium_files/saved_resource(1).html"></iframe><div style="position:fixed;top:0;left:0;overflow:hidden;"><label for="focus_retriever" style="position:absolute;left:-1000px;">Focus Retriever</label><input style="position:absolute;left:-1000px;" type="text" name="focus_retriever" value="" id="focus_retriever" readonly="true"></div><iframe src="./SitePoint Premium_files/webPushAnalytics.html" style="display: none;"></iframe></body></html>